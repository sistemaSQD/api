'use strict';const a41_0xe4eae5=a41_0x297d;(function(_0x1069ca,_0x1de011){const _0x378af9=a41_0x297d,_0x515267=_0x1069ca();while(!![]){try{const _0x44ce08=-parseInt(_0x378af9(0x24f))/0x1+parseInt(_0x378af9(0x21f))/0x2+parseInt(_0x378af9(0x212))/0x3+parseInt(_0x378af9(0x250))/0x4+parseInt(_0x378af9(0x22e))/0x5*(parseInt(_0x378af9(0x1f9))/0x6)+-parseInt(_0x378af9(0x204))/0x7+-parseInt(_0x378af9(0x1eb))/0x8;if(_0x44ce08===_0x1de011)break;else _0x515267['push'](_0x515267['shift']());}catch(_0xd1253a){_0x515267['push'](_0x515267['shift']());}}}(a41_0x4429,0xcad60));const a9_0x55a1f0=a9_0x8e42;(function(_0x3947bc,_0x4603f9){const _0x2535df=a41_0x297d,_0x2c307b=a9_0x8e42,_0x29461f=_0x3947bc();while(!![]){try{const _0x38f7ed=-parseInt(_0x2c307b(0x13a))/0x1+parseInt(_0x2c307b(0x11a))/0x2+-parseInt(_0x2c307b(0x13b))/0x3+-parseInt(_0x2c307b(0x12d))/0x4*(parseInt(_0x2c307b(0x108))/0x5)+-parseInt(_0x2c307b(0xbf))/0x6+-parseInt(_0x2c307b(0x15f))/0x7*(-parseInt(_0x2c307b(0xfa))/0x8)+parseInt(_0x2c307b(0xcd))/0x9*(parseInt(_0x2c307b(0x15c))/0xa);if(_0x38f7ed===_0x4603f9)break;else _0x29461f['push'](_0x29461f[_0x2535df(0x215)]());}catch(_0x100c4b){_0x29461f['push'](_0x29461f[_0x2535df(0x215)]());}}}(a9_0x4f18,0xa3662));function a41_0x297d(_0x356c0a,_0x25a9a7){const _0x44298e=a41_0x4429();return a41_0x297d=function(_0x297d6a,_0x3d3a4f){_0x297d6a=_0x297d6a-0x1cd;let _0x2239ec=_0x44298e[_0x297d6a];return _0x2239ec;},a41_0x297d(_0x356c0a,_0x25a9a7);}function a9_0x4f18(){const _0x464fd0=a41_0x297d,_0xc49a4a=[_0x464fd0(0x246),_0x464fd0(0x268),_0x464fd0(0x1fd),'sshport','</b>\x20ha\x20sido\x20automaticamente\x20bloqueado\x20por\x20exceder\x20el\x20límite\x20de\x20cuota\x20de\x20<b>',_0x464fd0(0x218),_0x464fd0(0x217),'Conexión\x20a\x20sitio',_0x464fd0(0x237),_0x464fd0(0x253),'8310591IpBvDQ',_0x464fd0(0x262),_0x464fd0(0x24c),_0x464fd0(0x230),_0x464fd0(0x1d7),_0x464fd0(0x266),_0x464fd0(0x1d1),_0x464fd0(0x214),_0x464fd0(0x1e7),'split','__esModule',_0x464fd0(0x213),_0x464fd0(0x1d0),_0x464fd0(0x232),'withMessage',_0x464fd0(0x248),_0x464fd0(0x1cf),_0x464fd0(0x1ea),_0x464fd0(0x1fc),_0x464fd0(0x26d),_0x464fd0(0x25e),_0x464fd0(0x238),'connect','status',_0x464fd0(0x1dd),_0x464fd0(0x25c),_0x464fd0(0x1d2),'El\x20servicio\x20en\x20el\x20proxy\x20<b>',_0x464fd0(0x1e4),_0x464fd0(0x200),_0x464fd0(0x1da),_0x464fd0(0x247),_0x464fd0(0x1ed),'receive\x20new\x20connections','splice',_0x464fd0(0x241),_0x464fd0(0x25f),_0x464fd0(0x223),'isIPAddress',_0x464fd0(0x1de),_0x464fd0(0x1d9),'defineProperty','../controllers/license.controller',_0x464fd0(0x22b),_0x464fd0(0x221),_0x464fd0(0x206),_0x464fd0(0x1db),'speed_value',_0x464fd0(0x240),_0x464fd0(0x27c),'setSSHConnection','../models/Useful',_0x464fd0(0x21a),_0x464fd0(0x25a),_0x464fd0(0x234),_0x464fd0(0x1e9),_0x464fd0(0x1e5),_0x464fd0(0x269),_0x464fd0(0x1f1),_0x464fd0(0x20c),_0x464fd0(0x279),_0x464fd0(0x24e),_0x464fd0(0x23e),_0x464fd0(0x259),_0x464fd0(0x21e),_0x464fd0(0x205),_0x464fd0(0x1d6),_0x464fd0(0x1f4),'Error\x20en\x20la\x20conexión\x20ssh\x20del\x20servidor\x20',_0x464fd0(0x270),_0x464fd0(0x20d),_0x464fd0(0x1ff),_0x464fd0(0x243),'serverldap',_0x464fd0(0x274),_0x464fd0(0x23d),_0x464fd0(0x1ee),_0x464fd0(0x26c),_0x464fd0(0x1f7),'parseSource',_0x464fd0(0x26f),_0x464fd0(0x25b),_0x464fd0(0x26e),_0x464fd0(0x227),'refreshSourcesLock','connection',_0x464fd0(0x210),_0x464fd0(0x263),_0x464fd0(0x226),_0x464fd0(0x1e0),_0x464fd0(0x22f),_0x464fd0(0x22a),'run',_0x464fd0(0x1f6),_0x464fd0(0x215),_0x464fd0(0x1fb),_0x464fd0(0x21c),'get',_0x464fd0(0x21d),_0x464fd0(0x1d5),'stdout','Source',_0x464fd0(0x20f),'systemctl\x20restart\x20squid',_0x464fd0(0x219),_0x464fd0(0x21b),_0x464fd0(0x229),_0x464fd0(0x1f8),_0x464fd0(0x22c),_0x464fd0(0x235),_0x464fd0(0x216),_0x464fd0(0x225),_0x464fd0(0x231),'map','\x20al\x20intentar\x20bloquear\x20a\x20',_0x464fd0(0x23a),_0x464fd0(0x264),'\x20detalles\x20de\x20los\x20sitios:\x20','site',_0x464fd0(0x26b),_0x464fd0(0x267),_0x464fd0(0x202),_0x464fd0(0x260),_0x464fd0(0x211),_0x464fd0(0x1ec),'_id',_0x464fd0(0x26a),'remote',_0x464fd0(0x249),_0x464fd0(0x1fe),_0x464fd0(0x22d),_0x464fd0(0x278),'stderr',_0x464fd0(0x23f),_0x464fd0(0x1e6),_0x464fd0(0x220),_0x464fd0(0x1e1),_0x464fd0(0x201),'ServerInterface','active',_0x464fd0(0x265),_0x464fd0(0x261),_0x464fd0(0x242),'20dVAReM',_0x464fd0(0x27a),_0x464fd0(0x208),'299509KXZbsY',_0x464fd0(0x1f0),_0x464fd0(0x24b),_0x464fd0(0x256),'throw',_0x464fd0(0x24a),'getServers','save',_0x464fd0(0x224),_0x464fd0(0x252),_0x464fd0(0x1d8),'systemctl\x20reload\x20squid','collection','last_connection','</b>\x20ha\x20comenzado\x20a\x20ejecutarse\x20correctamente',_0x464fd0(0x275),'usersConnected',_0x464fd0(0x1d4),_0x464fd0(0x1f5),_0x464fd0(0x20e),'cachepass',_0x464fd0(0x277),_0x464fd0(0x272),'notified','check'];return a9_0x4f18=function(){return _0xc49a4a;},a9_0x4f18();}var __createBinding=this&&this[a41_0xe4eae5(0x257)]||(Object['create']?function(_0x1b0416,_0x55ac02,_0x4e7eef,_0x18a817){const _0x2485c6=a9_0x8e42;if(_0x18a817===undefined)_0x18a817=_0x4e7eef;Object[_0x2485c6(0xf6)](_0x1b0416,_0x18a817,{'enumerable':!![],'get':function(){return _0x55ac02[_0x4e7eef];}});}:function(_0x237df4,_0x27670e,_0x15a2fb,_0x24a3c3){if(_0x24a3c3===undefined)_0x24a3c3=_0x15a2fb;_0x237df4[_0x24a3c3]=_0x27670e[_0x15a2fb];}),__setModuleDefault=this&&this[a9_0x55a1f0(0xf4)]||(Object[a41_0xe4eae5(0x213)]?function(_0x444ee0,_0x569558){const _0x1f8fbb=a41_0xe4eae5,_0x5bab92=a9_0x55a1f0;Object[_0x5bab92(0xf6)](_0x444ee0,_0x1f8fbb(0x1d1),{'enumerable':!![],'value':_0x569558});}:function(_0xff6d9b,_0x514481){const _0x87272d=a9_0x55a1f0;_0xff6d9b[_0x87272d(0xd3)]=_0x514481;}),__importStar=this&&this[a9_0x55a1f0(0x105)]||function(_0xd94db6){const _0x939c7c=a41_0xe4eae5,_0x4aed1a=a9_0x55a1f0;if(_0xd94db6&&_0xd94db6[_0x4aed1a(0xd7)])return _0xd94db6;var _0x517840={};if(_0xd94db6!=null){for(var _0xbff33b in _0xd94db6)if(_0xbff33b!=='default'&&Object[_0x939c7c(0x233)][_0x4aed1a(0xe1)][_0x939c7c(0x20b)](_0xd94db6,_0xbff33b))__createBinding(_0x517840,_0xd94db6,_0xbff33b);}return __setModuleDefault(_0x517840,_0xd94db6),_0x517840;},__awaiter=this&&this[a9_0x55a1f0(0x119)]||function(_0xdcdbc0,_0x4e511b,_0xe16562,_0x297abd){function _0x32594c(_0xce2ded){return _0xce2ded instanceof _0xe16562?_0xce2ded:new _0xe16562(function(_0x56d736){_0x56d736(_0xce2ded);});}return new(_0xe16562||(_0xe16562=Promise))(function(_0x592b8a,_0x303a50){const _0x5587d1=a41_0x297d,_0x4539c1=a9_0x8e42;function _0x10b9d8(_0xa334dc){const _0x482cfd=a9_0x8e42;try{_0xe1b891(_0x297abd[_0x482cfd(0xd1)](_0xa334dc));}catch(_0x5d203a){_0x303a50(_0x5d203a);}}function _0x3636a8(_0x173d78){const _0x4ae708=a9_0x8e42;try{_0xe1b891(_0x297abd[_0x4ae708(0x163)](_0x173d78));}catch(_0x3878b6){_0x303a50(_0x3878b6);}}function _0xe1b891(_0x5da06d){const _0x248657=a9_0x8e42;_0x5da06d[_0x248657(0x159)]?_0x592b8a(_0x5da06d[_0x248657(0xfb)]):_0x32594c(_0x5da06d[_0x248657(0xfb)])[_0x248657(0x138)](_0x10b9d8,_0x3636a8);}_0xe1b891((_0x297abd=_0x297abd[_0x5587d1(0x254)](_0xdcdbc0,_0x4e511b||[]))[_0x4539c1(0xd1)]());});},__importDefault=this&&this[a41_0xe4eae5(0x1d3)]||function(_0x3454ac){const _0x180bb5=a9_0x55a1f0;return _0x3454ac&&_0x3454ac[_0x180bb5(0xd7)]?_0x3454ac:{'default':_0x3454ac};};Object[a9_0x55a1f0(0xf6)](exports,a9_0x55a1f0(0xd7),{'value':!![]}),exports[a9_0x55a1f0(0xf8)]=exports[a9_0x55a1f0(0xe5)]=exports[a41_0xe4eae5(0x22c)]=exports['statusServer']=exports[a9_0x55a1f0(0x126)]=exports[a9_0x55a1f0(0x117)]=exports[a9_0x55a1f0(0x115)]=exports[a9_0x55a1f0(0xf9)]=exports[a9_0x55a1f0(0xff)]=exports[a9_0x55a1f0(0x14f)]=exports[a9_0x55a1f0(0x113)]=exports['getServers']=void 0x0;const express_validator_1=require(a41_0xe4eae5(0x228)),Server_1=require(a41_0xe4eae5(0x236)),Source_1=require(a9_0x55a1f0(0x14e)),Quota_1=require(a41_0xe4eae5(0x27b)),ConnectionNotify_1=require(a9_0x55a1f0(0xc3)),LicenseController=__importStar(require(a9_0x55a1f0(0xf7))),handleNotify=__importStar(require(a41_0xe4eae5(0x1e2))),Useful_1=__importDefault(require(a9_0x55a1f0(0x100))),Cache_1=__importDefault(require(a9_0x55a1f0(0xf1))),{NodeSSH}=require(a9_0x55a1f0(0xdd)),parser=require(a9_0x55a1f0(0x127)),exec=require(a41_0xe4eae5(0x271))[a9_0x55a1f0(0x141)];let serversData=[];const getServers=(_0x1a6dd6,_0x4a3dde)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xc26564=a41_0xe4eae5,_0x1e32bc=a9_0x55a1f0;let _0x32822d=yield Server_1[_0xc26564(0x23a)][_0x1e32bc(0x12a)]()[_0x1e32bc(0x138)](_0x1399a1=>{return _0x1399a1;})[_0x1e32bc(0x112)](_0x387946=>{const _0xa76fa9=_0xc26564,_0x360f16=_0x1e32bc;return{'errors':[{'location':_0x360f16(0x165),'msg':_0xa76fa9(0x251),'param':'servers'}]};});return _0x32822d[_0x1e32bc(0x10a)]((_0x532afa,_0x5684d0)=>_0x5684d0[_0x1e32bc(0x158)]-_0x532afa[_0x1e32bc(0x158)]),_0x4a3dde[_0x1e32bc(0x11f)](_0x32822d);});exports[a9_0x55a1f0(0x165)]=getServers;const getServersById=(_0xd27778,_0x291933)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x17c1ca=a41_0xe4eae5,_0x3847da=a9_0x55a1f0;let _0x4060f5=yield Server_1[_0x17c1ca(0x23a)][_0x17c1ca(0x201)](_0xd27778[_0x3847da(0xeb)]['id'])[_0x3847da(0x10b)](_0x3847da(0x116))[_0x17c1ca(0x1f8)](_0x6e7ed=>{return _0x6e7ed;})[_0x3847da(0x112)](_0x55026a=>{const _0x3893b0=_0x17c1ca,_0x20d189=_0x3847da;return{'errors':[{'location':_0x20d189(0x165),'msg':_0x20d189(0x148),'param':_0x3893b0(0x245)}]};});return _0x291933[_0x3847da(0x11f)](_0x4060f5);});exports[a9_0x55a1f0(0x113)]=getServersById;const register=(_0x23fa90,_0xd53493)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x564a69=a41_0xe4eae5,_0x4904d1=a9_0x55a1f0;yield express_validator_1[_0x4904d1(0xc2)](_0x4904d1(0x10e))[_0x4904d1(0x15a)]()[_0x4904d1(0xdb)](_0x4904d1(0xcc))[_0x564a69(0x209)](_0x23fa90);const _0x4eae64=_0x22c8ff=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x165833=_0x4904d1;if(!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x165833(0xce)](_0x23fa90['body'][_0x165833(0x10e)]))return Promise[_0x165833(0x10d)](_0x165833(0xf0));}),_0x179391=_0xd1f9b7=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x260a6a=_0x564a69,_0x5dd7e9=_0x4904d1;return yield Server_1[_0x260a6a(0x23a)][_0x5dd7e9(0x130)]({'host':_0x23fa90[_0x5dd7e9(0xeb)][_0x5dd7e9(0x10e)]})[_0x5dd7e9(0x138)](_0x15a513=>{const _0x4e34de=_0x5dd7e9;if(_0x15a513)return Promise[_0x4e34de(0x10d)](_0x4e34de(0x104));});});yield express_validator_1[_0x564a69(0x1f3)](_0x4904d1(0x10e))[_0x4904d1(0x162)](_0x4eae64)['run'](_0x23fa90),yield express_validator_1[_0x4904d1(0xc2)](_0x4904d1(0x10e))[_0x4904d1(0x162)](_0x179391)[_0x4904d1(0x129)](_0x23fa90);const _0xf5d194=express_validator_1[_0x564a69(0x258)](_0x23fa90);if(!_0xf5d194[_0x4904d1(0x12c)]())return _0xd53493[_0x4904d1(0x11f)]({'errors':_0xf5d194[_0x4904d1(0xd9)]()});let _0x56fa85=yield Server_1[_0x4904d1(0x140)][_0x4904d1(0x130)]({'active':!![]})['then'](_0x383228=>{if(_0x383228)return![];else return!![];}),_0x20caa7=new Server_1[(_0x4904d1(0x157))]({'host':_0x23fa90[_0x564a69(0x1da)][_0x4904d1(0x10e)],'port':_0x23fa90[_0x4904d1(0xeb)][_0x4904d1(0xe7)],'cachepass':_0x23fa90[_0x4904d1(0xeb)][_0x4904d1(0x173)],'active':_0x56fa85});return yield Server_1[_0x4904d1(0x140)][_0x4904d1(0xd8)](_0x20caa7,(_0x525330,_0x54523a)=>{const _0xa1754c=_0x564a69,_0x5c81cc=_0x4904d1;if(_0x525330)return _0xd53493[_0xa1754c(0x26e)]({'errors':[{'location':_0x5c81cc(0x14f),'msg':_0x5c81cc(0xd0),'param':_0x5c81cc(0x14d)}]});else return _0xd53493[_0x5c81cc(0x11f)](_0x54523a);});});exports[a9_0x55a1f0(0x14f)]=register;const setSSHConnection=(_0x4bb696,_0x34d6ca)=>{const _0x4c6fe7=a41_0xe4eae5,_0xd277b2=a9_0x55a1f0;Server_1[_0xd277b2(0x140)][_0xd277b2(0x156)](_0x4bb696[_0x4c6fe7(0x26f)]['id'])[_0x4c6fe7(0x1f8)](_0x4c25c9=>{const _0x1ce265=_0xd277b2;if(_0x4c25c9){const _0x2eb895=new NodeSSH();_0x2eb895[_0x1ce265(0xe3)]({'host':_0x4c25c9[_0x1ce265(0x10e)],'port':_0x4bb696[_0x1ce265(0xeb)][_0x1ce265(0xc6)],'username':_0x4bb696[_0x1ce265(0xeb)][_0x1ce265(0x136)],'password':_0x4bb696[_0x1ce265(0xeb)][_0x1ce265(0x109)]})[_0x1ce265(0x138)](function(){const _0x1295bd=a41_0x297d,_0x450fcc=_0x1ce265;Server_1[_0x450fcc(0x140)][_0x450fcc(0xd2)](_0x4bb696[_0x450fcc(0x11d)]['id'],_0x4bb696[_0x1295bd(0x1da)],{'new':!![]})[_0x450fcc(0x138)](_0x33857d=>{const _0x18c329=_0x450fcc;return _0x34d6ca[_0x18c329(0x11f)](_0x33857d);})[_0x450fcc(0x112)](_0x3c4582=>{const _0x14b9a1=_0x1295bd,_0x3b35f1=_0x450fcc;return _0x34d6ca[_0x3b35f1(0x11f)]({'errors':[{'location':_0x3b35f1(0x115),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20SSH\x20del\x20servidor','param':_0x14b9a1(0x1dc)}]});});})[_0x1ce265(0x112)](_0x19f05f=>{const _0x446552=a41_0x297d,_0x480b11=_0x1ce265;return _0x34d6ca[_0x480b11(0x11f)]({'errors':[{'location':_0x480b11(0xe6),'msg':_0x480b11(0xe2),'param':_0x446552(0x1dc)}]});});}else return _0x34d6ca[_0x1ce265(0x11f)]({'errors':[{'location':_0x1ce265(0xff),'msg':_0x1ce265(0xdc),'param':_0x1ce265(0x10e)}]});})[_0x4c6fe7(0x270)](_0x548211=>{const _0x72a54a=_0xd277b2;return _0x34d6ca[_0x72a54a(0x11f)]({'errors':[{'location':_0x72a54a(0xff),'msg':_0x72a54a(0x148),'param':_0x72a54a(0x10f)}]});});};exports[a9_0x55a1f0(0xff)]=setSSHConnection;function a9_0x8e42(_0x279a59,_0x840bc1){const _0x29cba4=a9_0x4f18();return a9_0x8e42=function(_0x4d224d,_0x333aef){_0x4d224d=_0x4d224d-0xbf;let _0x15b76e=_0x29cba4[_0x4d224d];return _0x15b76e;},a9_0x8e42(_0x279a59,_0x840bc1);}const deleteSSHConnection=(_0xed5357,_0xfef8b)=>{const _0x50d791=a41_0xe4eae5,_0x2a4efc=a9_0x55a1f0;Server_1[_0x2a4efc(0x140)][_0x2a4efc(0x156)](_0xed5357[_0x50d791(0x26f)]['id'])[_0x50d791(0x1f8)](_0x3725c5=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2b9df9=_0x50d791,_0x322aca=_0x2a4efc;return _0x3725c5?_0x3725c5[_0x322aca(0x136)]?(yield Server_1[_0x2b9df9(0x23a)]['collection'][_0x322aca(0x144)]({'_id':_0x3725c5[_0x322aca(0x14a)]},{'$unset':{'sshuser':0x1,'sshport':0x1,'sshpass':0x1}}),_0xfef8b[_0x2b9df9(0x26e)](_0x3725c5)):_0xfef8b[_0x322aca(0x11f)]({'errors':[{'location':_0x322aca(0xff),'msg':_0x322aca(0x128),'param':_0x322aca(0x10e)}]}):_0xfef8b[_0x322aca(0x11f)]({'errors':[{'location':_0x2b9df9(0x1ef),'msg':_0x2b9df9(0x248),'param':'host'}]});}))[_0x50d791(0x270)](_0x2bed07=>{const _0x338dcc=_0x50d791,_0x4288d6=_0x2a4efc;return _0xfef8b[_0x4288d6(0x11f)]({'errors':[{'location':_0x4288d6(0xff),'msg':_0x4288d6(0x148),'param':_0x338dcc(0x1d6)}]});});};exports[a41_0xe4eae5(0x221)]=deleteSSHConnection;const update=(_0x38caa2,_0x55935b)=>{const _0x13cd0e=a41_0xe4eae5,_0x4fb873=a9_0x55a1f0;Server_1[_0x13cd0e(0x23a)][_0x13cd0e(0x201)](_0x38caa2[_0x4fb873(0x11d)]['id'])[_0x4fb873(0x138)](_0x772e9e=>{const _0x311d8c=_0x13cd0e,_0x4e3669=_0x4fb873;if(_0x772e9e)Server_1[_0x4e3669(0x140)][_0x4e3669(0xd2)](_0x38caa2[_0x4e3669(0x11d)]['id'],_0x38caa2[_0x4e3669(0xeb)],{'new':!![]})[_0x4e3669(0x138)](_0x4f7018=>{const _0x29eb51=_0x4e3669;return _0x55935b[_0x29eb51(0x11f)](_0x4f7018);})[_0x4e3669(0x112)](_0x18e762=>{const _0x58ede7=a41_0x297d,_0x2ec488=_0x4e3669;return _0x55935b[_0x2ec488(0x11f)]({'errors':[{'location':'update','msg':_0x58ede7(0x1e3),'param':_0x58ede7(0x1dc)}]});});else return _0x55935b[_0x4e3669(0x11f)]({'errors':[{'location':_0x4e3669(0x115),'msg':_0x311d8c(0x248),'param':_0x4e3669(0x10e)}]});})[_0x4fb873(0x112)](_0x559d0f=>{const _0x2a5886=_0x13cd0e,_0xf3caa8=_0x4fb873;return _0x55935b[_0x2a5886(0x26e)]({'errors':[{'location':_0xf3caa8(0x115),'msg':_0xf3caa8(0x148),'param':_0xf3caa8(0x10f)}]});});};exports[a9_0x55a1f0(0x115)]=update;const activate=(_0x2e14b5,_0xbbabbb)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1385b9=a41_0xe4eae5,_0x146587=a9_0x55a1f0;yield Server_1[_0x146587(0x140)][_0x146587(0x156)](_0x2e14b5[_0x1385b9(0x26f)]['id'])[_0x146587(0x138)](_0x777521=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4b2ea6=_0x1385b9,_0x4895a1=_0x146587;if(_0x777521)yield Server_1[_0x4895a1(0x140)][_0x4895a1(0x130)]({'active':!![]})[_0x4895a1(0x138)](_0xf778cd=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x277ed5=a41_0x297d,_0x33016c=_0x4895a1;_0xf778cd&&_0xf778cd[_0x277ed5(0x23c)]!=_0x777521[_0x33016c(0x14a)]&&(yield Server_1[_0x33016c(0x140)][_0x33016c(0xd2)](_0xf778cd['id'],{'active':![]},{'new':!![]}));})),yield Server_1[_0x4895a1(0x140)][_0x4b2ea6(0x266)](_0x2e14b5[_0x4895a1(0x11d)]['id'],{'active':!![]},{'new':!![]})[_0x4895a1(0x138)](_0x86261b=>{const _0x32c987=_0x4895a1;return _0xbbabbb[_0x32c987(0x11f)](_0x86261b);});else return _0xbbabbb[_0x4895a1(0x11f)]({'errors':[{'location':_0x4895a1(0x117),'msg':_0x4895a1(0xdf),'param':_0x4b2ea6(0x205)}]});}))[_0x1385b9(0x270)](_0x2ca04e=>{const _0x58a3c2=_0x1385b9,_0xe12529=_0x146587;return _0xbbabbb[_0xe12529(0x11f)]({'errors':[{'location':_0xe12529(0x117),'msg':_0xe12529(0x148),'param':_0x58a3c2(0x1d6)}]});});});exports[a9_0x55a1f0(0x117)]=activate;const deleteServer=(_0x4fb530,_0x5e658d)=>{const _0x24b8dd=a41_0xe4eae5,_0x379e83=a9_0x55a1f0;Server_1[_0x379e83(0x140)][_0x24b8dd(0x201)](_0x4fb530[_0x379e83(0x11d)]['id'])[_0x379e83(0x10b)](_0x24b8dd(0x1f5))[_0x379e83(0x138)](_0x183622=>{const _0x5b8869=_0x24b8dd,_0x350ef9=_0x379e83;if(_0x183622)_0x183622[_0x5b8869(0x1f5)]&&_0x183622[_0x350ef9(0x171)][_0x350ef9(0x13e)]((_0x30c36b,_0x47813d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x368341=_0x5b8869,_0x17d8b4=_0x350ef9;yield _0x30c36b[_0x17d8b4(0x10b)](_0x17d8b4(0x114))[_0x17d8b4(0x10b)](_0x368341(0x208))[_0x17d8b4(0x135)](),_0x30c36b[_0x368341(0x208)][_0x368341(0x275)]>0x0&&(console[_0x17d8b4(0xed)](_0x30c36b[_0x17d8b4(0x15e)][_0x17d8b4(0x16e)]),_0x30c36b[_0x17d8b4(0x15e)][_0x17d8b4(0x13e)]((_0x5db42e,_0x59e95b)=>{const _0x2b6f73=_0x17d8b4;ConnectionNotify_1[_0x2b6f73(0x164)][_0x2b6f73(0x16b)][_0x2b6f73(0x147)]({'_id':_0x5db42e[_0x2b6f73(0x14a)]});}));if(_0x30c36b[_0x368341(0x1ff)]){let _0x26eb33=yield _0x30c36b[_0x17d8b4(0x114)][_0x17d8b4(0x10b)](_0x17d8b4(0x171))[_0x17d8b4(0x135)]();_0x26eb33[_0x17d8b4(0x171)][_0x17d8b4(0x13e)]((_0x9ee78,_0x547016)=>{const _0xfb2c53=_0x368341,_0x5026ad=_0x17d8b4;if(_0x9ee78[_0x5026ad(0x15b)]==_0x30c36b[_0x5026ad(0x15b)]){let _0xe5ecda=_0x26eb33[_0x5026ad(0x171)][_0x5026ad(0xef)](_0x547016,0x0);Quota_1[_0x5026ad(0x13c)][_0x5026ad(0x16b)][_0x5026ad(0x144)]({'_id':_0x30c36b[_0xfb2c53(0x1ff)][_0x5026ad(0x14a)]},{'$set':{'sources':_0xe5ecda}});}return _0x9ee78;});}return Source_1[_0x368341(0x1df)][_0x17d8b4(0x16b)]['findOneAndDelete']({'_id':_0x30c36b[_0x17d8b4(0x14a)]}),_0x30c36b;})),Server_1[_0x5b8869(0x23a)]['findByIdAndDelete'](_0x4fb530[_0x350ef9(0x11d)]['id'])['then'](()=>{const _0x353f6a=_0x350ef9;return _0x5e658d[_0x353f6a(0x11f)](_0x183622);})[_0x5b8869(0x270)](_0x37bcd3=>{const _0x4d35cb=_0x5b8869,_0x39f6eb=_0x350ef9;return _0x5e658d[_0x39f6eb(0x11f)]({'errors':[{'location':_0x39f6eb(0x115),'msg':_0x4d35cb(0x276),'param':_0x39f6eb(0x122)}]});});else return _0x5e658d[_0x350ef9(0x11f)]({'errors':[{'location':_0x350ef9(0x13d),'msg':_0x5b8869(0x248),'param':_0x5b8869(0x205)}]});})[_0x379e83(0x112)](_0x1e4992=>{const _0x303af1=_0x24b8dd,_0x1b8b37=_0x379e83;return _0x5e658d[_0x1b8b37(0x11f)]({'errors':[{'location':_0x303af1(0x231),'msg':_0x1b8b37(0x148),'param':_0x1b8b37(0x10f)}]});});};exports[a41_0xe4eae5(0x1e0)]=deleteServer;const statusServer=(_0x22a563,_0x3ff7a4)=>{const _0x207f7b=a41_0xe4eae5,_0x2242eb=a9_0x55a1f0;Server_1[_0x2242eb(0x140)][_0x207f7b(0x201)](_0x22a563[_0x2242eb(0x11d)]['id'])[_0x2242eb(0x138)](_0x17aa35=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xf0cc75=_0x207f7b,_0x4b0c32=_0x2242eb;if(_0x17aa35){if(_0x17aa35[_0x4b0c32(0x136)]){const _0xbe2c92=new NodeSSH();yield _0xbe2c92[_0x4b0c32(0xe3)]({'host':_0x17aa35[_0xf0cc75(0x205)],'port':_0x17aa35[_0xf0cc75(0x1cd)],'username':_0x17aa35[_0x4b0c32(0x136)],'password':_0x17aa35[_0xf0cc75(0x279)]})[_0x4b0c32(0x138)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5a7962=a41_0x297d,_0x51c436=a9_0x8e42;yield _0xbe2c92[_0x5a7962(0x20f)](_0x5a7962(0x23b))[_0x51c436(0x138)](function(_0x27e814){const _0x17c101=_0x5a7962,_0x2d5c4d=_0x51c436;if(_0x27e814[_0x17c101(0x25d)]!='')return _0x3ff7a4[_0x2d5c4d(0x11f)]({'errors':[{'location':_0x17c101(0x247),'msg':_0x2d5c4d(0x106),'param':_0x2d5c4d(0x122)}]});else{let _0x16cbc9=_0x27e814[_0x2d5c4d(0x131)][_0x2d5c4d(0xd6)](_0x2d5c4d(0x168))[0x1][_0x2d5c4d(0xd6)]('\x20')[0x0];return _0x3ff7a4[_0x2d5c4d(0x11f)]({'status':_0x16cbc9,'detail':_0x27e814[_0x2d5c4d(0x131)]});}})[_0x51c436(0x112)](_0x57b5b2=>{const _0x2b8856=_0x51c436;return _0x3ff7a4[_0x2b8856(0x11f)]({'errors':[{'location':_0x2b8856(0xec),'msg':_0x2b8856(0x106),'param':_0x2b8856(0x122)}]});});});})[_0x4b0c32(0x112)](_0x164e2a=>{const _0x439f48=_0xf0cc75,_0x437357=_0x4b0c32;return _0x3ff7a4['json']({'errors':[{'location':_0x437357(0xec),'msg':_0x437357(0xe2),'param':_0x439f48(0x1dc)}]});});}else return _0x3ff7a4[_0xf0cc75(0x26e)]({'errors':[{'location':_0x4b0c32(0xec),'msg':_0x4b0c32(0x128),'param':_0x4b0c32(0x122)}]});}else return _0x3ff7a4[_0xf0cc75(0x26e)]({'errors':[{'location':_0xf0cc75(0x247),'msg':_0x4b0c32(0xdc),'param':_0xf0cc75(0x205)}]});}))[_0x2242eb(0x112)](_0x1e32d0=>{const _0x114c94=_0x2242eb;return _0x3ff7a4[_0x114c94(0x11f)]({'errors':[{'location':_0x114c94(0xec),'msg':_0x114c94(0x148),'param':_0x114c94(0x10f)}]});});};exports[a9_0x55a1f0(0xec)]=statusServer;const restartServer=(_0x3edb16,_0x476862)=>{const _0x19ca63=a9_0x55a1f0;Server_1[_0x19ca63(0x140)]['findById'](_0x3edb16[_0x19ca63(0x11d)]['id'])[_0x19ca63(0x138)](_0x399039=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x16da33=a41_0x297d,_0x3ffa41=_0x19ca63;if(_0x399039){if(_0x399039[_0x3ffa41(0x136)]){const _0x3a3a81=new NodeSSH();yield _0x3a3a81['connect']({'host':_0x399039[_0x3ffa41(0x10e)],'port':_0x399039[_0x3ffa41(0xc6)],'username':_0x399039[_0x3ffa41(0x136)],'password':_0x399039[_0x16da33(0x279)]})[_0x3ffa41(0x138)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x500833=a9_0x8e42;yield _0x3a3a81[_0x500833(0x133)](_0x500833(0x134))[_0x500833(0x138)](function(_0x257cf8){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x53130c=a41_0x297d,_0xfaaec9=a9_0x8e42;if(_0x257cf8[_0xfaaec9(0x151)]!='')return _0x476862[_0xfaaec9(0x11f)]({'errors':[{'location':_0xfaaec9(0x139),'msg':_0x53130c(0x217),'param':_0xfaaec9(0x122)}]});else yield _0x3a3a81[_0x53130c(0x20f)](_0x53130c(0x23b))[_0xfaaec9(0x138)](function(_0x128004){const _0x455e9b=_0x53130c,_0x3993d1=_0xfaaec9;if(_0x128004[_0x3993d1(0x151)]!='')return _0x476862[_0x3993d1(0x11f)]({'errors':[{'location':_0x3993d1(0x139),'msg':_0x455e9b(0x269),'param':_0x3993d1(0x122)}]});else{let _0x1d4295=_0x128004[_0x3993d1(0x131)][_0x3993d1(0xd6)](_0x455e9b(0x252))[0x1][_0x455e9b(0x20a)]('\x20')[0x0];return _0x476862[_0x3993d1(0x11f)]({'status':_0x1d4295,'detail':_0x128004[_0x455e9b(0x244)]});}})[_0xfaaec9(0x112)](_0xfdd3e1=>{const _0x1c0dcf=_0xfaaec9;return _0x476862[_0x1c0dcf(0x11f)]({'errors':[{'location':_0x1c0dcf(0x139),'msg':_0x1c0dcf(0x106),'param':_0x1c0dcf(0x122)}]});});});})[_0x500833(0x112)](_0x359d7d=>{const _0x4d4a2b=a41_0x297d,_0x585c8a=_0x500833;return _0x476862[_0x4d4a2b(0x26e)]({'errors':[{'location':_0x585c8a(0x139),'msg':_0x585c8a(0xc9),'param':'connection'}]});});});})[_0x3ffa41(0x112)](_0x4c26f1=>{const _0x43b904=_0x16da33,_0x529097=_0x3ffa41;return _0x476862[_0x529097(0x11f)]({'errors':[{'location':_0x43b904(0x22c),'msg':_0x529097(0xe2),'param':_0x529097(0x122)}]});});}else return _0x476862[_0x3ffa41(0x11f)]({'errors':[{'location':_0x3ffa41(0xec),'msg':_0x16da33(0x22a),'param':_0x3ffa41(0x122)}]});}else return _0x476862[_0x16da33(0x26e)]({'errors':[{'location':_0x16da33(0x22c),'msg':_0x3ffa41(0xdc),'param':_0x16da33(0x205)}]});}))[_0x19ca63(0x112)](_0x353e1d=>{const _0x2e38c2=_0x19ca63;return _0x476862[_0x2e38c2(0x11f)]({'errors':[{'location':_0x2e38c2(0x139),'msg':_0x2e38c2(0x148),'param':_0x2e38c2(0x10f)}]});});};exports[a9_0x55a1f0(0x139)]=restartServer;const getConnectionsData=(_0x2ca50d,_0x4be772)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2787bd=a9_0x55a1f0,_0xf858c3=_0x2ca50d[_0x2787bd(0x11e)][_0x2787bd(0x12e)](_0x2787bd(0x146));return yield exports[_0x2787bd(0xf8)](_0xf858c3),_0x4be772[_0x2787bd(0x11f)](serversData);});exports[a41_0xe4eae5(0x1dd)]=getConnectionsData;const getConnections=_0x456086=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4529e5=a41_0xe4eae5,_0x38e305=a9_0x55a1f0;let _0x25285a=yield LicenseController['checkLicense']();_0x456086['in'](_0x38e305(0xee))[_0x4529e5(0x26d)](_0x38e305(0xd5),{'license':_0x25285a});if(_0x25285a[_0x38e305(0xe4)]){let _0x41582f=yield Server_1[_0x38e305(0x140)]['find']()[_0x38e305(0x10b)](_0x38e305(0x171))[_0x38e305(0x138)](_0x33fb00=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x33fb00;}));if(_0x41582f[_0x38e305(0x16e)]>0x0){const _0xa810b3=new Cache_1[(_0x4529e5(0x1d1))]();return _0x41582f[_0x4529e5(0x1fa)]((_0x12f745,_0x33ead5)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x19921a=_0x4529e5,_0x299c0d=_0x38e305,_0x1963f8=_0xa810b3[_0x299c0d(0x107)](),_0x56e4a9=_0x299c0d(0x158);let _0x23d155=_0x56e4a9==_0x299c0d(0x153)||_0x56e4a9==_0x299c0d(0x110)?_0x56e4a9:_0x299c0d(0x158),_0x2913f1=_0x12f745[_0x299c0d(0xe4)]!==undefined&&_0x12f745[_0x299c0d(0xe4)]==_0x299c0d(0x110)&&_0x23d155==_0x299c0d(0x158);if(_0x12f745[_0x19921a(0x203)]==undefined||_0x12f745[_0x19921a(0x203)]!==_0x23d155){yield Server_1[_0x299c0d(0x140)][_0x299c0d(0x16b)][_0x299c0d(0x144)]({'_id':_0x12f745[_0x299c0d(0x14a)]},{'$set':{'status':_0x23d155}});let _0x2a7547=_0x23d155==_0x299c0d(0x153)?'Se\x20ha\x20perdido\x20la\x20conexión\x20al\x20proxy\x20<b>'+_0x12f745['host']+_0x19921a(0x207):_0x23d155==_0x299c0d(0x110)?_0x299c0d(0x160)+_0x12f745[_0x19921a(0x205)]+_0x299c0d(0xfe):_0x2913f1?_0x299c0d(0xe8)+_0x12f745['host']+_0x299c0d(0x16d):_0x299c0d(0x149)+_0x12f745[_0x299c0d(0x10e)]+_0x299c0d(0xfe);handleNotify[_0x299c0d(0xc8)]({'subject':_0x299c0d(0xcb)+_0x12f745['host'],'msg':_0x2a7547});}let _0x2f6e2a={'usersConnected':[0x0,0x0],'usersConnections':[0x0,0x0],'usersSize':[0x0,0x0],'usersSpeed':[0x0,0x0]},_0xb0ed96=serversData[_0x299c0d(0x124)](function(_0x4329db){const _0x5db164=_0x19921a,_0x365e41=_0x299c0d;return _0x4329db['server'][_0x365e41(0x10e)]==_0x12f745[_0x5db164(0x205)];});_0xb0ed96[_0x299c0d(0x16e)]>0x0&&(_0x2f6e2a={'usersConnected':_0xb0ed96[0x0][_0x299c0d(0x16f)],'usersConnections':_0xb0ed96[0x0][_0x19921a(0x220)],'usersSize':_0xb0ed96[0x0][_0x299c0d(0x102)],'usersSpeed':_0xb0ed96[0x0][_0x19921a(0x223)]});if(_0x1963f8[0x0]&&_0x1963f8[0x0][_0x299c0d(0x11b)])_0x2f6e2a[_0x299c0d(0x154)][_0x299c0d(0x161)](0x0),_0x2f6e2a[_0x299c0d(0x16f)][_0x19921a(0x24b)](0x0),_0x2f6e2a[_0x299c0d(0x102)][_0x19921a(0x24b)](0x0),_0x2f6e2a[_0x299c0d(0xf2)][_0x299c0d(0x161)](0x0);else{let _0x52a047=[],_0x3f56c2=[],_0x131513=0x0,_0x44ab2a=0x0;_0x1963f8[_0x299c0d(0x172)]((_0x2cb166,_0x462a88)=>{const _0x1821fe=_0x19921a,_0x54b0b3=_0x299c0d;let _0x50d9a5=_0x2cb166[_0x54b0b3(0x123)]=='-'?_0x2cb166[_0x54b0b3(0x14c)]:_0x2cb166[_0x54b0b3(0x123)];_0x52a047[_0x54b0b3(0x170)](_0x50d9a5)==-0x1?(_0x52a047[_0x54b0b3(0x161)](_0x50d9a5),_0x3f56c2[_0x54b0b3(0x161)]({'identifier':_0x50d9a5,'last_connection':new Date(),'is_lock':![],'server':_0x12f745,'countbytediff':0x0,'uris':[_0x2cb166[_0x54b0b3(0x101)]]})):(_0x3f56c2[_0x52a047[_0x54b0b3(0x170)](_0x50d9a5)][_0x54b0b3(0x137)]+=_0x2cb166[_0x54b0b3(0x145)],_0x3f56c2[_0x52a047[_0x54b0b3(0x170)](_0x50d9a5)][_0x54b0b3(0xd4)][_0x1821fe(0x24b)](_0x2cb166[_0x54b0b3(0x101)])),_0x131513+=_0x2cb166[_0x54b0b3(0x167)],_0x44ab2a+=_0x2cb166[_0x54b0b3(0xfc)];}),updateSources(_0x3f56c2,_0x456086),_0x2f6e2a[_0x19921a(0x220)][_0x299c0d(0x161)](_0x1963f8[_0x299c0d(0x16e)]),_0x2f6e2a[_0x299c0d(0x16f)][_0x299c0d(0x161)](_0x52a047[_0x299c0d(0x16e)]),_0x2f6e2a[_0x299c0d(0x102)][_0x299c0d(0x161)](_0x131513),_0x2f6e2a['usersSpeed'][_0x299c0d(0x161)](_0x44ab2a),_0x2f6e2a[_0x19921a(0x220)][_0x299c0d(0x16e)]>0x1e&&(_0x2f6e2a[_0x299c0d(0x154)][_0x299c0d(0x12b)](),_0x2f6e2a[_0x19921a(0x255)][_0x299c0d(0x12b)](),_0x2f6e2a[_0x19921a(0x25a)][_0x299c0d(0x12b)](),_0x2f6e2a['usersSpeed'][_0x299c0d(0x12b)]());}_0xb0ed96[_0x299c0d(0x16e)]>0x0&&(serversData=serversData[_0x299c0d(0x124)](function(_0x2c7235){const _0x4a88a8=_0x19921a,_0x247f45=_0x299c0d;return _0x2c7235[_0x247f45(0xfd)][_0x4a88a8(0x205)]!==_0x12f745[_0x247f45(0x10e)];})),serversData[_0x299c0d(0x161)]({'server':_0x12f745,'connections':_0x1963f8,'usersConnected':_0x2f6e2a[_0x19921a(0x255)],'usersConnections':_0x2f6e2a[_0x299c0d(0x154)],'usersSize':_0x2f6e2a[_0x299c0d(0x102)],'usersSpeed':_0x2f6e2a[_0x299c0d(0xf2)]}),_0x12f745[_0x19921a(0x1f2)]&&_0x456086['in'](_0x19921a(0x239))[_0x299c0d(0xe0)](_0x299c0d(0x12f),{'server':_0x12f745,'connections':_0x1963f8,'usersConnected':_0x2f6e2a[_0x299c0d(0x16f)],'usersConnections':_0x2f6e2a[_0x19921a(0x220)],'usersSize':_0x2f6e2a[_0x19921a(0x25a)],'usersSpeed':_0x2f6e2a[_0x299c0d(0xf2)]});})),serversData;}else return[{'errors':[{'location':_0x38e305(0xf8),'msg':_0x38e305(0xda),'param':_0x38e305(0xea)}]}];}});exports[a9_0x55a1f0(0xf8)]=getConnections;function execCommand(_0x3873fd){return new Promise((_0x4af8a6,_0x344013)=>{exec(_0x3873fd,{'timeout':0x1388},(_0x54733e,_0x1774b7,_0x13e78a)=>{const _0x4d2308=a9_0x8e42;if(_0x54733e){if(_0x54733e[_0x4d2308(0xc4)])_0x4af8a6(_0x4d2308(0x153));else _0x4af8a6(_0x4d2308(0x110));}else{if(_0x13e78a)_0x4af8a6(_0x4d2308(0x110));else _0x4af8a6(_0x1774b7);}});});}function a41_0x4429(){const _0x133b4d=['node-ssh','array','default','port','__importDefault','indexOf','findOne','findserver','next','convertQuotaType','type','body','value','connection','getConnectionsData','__setModuleDefault','Source','deleteServer','Ha\x20ocurrido\x20un\x20error\x20en\x20la\x20conexión\x20ssh\x20\x20del\x20servidor\x20','../handlers/handleNotify','Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20del\x20servidor','cat\x20','__importStar','shutdown','updateLicense','message','host_found','\x22\x20>>\x20','6240840WyhEvG','Se\x20ha\x20recuperado\x20la\x20conexión\x20al\x20proxy\x20<b>','log','__awaiter','setSSHConnection','Se\x20ha\x20detenido\x20el\x20servicio\x20en\x20el\x20proxy\x20<b>','getDemoConnections','active','check','stop','sources','find','errors','then','72lhnWYI','map','isEmpty','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20regostrado','limit','../models/Source','quota','request','findById','socketio','status','1794219OCmFyH','host','96LepYBw','</b>,\x20por\x20favor\x20compruebe\x20la\x20conexión','connection_notifies','run','split','call','180qqjhYg','getServersById','forEach','execCommand','username','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','1804242ohSDDV','create','uris','shift','534990YyNHTy','Lo\x20sentimos\x20no\x20se\x20pudo\x20reiniciar\x20el\x20servidor','sendNotify','execPopulate','uri','sshuser','9732jAANsC','proxyConnections','reject','2010038lFjDSW','usersConnections','deleteSSHConnection','site','usersSpeed','bytes','Quota','\x20por\x20exceder\x20el\x20límite\x20de\x20cuota,\x20este\x20es\x20el\x20motivo\x20del\x20error:\x20','is_lock','express-validator','countbytediff','Lo\x20sentimos\x20este\x20servidor\x20no\x20tiene\x20conexión\x20SSH\x20registrada','getConnections','restartServer','register','149365uqfacJ','node-csv-parse','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20servidor','delete','Lo\x20sentimos\x20no\x20se\x20encuentran\x20servidores\x20registrados','prototype','getSize','329635gaDbIQ','../models/Server','Estado\x20del\x20servidor\x20','Lo\x20sentimos\x20no\x20se\x20pudo\x20establecer\x20conexión\x20SSH\x20con\x20el\x20servidor','receive\x20new\x20connections','Server','systemctl\x20status\x20squid','_id','</b>\x20se\x20ha\x20conectado\x20a\x20sitios\x20que\x20contienen\x20','populate','SourceInterface','server','host_not_is_ip','identifier','update','stdout','servers','../models/ConnectionNotify','statusServer','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20registrado','savedserver','ConnectionNotify','push','routelockpc','echo\x20\x22','sort','814678McsnIa','2868028cELPsw','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20de\x20los\x20servidores','Active:\x20','host_empty','apply','usersConnected','custom','__createBinding','validationResult','auto','usersSize','app','ssh','stderr','hasOwnProperty','../models/Cache','findOneAndDelete','notEmpty','test','filter','exec','done','findByIdAndUpdate','byteDiff','killed','Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20estado\x20del\x20servidor','Nueva\x20cuota\x20excedida','updateOne','63664CCysBs','emit','json','params','catch','child_process','<b>','includes','activate','length','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20servidor','6763434dTyjaq','quota_consumed','sshpass','routelockuser','../models/Quota','</b>','sshport','parseSource'];a41_0x4429=function(){return _0x133b4d;};return a41_0x4429();}function updateSources(_0x272a6f,_0x4b32c5){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4f7273=a41_0x297d,_0x2eb0b9=a9_0x8e42;let _0x50d56a=yield Quota_1[_0x2eb0b9(0x13c)][_0x2eb0b9(0x130)]({'isdefault':!![]})[_0x2eb0b9(0x10b)](_0x2eb0b9(0x171))[_0x4f7273(0x1f8)](_0x8d5043=>__awaiter(this,void 0x0,void 0x0,function*(){return _0x8d5043;}))[_0x2eb0b9(0x112)](_0x23ef19=>{return null;});_0x272a6f[_0x2eb0b9(0x13e)]((_0x5c5c01,_0x14ed08)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x65ffc0=_0x4f7273,_0x517684=_0x2eb0b9;let _0xbf1898=_0x5c5c01[_0x65ffc0(0x240)][_0x517684(0x171)][_0x517684(0x124)](function(_0xe17b54){const _0x11ce65=_0x65ffc0,_0x405b7b=_0x517684;return _0xe17b54[_0x11ce65(0x242)]==_0x5c5c01[_0x405b7b(0x15b)];})[0x0];if(_0xbf1898){yield _0xbf1898[_0x517684(0x10b)](_0x517684(0xfd))[_0x517684(0x10b)](_0x517684(0x114))[_0x517684(0x10b)](_0x65ffc0(0x208))[_0x65ffc0(0x219)](),_0xbf1898[_0x517684(0x15e)]&&_0xbf1898[_0x517684(0x15e)][_0x517684(0x13e)]((_0x46d938,_0x18117c)=>{const _0x5a0d81=_0x65ffc0,_0x695c5=_0x517684;if(_0x46d938[_0x695c5(0xc1)]==undefined){let _0x4112fa='';_0x5c5c01[_0x5a0d81(0x214)][_0x695c5(0x13e)](_0x4cc85b=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x1fe895=_0x5a0d81,_0x4e0c20=_0x695c5;_0x4cc85b[_0x1fe895(0x273)](_0x46d938[_0x1fe895(0x222)])&&(_0x4112fa+='\x0a'+_0x4cc85b,yield ConnectionNotify_1[_0x4e0c20(0x164)][_0x4e0c20(0x16b)][_0x4e0c20(0x144)]({'_id':_0x46d938[_0x1fe895(0x23c)]},{'$set':{'notified':new Date()}}));})),_0x4112fa[_0x695c5(0x16e)]>0x0&&handleNotify[_0x5a0d81(0x218)]({'subject':_0x695c5(0xca),'msg':_0x695c5(0xc0)+Useful_1[_0x5a0d81(0x1d1)][_0x695c5(0x11c)](_0xbf1898[_0x5a0d81(0x242)])+_0x695c5(0x118)+_0x46d938[_0x695c5(0x143)]+_0x695c5(0x142)+_0x4112fa});}});let _0x3ff4ce=_0xbf1898[_0x517684(0x114)]?_0xbf1898[_0x517684(0x114)]:_0x50d56a,_0x3e3a5e=_0xbf1898[_0x517684(0x150)]?_0xbf1898[_0x517684(0x150)]+_0x5c5c01[_0x517684(0x137)]:_0x5c5c01[_0x517684(0x137)],_0xd77c55={'last_connection':_0x5c5c01[_0x517684(0x16c)],'quota_consumed':_0x3e3a5e};!_0xbf1898[_0x517684(0x120)]&&_0x3ff4ce!=null&&(_0x3e3a5e>=_0x3ff4ce[_0x517684(0xc5)]&&(_0xd77c55={'last_connection':_0x5c5c01[_0x517684(0x16c)],'quota_consumed':_0x3e3a5e,'is_lock':!![],'lock_date':new Date(),'lock_from':_0x517684(0x10c)})),yield Source_1[_0x517684(0x132)][_0x65ffc0(0x266)](_0xbf1898[_0x517684(0x14a)],_0xd77c55,{'new':!![]})['then'](_0x2b9f6e=>{const _0x1ae6be=_0x65ffc0,_0x580617=_0x517684;if(_0xd77c55[_0x580617(0x120)]&&_0xbf1898[_0x580617(0xfd)][_0x580617(0x136)]){let _0x553077='';if(Useful_1[_0x580617(0xd3)][_0x580617(0xf3)](_0x5c5c01))_0x553077=_0xbf1898[_0x1ae6be(0x240)][_0x580617(0xcf)]?_0xbf1898[_0x580617(0xfd)]['routelockpc']:null;else _0x553077=_0xbf1898[_0x580617(0xfd)][_0x580617(0x15d)]?_0xbf1898[_0x1ae6be(0x240)][_0x580617(0x15d)]:null;if(_0x553077!=null){const _0xc4b939=new NodeSSH();_0xc4b939[_0x580617(0xe3)]({'host':_0xbf1898[_0x580617(0xfd)][_0x580617(0x10e)],'port':_0xbf1898[_0x580617(0xfd)][_0x580617(0xc6)],'username':_0xbf1898[_0x580617(0xfd)][_0x1ae6be(0x21b)],'password':_0xbf1898[_0x1ae6be(0x240)][_0x580617(0x109)]})[_0x580617(0x138)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5bf76d=a9_0x8e42;yield _0xc4b939[_0x5bf76d(0x133)](_0x5bf76d(0xe9)+_0x553077)[_0x5bf76d(0x138)](function(_0x13833b){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x271dd0=a41_0x297d,_0x21d466=a9_0x8e42;if(_0x13833b[_0x21d466(0x151)]==''){let _0x3ae966=_0x13833b[_0x21d466(0x131)]['split']('\x0a'),_0x191ba7=_0x3ae966[_0x21d466(0x124)](function(_0x47f1ff){const _0x5db410=_0x21d466;return _0x47f1ff!=''&&_0x47f1ff==_0xbf1898[_0x5db410(0x15b)];});_0x191ba7[_0x21d466(0x16e)]==0x0&&(yield _0xc4b939[_0x21d466(0x133)](_0x271dd0(0x24d)+_0xbf1898[_0x21d466(0x15b)]+_0x21d466(0xde)+_0x553077)[_0x21d466(0x138)](function(_0x318d84){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x48e0c2=a41_0x297d,_0x30bf5d=a9_0x8e42;_0x318d84['stderr']==''&&(yield _0xc4b939[_0x30bf5d(0x133)](_0x30bf5d(0x16a))[_0x48e0c2(0x1f8)](function(_0x16304d){return __awaiter(this,void 0x0,void 0x0,function*(){const _0xfddb94=a41_0x297d,_0x32307c=a9_0x8e42;handleNotify[_0x32307c(0xc8)]({'subject':_0x32307c(0x14b),'msg':_0x32307c(0xc0)+Useful_1[_0x32307c(0xd3)][_0xfddb94(0x1ce)](_0xbf1898[_0xfddb94(0x242)])+_0x32307c(0xc7)+Useful_1[_0x32307c(0xd3)][_0x32307c(0x103)](_0x3ff4ce[_0x32307c(0xc5)])+'\x20'+Useful_1[_0x32307c(0xd3)][_0x32307c(0x169)](_0x3ff4ce[_0x32307c(0xf5)])+_0x32307c(0xfe)}),_0x4b32c5[_0x32307c(0xe0)](_0x32307c(0x121));return;});}));});}));}});});});})[_0x580617(0x112)](_0x359b6d=>{const _0x2e666b=_0x1ae6be,_0x2c85a0=_0x580617;handleNotify[_0x2c85a0(0xc8)]({'subject':_0x2c85a0(0x111)+_0xbf1898['server'][_0x2c85a0(0x10e)],'msg':_0x2c85a0(0x155)+_0xbf1898[_0x2c85a0(0xfd)][_0x2c85a0(0x10e)]+_0x2c85a0(0x13f)+_0xbf1898[_0x2c85a0(0x15b)]+_0x2c85a0(0x125)+_0x359b6d[_0x2e666b(0x1e8)]});});}}})[_0x65ffc0(0x270)](_0x5cde2e=>{return;});}else{let _0x15f1e3=new Source_1[(_0x517684(0x152))]({'identifier':_0x5c5c01[_0x517684(0x15b)],'last_connection':_0x5c5c01[_0x517684(0x16c)],'is_lock':![]});_0x15f1e3[_0x517684(0xfd)]=_0x5c5c01[_0x517684(0xfd)][_0x517684(0x14a)];const _0x5b313e=new Source_1[(_0x517684(0x132))](_0x15f1e3);_0x5b313e[_0x517684(0x166)]((_0x7341f0,_0x411c77)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x2d7ba1=_0x517684;_0x5c5c01[_0x2d7ba1(0xfd)][_0x2d7ba1(0x171)][_0x2d7ba1(0x161)](_0x411c77),yield Server_1[_0x2d7ba1(0x140)][_0x2d7ba1(0xd2)](_0x5c5c01[_0x2d7ba1(0xfd)][_0x2d7ba1(0x14a)],_0x5c5c01[_0x2d7ba1(0xfd)],{'new':!![]});}));}}));});}