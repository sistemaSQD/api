'use strict';const a11_0xb1e9c9=a11_0x171c;(function(_0x10f874,_0x381ea3){const _0x35fb6a=a11_0x171c,_0x321a6a=_0x10f874();while(!![]){try{const _0xa551e4=parseInt(_0x35fb6a(0x19d))/0x1*(-parseInt(_0x35fb6a(0x1ab))/0x2)+-parseInt(_0x35fb6a(0x16c))/0x3*(parseInt(_0x35fb6a(0x160))/0x4)+parseInt(_0x35fb6a(0x19a))/0x5*(-parseInt(_0x35fb6a(0x17a))/0x6)+-parseInt(_0x35fb6a(0x171))/0x7*(-parseInt(_0x35fb6a(0x1c9))/0x8)+-parseInt(_0x35fb6a(0x1e0))/0x9*(parseInt(_0x35fb6a(0x1e5))/0xa)+-parseInt(_0x35fb6a(0x181))/0xb*(parseInt(_0x35fb6a(0x150))/0xc)+parseInt(_0x35fb6a(0x1f2))/0xd;if(_0xa551e4===_0x381ea3)break;else _0x321a6a['push'](_0x321a6a['shift']());}catch(_0x488b8a){_0x321a6a['push'](_0x321a6a['shift']());}}}(a11_0x3e85,0x368c4));const a10_0x5ba6d4=a10_0x2bbd;(function(_0x5f500d,_0x5593e3){const _0x1e9a51=a11_0x171c,_0x42e352=a10_0x2bbd,_0x153d39=_0x5f500d();while(!![]){try{const _0x26588d=-parseInt(_0x42e352(0x18d))/0x1*(parseInt(_0x42e352(0x1ad))/0x2)+parseInt(_0x42e352(0x141))/0x3+parseInt(_0x42e352(0x133))/0x4+-parseInt(_0x42e352(0x1bf))/0x5+-parseInt(_0x42e352(0x135))/0x6+-parseInt(_0x42e352(0x177))/0x7*(parseInt(_0x42e352(0x132))/0x8)+parseInt(_0x42e352(0x189))/0x9;if(_0x26588d===_0x5593e3)break;else _0x153d39[_0x1e9a51(0x190)](_0x153d39[_0x1e9a51(0x177)]());}catch(_0x687d3){_0x153d39[_0x1e9a51(0x190)](_0x153d39[_0x1e9a51(0x177)]());}}}(a10_0x54a0,0x876b4));var __createBinding=this&&this[a10_0x5ba6d4(0x192)]||(Object[a11_0xb1e9c9(0x1c5)]?function(_0x52072c,_0x277a92,_0x538b4f,_0x49061b){const _0x20d38f=a10_0x5ba6d4;if(_0x49061b===undefined)_0x49061b=_0x538b4f;Object[_0x20d38f(0x197)](_0x52072c,_0x49061b,{'enumerable':!![],'get':function(){return _0x277a92[_0x538b4f];}});}:function(_0x39a0b0,_0xd7581e,_0x11a9ec,_0x53510e){if(_0x53510e===undefined)_0x53510e=_0x11a9ec;_0x39a0b0[_0x53510e]=_0xd7581e[_0x11a9ec];}),__setModuleDefault=this&&this[a10_0x5ba6d4(0x157)]||(Object[a10_0x5ba6d4(0x166)]?function(_0x373062,_0x1413ba){const _0x527f81=a11_0xb1e9c9,_0x48299f=a10_0x5ba6d4;Object[_0x48299f(0x197)](_0x373062,_0x527f81(0x1af),{'enumerable':!![],'value':_0x1413ba});}:function(_0x3a0af2,_0x34bed3){const _0x4aec30=a10_0x5ba6d4;_0x3a0af2[_0x4aec30(0x18c)]=_0x34bed3;}),__importStar=this&&this[a10_0x5ba6d4(0x19a)]||function(_0x30baa5){const _0x17fa26=a10_0x5ba6d4;if(_0x30baa5&&_0x30baa5[_0x17fa26(0x176)])return _0x30baa5;var _0x41c3e1={};if(_0x30baa5!=null){for(var _0x1ac246 in _0x30baa5)if(_0x1ac246!==_0x17fa26(0x18c)&&Object[_0x17fa26(0x15f)][_0x17fa26(0x18a)][_0x17fa26(0x181)](_0x30baa5,_0x1ac246))__createBinding(_0x41c3e1,_0x30baa5,_0x1ac246);}return __setModuleDefault(_0x41c3e1,_0x30baa5),_0x41c3e1;},__awaiter=this&&this[a10_0x5ba6d4(0x156)]||function(_0x309903,_0x4acfbe,_0x452d19,_0xcca682){function _0x32526b(_0x39f6dc){return _0x39f6dc instanceof _0x452d19?_0x39f6dc:new _0x452d19(function(_0x56cd54){_0x56cd54(_0x39f6dc);});}return new(_0x452d19||(_0x452d19=Promise))(function(_0xd82598,_0x145019){const _0x2aa2a4=a10_0x2bbd;function _0x2de395(_0x4d120b){const _0x3640e8=a10_0x2bbd;try{_0x448421(_0xcca682[_0x3640e8(0x128)](_0x4d120b));}catch(_0x18fc40){_0x145019(_0x18fc40);}}function _0x494cc9(_0x56b55b){const _0x389e08=a11_0x171c;try{_0x448421(_0xcca682[_0x389e08(0x1a4)](_0x56b55b));}catch(_0x5a0cd2){_0x145019(_0x5a0cd2);}}function _0x448421(_0x5a0d83){const _0x3e50f6=a11_0x171c,_0x202a96=a10_0x2bbd;_0x5a0d83[_0x202a96(0x183)]?_0xd82598(_0x5a0d83[_0x202a96(0x130)]):_0x32526b(_0x5a0d83[_0x3e50f6(0x1f5)])[_0x3e50f6(0x154)](_0x2de395,_0x494cc9);}_0x448421((_0xcca682=_0xcca682[_0x2aa2a4(0x139)](_0x309903,_0x4acfbe||[]))[_0x2aa2a4(0x128)]());});},__importDefault=this&&this[a10_0x5ba6d4(0x1aa)]||function(_0x298046){const _0x428a28=a10_0x5ba6d4;return _0x298046&&_0x298046[_0x428a28(0x176)]?_0x298046:{'default':_0x298046};};Object[a10_0x5ba6d4(0x197)](exports,a10_0x5ba6d4(0x176),{'value':!![]}),exports[a10_0x5ba6d4(0x123)]=exports[a10_0x5ba6d4(0x186)]=exports[a10_0x5ba6d4(0x125)]=exports[a10_0x5ba6d4(0x172)]=exports[a10_0x5ba6d4(0x11d)]=exports[a10_0x5ba6d4(0x19b)]=exports[a10_0x5ba6d4(0x12f)]=exports['deleteSSHConnection']=exports[a10_0x5ba6d4(0x134)]=exports[a11_0xb1e9c9(0x151)]=exports[a10_0x5ba6d4(0x162)]=exports[a10_0x5ba6d4(0x1c7)]=void 0x0;const express_validator_1=require(a10_0x5ba6d4(0x163)),Server_1=require(a10_0x5ba6d4(0x1b1)),Source_1=require(a11_0xb1e9c9(0x16a)),Quota_1=require(a10_0x5ba6d4(0x1b7)),ConnectionNotify_1=require(a11_0xb1e9c9(0x18d)),LicenseController=__importStar(require('../controllers/license.controller')),handleNotify=__importStar(require(a10_0x5ba6d4(0x1c6))),Useful_1=__importDefault(require(a10_0x5ba6d4(0x151))),Cache_1=__importDefault(require(a11_0xb1e9c9(0x19e))),{NodeSSH}=require(a10_0x5ba6d4(0x1af)),parser=require(a10_0x5ba6d4(0x1bb)),exec=require(a10_0x5ba6d4(0x161))[a10_0x5ba6d4(0x1c0)];function a10_0x54a0(){const _0xc8c6bb=a11_0xb1e9c9,_0x236745=['usersSize',_0xc8c6bb(0x163),_0xc8c6bb(0x1b0),_0xc8c6bb(0x1a7),_0xc8c6bb(0x1ba),'Error\x20en\x20la\x20conexión\x20ssh\x20del\x20servidor\x20',_0xc8c6bb(0x1df),_0xc8c6bb(0x14d),_0xc8c6bb(0x15a),'Lo\x20sentimos\x20este\x20servidor\x20no\x20tiene\x20conexión\x20SSH\x20registrada',_0xc8c6bb(0x195),_0xc8c6bb(0x15e),_0xc8c6bb(0x1c8),'connect',_0xc8c6bb(0x162),_0xc8c6bb(0x18c),_0xc8c6bb(0x1bf),'request',_0xc8c6bb(0x1e7),'\x20mgr:active_requests@',_0xc8c6bb(0x18b),_0xc8c6bb(0x1b7),'sources',_0xc8c6bb(0x159),'includes','Server','7633107WjZELz',_0xc8c6bb(0x1cc),_0xc8c6bb(0x142),_0xc8c6bb(0x1af),_0xc8c6bb(0x19b),_0xc8c6bb(0x1d8),_0xc8c6bb(0x154),_0xc8c6bb(0x1bd),'stderr',_0xc8c6bb(0x174),'map','errors',_0xc8c6bb(0x1d7),_0xc8c6bb(0x1d1),_0xc8c6bb(0x18f),_0xc8c6bb(0x19c),_0xc8c6bb(0x156),_0xc8c6bb(0x1d6),'activate','catch',_0xc8c6bb(0x172),_0xc8c6bb(0x1a2),_0xc8c6bb(0x17c),_0xc8c6bb(0x1b9),_0xc8c6bb(0x148),'bytes',_0xc8c6bb(0x1f4),_0xc8c6bb(0x1ad),_0xc8c6bb(0x16f),'Lo\x20sentimos\x20no\x20se\x20encuentran\x20servidores\x20registrados',_0xc8c6bb(0x1e9),'uris',_0xc8c6bb(0x18e),'__importDefault',_0xc8c6bb(0x146),_0xc8c6bb(0x16b),'10KByQOx','site',_0xc8c6bb(0x1ee),_0xc8c6bb(0x1f9),'../models/Server',_0xc8c6bb(0x1a9),'is_lock','systemctl\x20restart\x20squid','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor',_0xc8c6bb(0x175),'../models/Quota',_0xc8c6bb(0x17f),'usersSpeed',_0xc8c6bb(0x183),_0xc8c6bb(0x182),_0xc8c6bb(0x1cd),_0xc8c6bb(0x1b6),_0xc8c6bb(0x169),_0xc8c6bb(0x1c1),_0xc8c6bb(0x187),'collection',_0xc8c6bb(0x155),'ssh','routelockpc',_0xc8c6bb(0x1a0),_0xc8c6bb(0x1ec),_0xc8c6bb(0x178),_0xc8c6bb(0x17d),_0xc8c6bb(0x1e2),'push',_0xc8c6bb(0x1c7),_0xc8c6bb(0x167),_0xc8c6bb(0x18a),_0xc8c6bb(0x1b8),_0xc8c6bb(0x1c0),_0xc8c6bb(0x1dd),_0xc8c6bb(0x1b5),_0xc8c6bb(0x192),_0xc8c6bb(0x165),'Source',_0xc8c6bb(0x1a5),_0xc8c6bb(0x188),_0xc8c6bb(0x186),_0xc8c6bb(0x1f1),'byteDiff',_0xc8c6bb(0x1fa),_0xc8c6bb(0x177),_0xc8c6bb(0x1c2),'stop',_0xc8c6bb(0x1f7),_0xc8c6bb(0x1dc),_0xc8c6bb(0x170),'update','value',_0xc8c6bb(0x1b4),_0xc8c6bb(0x1c6),_0xc8c6bb(0x1b1),_0xc8c6bb(0x1e3),_0xc8c6bb(0x1ae),_0xc8c6bb(0x194),_0xc8c6bb(0x14b),_0xc8c6bb(0x1f3),_0xc8c6bb(0x145),_0xc8c6bb(0x1e6),_0xc8c6bb(0x17e),_0xc8c6bb(0x15f),'isIPAddress',_0xc8c6bb(0x1bc),_0xc8c6bb(0x149),_0xc8c6bb(0x180),_0xc8c6bb(0x1d5),_0xc8c6bb(0x1c3),_0xc8c6bb(0x1cb),_0xc8c6bb(0x196),_0xc8c6bb(0x168),_0xc8c6bb(0x1be),'json','server','Active:\x20',_0xc8c6bb(0x1b2),_0xc8c6bb(0x166),'proxyConnections','stdout',_0xc8c6bb(0x16d),_0xc8c6bb(0x143),'Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20servidor',_0xc8c6bb(0x161),_0xc8c6bb(0x198),_0xc8c6bb(0x1a8),_0xc8c6bb(0x1aa),_0xc8c6bb(0x1ea),_0xc8c6bb(0x1de),'__setModuleDefault',_0xc8c6bb(0x1da),_0xc8c6bb(0x1ed),'filter',_0xc8c6bb(0x151),_0xc8c6bb(0x199),'connection',_0xc8c6bb(0x1d4),_0xc8c6bb(0x164),_0xc8c6bb(0x144),_0xc8c6bb(0x1e8),_0xc8c6bb(0x1d9),_0xc8c6bb(0x1cf),_0xc8c6bb(0x17b),_0xc8c6bb(0x1d2),_0xc8c6bb(0x1c5),_0xc8c6bb(0x1c4),_0xc8c6bb(0x1f8),_0xc8c6bb(0x1b3),_0xc8c6bb(0x158),'run',_0xc8c6bb(0x1fb),_0xc8c6bb(0x1a1),'reject'];return a10_0x54a0=function(){return _0x236745;},a10_0x54a0();}let serversData=[];const getServers=(_0x4b7436,_0x3253a4)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x48373e=a11_0xb1e9c9,_0x4c84c3=a10_0x5ba6d4;let _0x27c95d=yield Server_1[_0x4c84c3(0x188)][_0x48373e(0x147)]()[_0x4c84c3(0x18f)](_0x413aae=>{return _0x413aae;})[_0x4c84c3(0x19c)](_0x7f5b3c=>{const _0x2aed85=_0x4c84c3;return{'errors':[{'location':_0x2aed85(0x1c7),'msg':_0x2aed85(0x17e),'param':_0x2aed85(0x16a)}]};});return _0x27c95d[_0x48373e(0x1eb)]((_0x2a9faf,_0x488a54)=>_0x488a54[_0x48373e(0x1ed)]-_0x2a9faf[_0x4c84c3(0x159)]),_0x3253a4[_0x48373e(0x191)](_0x27c95d);});exports[a10_0x5ba6d4(0x1c7)]=getServers;const getServersById=(_0x4cb793,_0x1ad685)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x744e0c=a11_0xb1e9c9,_0x586b51=a10_0x5ba6d4;let _0x14b3df=yield Server_1[_0x586b51(0x188)][_0x744e0c(0x1aa)](_0x4cb793[_0x744e0c(0x175)]['id'])['populate'](_0x586b51(0x198))[_0x586b51(0x18f)](_0x21d93d=>{return _0x21d93d;})[_0x586b51(0x19c)](_0xa5a28=>{const _0x3ff2b1=_0x744e0c,_0x5d9602=_0x586b51;return{'errors':[{'location':_0x3ff2b1(0x178),'msg':_0x5d9602(0x1b5),'param':_0x5d9602(0x16a)}]};});return _0x1ad685[_0x586b51(0x147)](_0x14b3df);});exports[a10_0x5ba6d4(0x162)]=getServersById;const register=(_0x39ba0e,_0x58156b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3bb6b0=a11_0xb1e9c9,_0x3bc9e9=a10_0x5ba6d4;yield express_validator_1[_0x3bc9e9(0x137)]('host')[_0x3bc9e9(0x171)]()[_0x3bb6b0(0x1f6)](_0x3bb6b0(0x193))[_0x3bc9e9(0x16b)](_0x39ba0e);const _0x2a7f34=_0x5e6c7c=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x385289=_0x3bb6b0,_0x438c67=_0x3bc9e9;if(!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x438c67(0x173)](_0x39ba0e[_0x438c67(0x1b6)][_0x385289(0x156)]))return Promise[_0x438c67(0x16e)](_0x385289(0x1db));}),_0x3fa7fa=_0x30fc32=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x38f8b2=_0x3bb6b0,_0x9396d8=_0x3bc9e9;return yield Server_1[_0x9396d8(0x188)][_0x9396d8(0x11a)]({'host':_0x39ba0e[_0x9396d8(0x1b6)]['host']})[_0x38f8b2(0x154)](_0x682c04=>{const _0x13ca5a=_0x38f8b2,_0x4c870a=_0x9396d8;if(_0x682c04)return Promise[_0x13ca5a(0x14f)](_0x4c870a(0x195));});});yield express_validator_1[_0x3bc9e9(0x137)]('host')[_0x3bc9e9(0x17a)](_0x2a7f34)[_0x3bc9e9(0x16b)](_0x39ba0e),yield express_validator_1[_0x3bc9e9(0x137)]('host')[_0x3bc9e9(0x17a)](_0x3fa7fa)[_0x3bc9e9(0x16b)](_0x39ba0e);const _0x4846d2=express_validator_1[_0x3bc9e9(0x1b2)](_0x39ba0e);if(!_0x4846d2[_0x3bc9e9(0x1b0)]())return _0x58156b[_0x3bb6b0(0x191)]({'errors':_0x4846d2['array']()});let _0x388bb2=yield Server_1[_0x3bc9e9(0x188)][_0x3bc9e9(0x11a)]({'active':!![]})[_0x3bc9e9(0x18f)](_0x157d8f=>{if(_0x157d8f)return![];else return!![];}),_0x9b8ba5=new Server_1[(_0x3bc9e9(0x19e))]({'host':_0x39ba0e[_0x3bc9e9(0x1b6)][_0x3bc9e9(0x199)],'port':_0x39ba0e[_0x3bc9e9(0x1b6)][_0x3bb6b0(0x152)],'cachepass':_0x39ba0e['body'][_0x3bb6b0(0x143)],'active':_0x388bb2});return yield Server_1[_0x3bc9e9(0x188)][_0x3bb6b0(0x1c5)](_0x9b8ba5,(_0x31b204,_0x25a67a)=>{const _0x4384a7=_0x3bb6b0,_0x49c3ce=_0x3bc9e9;if(_0x31b204)return _0x58156b[_0x4384a7(0x191)]({'errors':[{'location':_0x49c3ce(0x15b),'msg':_0x49c3ce(0x150),'param':_0x49c3ce(0x13b)}]});else return _0x58156b[_0x49c3ce(0x147)](_0x25a67a);});});exports['register']=register;const setSSHConnection=(_0x19cc85,_0x570b2d)=>{const _0x5a8ce1=a11_0xb1e9c9,_0x371d9c=a10_0x5ba6d4;Server_1[_0x5a8ce1(0x184)][_0x371d9c(0x154)](_0x19cc85[_0x5a8ce1(0x195)]['id'])[_0x371d9c(0x18f)](_0x5389fb=>{const _0x3d7abf=_0x5a8ce1,_0x33cdba=_0x371d9c;if(_0x5389fb){const _0x5f507d=new NodeSSH();_0x5f507d[_0x33cdba(0x17c)]({'host':_0x5389fb[_0x3d7abf(0x156)],'port':_0x19cc85[_0x3d7abf(0x175)][_0x33cdba(0x16c)],'username':_0x19cc85['body'][_0x33cdba(0x164)],'password':_0x19cc85[_0x33cdba(0x1b6)][_0x3d7abf(0x1bf)]})[_0x33cdba(0x18f)](function(){const _0xda09f3=_0x3d7abf,_0x26e025=_0x33cdba;Server_1['Server'][_0xda09f3(0x1b9)](_0x19cc85[_0x26e025(0x179)]['id'],_0x19cc85[_0x26e025(0x1b6)],{'new':!![]})[_0x26e025(0x18f)](_0x299ceb=>{const _0x28cf35=_0x26e025;return _0x570b2d[_0x28cf35(0x147)](_0x299ceb);})[_0x26e025(0x19c)](_0x3e28dd=>{const _0x1245ec=_0x26e025;return _0x570b2d[_0x1245ec(0x147)]({'errors':[{'location':_0x1245ec(0x12f),'msg':_0x1245ec(0x12c),'param':_0x1245ec(0x15d)}]});});})[_0x33cdba(0x19c)](_0x35301b=>{const _0x8de6a2=_0x33cdba;return _0x570b2d[_0x8de6a2(0x147)]({'errors':[{'location':_0x8de6a2(0x1c3),'msg':_0x8de6a2(0x17d),'param':_0x8de6a2(0x15d)}]});});}else return _0x570b2d[_0x3d7abf(0x191)]({'errors':[{'location':_0x33cdba(0x134),'msg':_0x3d7abf(0x1c3),'param':_0x33cdba(0x199)}]});})[_0x5a8ce1(0x189)](_0x54edfa=>{const _0x100b74=_0x5a8ce1,_0x1bdd7b=_0x371d9c;return _0x570b2d[_0x1bdd7b(0x147)]({'errors':[{'location':'setSSHConnection','msg':_0x100b74(0x19f),'param':_0x1bdd7b(0x124)}]});});};exports[a10_0x5ba6d4(0x134)]=setSSHConnection;function a11_0x171c(_0x37e5ed,_0x441298){const _0x3e85c2=a11_0x3e85();return a11_0x171c=function(_0x171cf6,_0x5ec9c2){_0x171cf6=_0x171cf6-0x142;let _0x1c930d=_0x3e85c2[_0x171cf6];return _0x1c930d;},a11_0x171c(_0x37e5ed,_0x441298);}const deleteSSHConnection=(_0x486e64,_0x389f34)=>{const _0x1daf27=a11_0xb1e9c9,_0x15a0f2=a10_0x5ba6d4;Server_1[_0x1daf27(0x184)][_0x15a0f2(0x154)](_0x486e64[_0x15a0f2(0x179)]['id'])[_0x15a0f2(0x18f)](_0x28a20f=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2e6c23=_0x1daf27,_0x35d56e=_0x15a0f2;return _0x28a20f?_0x28a20f[_0x35d56e(0x164)]?(yield Server_1[_0x35d56e(0x188)][_0x35d56e(0x1c1)][_0x35d56e(0x140)]({'_id':_0x28a20f[_0x35d56e(0x155)]},{'$unset':{'sshuser':0x1,'sshport':0x1,'sshpass':0x1}}),_0x389f34[_0x2e6c23(0x191)](_0x28a20f)):_0x389f34[_0x35d56e(0x147)]({'errors':[{'location':_0x35d56e(0x134),'msg':_0x35d56e(0x178),'param':_0x35d56e(0x199)}]}):_0x389f34[_0x2e6c23(0x191)]({'errors':[{'location':_0x2e6c23(0x1e3),'msg':_0x2e6c23(0x1c3),'param':_0x2e6c23(0x156)}]});}))[_0x15a0f2(0x19c)](_0x5084d4=>{const _0x43cd0d=_0x15a0f2;return _0x389f34[_0x43cd0d(0x147)]({'errors':[{'location':_0x43cd0d(0x134),'msg':_0x43cd0d(0x1b5),'param':_0x43cd0d(0x124)}]});});};exports[a10_0x5ba6d4(0x14b)]=deleteSSHConnection;const update=(_0x293a37,_0x4e63ed)=>{const _0x4519ba=a11_0xb1e9c9,_0x31429c=a10_0x5ba6d4;Server_1[_0x4519ba(0x184)][_0x31429c(0x154)](_0x293a37[_0x31429c(0x179)]['id'])[_0x31429c(0x18f)](_0x483640=>{const _0x9eadab=_0x4519ba,_0x5c92d4=_0x31429c;if(_0x483640)Server_1[_0x9eadab(0x184)][_0x5c92d4(0x1a0)](_0x293a37[_0x9eadab(0x195)]['id'],_0x293a37[_0x5c92d4(0x1b6)],{'new':!![]})[_0x9eadab(0x154)](_0x8d03dd=>{const _0x5add03=_0x5c92d4;return _0x4e63ed[_0x5add03(0x147)](_0x8d03dd);})[_0x9eadab(0x189)](_0x4f0d0b=>{const _0x40fd94=_0x5c92d4;return _0x4e63ed[_0x40fd94(0x147)]({'errors':[{'location':'update','msg':_0x40fd94(0x15c),'param':_0x40fd94(0x15d)}]});});else return _0x4e63ed[_0x5c92d4(0x147)]({'errors':[{'location':_0x5c92d4(0x12f),'msg':_0x5c92d4(0x142),'param':_0x5c92d4(0x199)}]});})[_0x31429c(0x19c)](_0x36a5b6=>{const _0x27b4ae=_0x4519ba,_0xda8626=_0x31429c;return _0x4e63ed[_0x27b4ae(0x191)]({'errors':[{'location':_0xda8626(0x12f),'msg':_0xda8626(0x1b5),'param':_0xda8626(0x124)}]});});};exports[a10_0x5ba6d4(0x12f)]=update;const activate=(_0x182d6e,_0x5a4f8d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4ecc93=a11_0xb1e9c9,_0x397c43=a10_0x5ba6d4;yield Server_1[_0x4ecc93(0x184)][_0x4ecc93(0x1aa)](_0x182d6e[_0x397c43(0x179)]['id'])[_0x4ecc93(0x154)](_0x307987=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x24ef12=_0x4ecc93,_0x1683b9=_0x397c43;if(_0x307987)yield Server_1['Server'][_0x24ef12(0x167)]({'active':!![]})[_0x1683b9(0x18f)](_0x504818=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x377506=_0x1683b9;_0x504818&&_0x504818[_0x377506(0x155)]!=_0x307987[_0x377506(0x155)]&&(yield Server_1[_0x377506(0x188)]['findByIdAndUpdate'](_0x504818['id'],{'active':![]},{'new':!![]}));})),yield Server_1[_0x24ef12(0x184)][_0x24ef12(0x1b9)](_0x182d6e[_0x1683b9(0x179)]['id'],{'active':!![]},{'new':!![]})[_0x1683b9(0x18f)](_0x5df03a=>{const _0x1878fb=_0x1683b9;return _0x5a4f8d[_0x1878fb(0x147)](_0x5df03a);});else return _0x5a4f8d[_0x1683b9(0x147)]({'errors':[{'location':_0x1683b9(0x19b),'msg':_0x1683b9(0x138),'param':_0x1683b9(0x199)}]});}))[_0x4ecc93(0x189)](_0x5d3a70=>{const _0xf1ce80=_0x4ecc93,_0x467684=_0x397c43;return _0x5a4f8d[_0xf1ce80(0x191)]({'errors':[{'location':_0xf1ce80(0x185),'msg':_0x467684(0x1b5),'param':_0xf1ce80(0x188)}]});});});exports[a10_0x5ba6d4(0x19b)]=activate;const deleteServer=(_0x2e1d49,_0x335b99)=>{const _0x5c32f5=a10_0x5ba6d4;Server_1[_0x5c32f5(0x188)][_0x5c32f5(0x154)](_0x2e1d49[_0x5c32f5(0x179)]['id'])[_0x5c32f5(0x14a)]('sources')[_0x5c32f5(0x18f)](_0x2cfd27=>{const _0x17db2b=a11_0x171c,_0x312ddf=_0x5c32f5;if(_0x2cfd27)_0x2cfd27[_0x17db2b(0x1d0)]&&_0x2cfd27[_0x312ddf(0x185)][_0x312ddf(0x193)]((_0x43ff2e,_0x2dd227)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xc6ddf4=_0x17db2b,_0x3ade3e=_0x312ddf;yield _0x43ff2e[_0x3ade3e(0x14a)](_0x3ade3e(0x13f))[_0x3ade3e(0x14a)](_0x3ade3e(0x1cb))[_0x3ade3e(0x126)](),_0x43ff2e[_0x3ade3e(0x1cb)][_0x3ade3e(0x146)]>0x0&&(console[_0x3ade3e(0x121)](_0x43ff2e[_0x3ade3e(0x1cb)][_0x3ade3e(0x146)]),_0x43ff2e[_0x3ade3e(0x1cb)][_0x3ade3e(0x193)]((_0x3b209a,_0x11771a)=>{const _0x1ea3d3=_0x3ade3e;ConnectionNotify_1[_0x1ea3d3(0x19d)][_0x1ea3d3(0x1c1)][_0x1ea3d3(0x1ac)]({'_id':_0x3b209a[_0x1ea3d3(0x155)]});}));if(_0x43ff2e[_0x3ade3e(0x13f)]){let _0x1d199a=yield _0x43ff2e[_0x3ade3e(0x13f)][_0x3ade3e(0x14a)](_0x3ade3e(0x185))[_0x3ade3e(0x126)]();_0x1d199a[_0x3ade3e(0x185)][_0x3ade3e(0x193)]((_0x402e64,_0xfd0e9e)=>{const _0x23a078=a11_0x171c,_0x4d3a15=_0x3ade3e;if(_0x402e64[_0x4d3a15(0x131)]==_0x43ff2e[_0x4d3a15(0x131)]){let _0x401580=_0x1d199a[_0x4d3a15(0x185)][_0x23a078(0x15b)](_0xfd0e9e,0x0);Quota_1[_0x4d3a15(0x170)][_0x4d3a15(0x1c1)][_0x4d3a15(0x140)]({'_id':_0x43ff2e[_0x23a078(0x149)][_0x4d3a15(0x155)]},{'$set':{'sources':_0x401580}});}return _0x402e64;});}return Source_1[_0x3ade3e(0x122)][_0xc6ddf4(0x16e)][_0x3ade3e(0x1ac)]({'_id':_0x43ff2e[_0x3ade3e(0x155)]}),_0x43ff2e;})),Server_1[_0x312ddf(0x188)][_0x312ddf(0x120)](_0x2e1d49[_0x312ddf(0x179)]['id'])[_0x312ddf(0x18f)](()=>{const _0x2bdfda=_0x312ddf;return _0x335b99[_0x2bdfda(0x147)](_0x2cfd27);})[_0x312ddf(0x19c)](_0x103b3e=>{const _0x3acdce=_0x17db2b,_0x549ed7=_0x312ddf;return _0x335b99['json']({'errors':[{'location':_0x549ed7(0x12f),'msg':_0x3acdce(0x1a3),'param':_0x3acdce(0x197)}]});});else return _0x335b99[_0x312ddf(0x147)]({'errors':[{'location':_0x312ddf(0x1ba),'msg':_0x17db2b(0x1c3),'param':'host'}]});})[_0x5c32f5(0x19c)](_0x2d255e=>{const _0x3f7cc8=a11_0x171c,_0x3e090d=_0x5c32f5;return _0x335b99[_0x3f7cc8(0x191)]({'errors':[{'location':_0x3e090d(0x1ba),'msg':_0x3e090d(0x1b5),'param':_0x3e090d(0x124)}]});});};exports[a10_0x5ba6d4(0x11d)]=deleteServer;const statusServer=(_0x1a0c8e,_0x357dbe)=>{const _0x547331=a10_0x5ba6d4;Server_1[_0x547331(0x188)][_0x547331(0x154)](_0x1a0c8e['params']['id'])[_0x547331(0x18f)](_0x2b6d51=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x34d992=a11_0x171c,_0x536117=_0x547331;if(_0x2b6d51){if(_0x2b6d51[_0x536117(0x164)]){const _0x19da68=new NodeSSH();yield _0x19da68[_0x34d992(0x15c)]({'host':_0x2b6d51[_0x536117(0x199)],'port':_0x2b6d51[_0x536117(0x16c)],'username':_0x2b6d51[_0x536117(0x164)],'password':_0x2b6d51[_0x536117(0x17f)]})[_0x34d992(0x154)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5e95cb=a11_0x171c,_0x26a067=a10_0x2bbd;yield _0x19da68[_0x26a067(0x1a4)](_0x5e95cb(0x17f))[_0x26a067(0x18f)](function(_0x280f1e){const _0x3752f0=_0x5e95cb,_0x42dcd1=_0x26a067;if(_0x280f1e[_0x42dcd1(0x191)]!='')return _0x357dbe['json']({'errors':[{'location':'statusServer','msg':_0x42dcd1(0x19f),'param':_0x3752f0(0x197)}]});else{let _0x4529f3=_0x280f1e['stdout'][_0x42dcd1(0x168)](_0x42dcd1(0x149))[0x1][_0x42dcd1(0x168)]('\x20')[0x0];return _0x357dbe[_0x42dcd1(0x147)]({'status':_0x4529f3,'detail':_0x280f1e[_0x42dcd1(0x14d)]});}})[_0x26a067(0x19c)](_0x19c9a5=>{const _0x5812c9=_0x26a067;return _0x357dbe[_0x5812c9(0x147)]({'errors':[{'location':_0x5812c9(0x172),'msg':_0x5812c9(0x19f),'param':_0x5812c9(0x15d)}]});});});})[_0x536117(0x19c)](_0x55d65a=>{const _0x3cc57c=_0x34d992,_0x71540=_0x536117;return _0x357dbe[_0x3cc57c(0x191)]({'errors':[{'location':_0x71540(0x172),'msg':_0x71540(0x17d),'param':_0x71540(0x15d)}]});});}else return _0x357dbe[_0x536117(0x147)]({'errors':[{'location':_0x536117(0x172),'msg':_0x536117(0x178),'param':_0x536117(0x15d)}]});}else return _0x357dbe[_0x536117(0x147)]({'errors':[{'location':_0x536117(0x172),'msg':_0x536117(0x142),'param':_0x34d992(0x156)}]});}))[_0x547331(0x19c)](_0x1ca0fb=>{const _0x3cc0a0=a11_0x171c,_0x2d2ce3=_0x547331;return _0x357dbe[_0x2d2ce3(0x147)]({'errors':[{'location':_0x2d2ce3(0x172),'msg':_0x2d2ce3(0x1b5),'param':_0x3cc0a0(0x188)}]});});};function a10_0x2bbd(_0x93782,_0x39cd1e){const _0x35d58d=a10_0x54a0();return a10_0x2bbd=function(_0x5193ca,_0x1f34a5){_0x5193ca=_0x5193ca-0x11a;let _0x18b939=_0x35d58d[_0x5193ca];return _0x18b939;},a10_0x2bbd(_0x93782,_0x39cd1e);}exports['statusServer']=statusServer;const restartServer=(_0x2d8d3f,_0x36a8eb)=>{const _0x2f896b=a10_0x5ba6d4;Server_1[_0x2f896b(0x188)][_0x2f896b(0x154)](_0x2d8d3f[_0x2f896b(0x179)]['id'])[_0x2f896b(0x18f)](_0x38e7ca=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x39a416=a11_0x171c,_0x468b25=_0x2f896b;if(_0x38e7ca){if(_0x38e7ca[_0x468b25(0x164)]){const _0x320249=new NodeSSH();yield _0x320249[_0x39a416(0x15c)]({'host':_0x38e7ca[_0x39a416(0x156)],'port':_0x38e7ca[_0x468b25(0x16c)],'username':_0x38e7ca[_0x468b25(0x164)],'password':_0x38e7ca[_0x468b25(0x17f)]})['then'](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2e8737=a11_0x171c,_0x606d7c=a10_0x2bbd;yield _0x320249[_0x606d7c(0x1a4)](_0x606d7c(0x1b4))[_0x2e8737(0x154)](function(_0x2e84b2){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x20188f=a10_0x2bbd;if(_0x2e84b2[_0x20188f(0x191)]!='')return _0x36a8eb[_0x20188f(0x147)]({'errors':[{'location':_0x20188f(0x125),'msg':_0x20188f(0x175),'param':_0x20188f(0x15d)}]});else yield _0x320249[_0x20188f(0x1a4)](_0x20188f(0x1b8))[_0x20188f(0x18f)](function(_0x344fe5){const _0x2943b5=a11_0x171c,_0x15d62a=_0x20188f;if(_0x344fe5[_0x15d62a(0x191)]!='')return _0x36a8eb[_0x2943b5(0x191)]({'errors':[{'location':_0x15d62a(0x125),'msg':_0x2943b5(0x17c),'param':_0x15d62a(0x15d)}]});else{let _0x4c78b0=_0x344fe5[_0x15d62a(0x14d)][_0x15d62a(0x168)](_0x15d62a(0x149))[0x1][_0x2943b5(0x1f8)]('\x20')[0x0];return _0x36a8eb['json']({'status':_0x4c78b0,'detail':_0x344fe5[_0x15d62a(0x14d)]});}})[_0x20188f(0x19c)](_0x449918=>{const _0x5f9a5c=a11_0x171c,_0x4268d3=_0x20188f;return _0x36a8eb[_0x5f9a5c(0x191)]({'errors':[{'location':_0x4268d3(0x125),'msg':_0x4268d3(0x19f),'param':_0x4268d3(0x15d)}]});});});})[_0x606d7c(0x19c)](_0x5a9b7c=>{const _0x59bff8=_0x606d7c;return _0x36a8eb[_0x59bff8(0x147)]({'errors':[{'location':_0x59bff8(0x125),'msg':_0x59bff8(0x175),'param':_0x59bff8(0x15d)}]});});});})[_0x468b25(0x19c)](_0x1107b3=>{const _0x341a5c=_0x39a416,_0x178381=_0x468b25;return _0x36a8eb[_0x341a5c(0x191)]({'errors':[{'location':_0x341a5c(0x186),'msg':_0x178381(0x17d),'param':_0x178381(0x15d)}]});});}else return _0x36a8eb[_0x468b25(0x147)]({'errors':[{'location':_0x468b25(0x172),'msg':_0x468b25(0x178),'param':_0x468b25(0x15d)}]});}else return _0x36a8eb[_0x468b25(0x147)]({'errors':[{'location':_0x468b25(0x125),'msg':_0x468b25(0x142),'param':_0x39a416(0x156)}]});}))[_0x2f896b(0x19c)](_0x51a6f0=>{const _0x21b25f=a11_0x171c,_0x39edc7=_0x2f896b;return _0x36a8eb[_0x39edc7(0x147)]({'errors':[{'location':_0x39edc7(0x125),'msg':_0x21b25f(0x19f),'param':_0x39edc7(0x124)}]});});};exports[a10_0x5ba6d4(0x125)]=restartServer;const getConnectionsData=(_0x229daa,_0x20c6f4)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5003c0=a10_0x5ba6d4,_0x296de2=_0x229daa[_0x5003c0(0x1ab)][_0x5003c0(0x16d)](_0x5003c0(0x1c2));return yield exports['getConnections'](_0x296de2),_0x20c6f4[_0x5003c0(0x147)](serversData);});exports[a10_0x5ba6d4(0x186)]=getConnectionsData;const getConnections=_0x1170d7=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x114ae5=a11_0xb1e9c9,_0x37c44b=a10_0x5ba6d4;let _0x50838d=yield LicenseController[_0x37c44b(0x1a7)]();_0x1170d7['in'](_0x37c44b(0x144))[_0x37c44b(0x160)](_0x114ae5(0x1d3),{'license':_0x50838d});if(_0x50838d[_0x37c44b(0x184)]){let _0x12ee53=yield Server_1[_0x37c44b(0x188)][_0x114ae5(0x147)]()[_0x37c44b(0x14a)](_0x114ae5(0x1d0))[_0x114ae5(0x154)](_0x216d7b=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x216d7b;}));if(_0x12ee53[_0x114ae5(0x1be)]>0x0){const _0x542828=new Cache_1['default']();return _0x12ee53[_0x37c44b(0x193)]((_0x1e75f8,_0x3c5831)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x376a8c=_0x114ae5,_0x3973e4=_0x37c44b,_0x36c338=yield execCommand(_0x3973e4(0x158)+_0x1e75f8['host']+_0x376a8c(0x1a0)+_0x1e75f8['port']+_0x3973e4(0x182)+_0x1e75f8[_0x3973e4(0x14f)]),_0x117156=yield execCommand(_0x376a8c(0x1da)+_0x1e75f8[_0x376a8c(0x156)]+_0x3973e4(0x1c5)+_0x1e75f8['port']+_0x3973e4(0x152)+_0x1e75f8[_0x3973e4(0x14f)]),_0x4f1c5c=_0x542828[_0x3973e4(0x1c9)](_0x36c338,_0x117156);let _0x56b19c=_0x36c338==_0x3973e4(0x11f)||_0x36c338==_0x3973e4(0x12b)?_0x36c338:_0x376a8c(0x1ed),_0x378683=_0x1e75f8[_0x3973e4(0x184)]!==undefined&&_0x1e75f8[_0x3973e4(0x184)]==_0x376a8c(0x1f0)&&_0x56b19c==_0x3973e4(0x159);if(_0x1e75f8[_0x3973e4(0x184)]==undefined||_0x1e75f8[_0x3973e4(0x184)]!==_0x56b19c){yield Server_1[_0x3973e4(0x188)][_0x376a8c(0x16e)][_0x3973e4(0x140)]({'_id':_0x1e75f8[_0x3973e4(0x155)]},{'$set':{'status':_0x56b19c}});let _0x1ec883=_0x56b19c==_0x3973e4(0x11f)?'Se\x20ha\x20perdido\x20la\x20conexión\x20al\x20proxy\x20<b>'+_0x1e75f8[_0x3973e4(0x199)]+_0x3973e4(0x12a):_0x56b19c==_0x376a8c(0x1f0)?_0x3973e4(0x11c)+_0x1e75f8[_0x3973e4(0x199)]+'</b>':_0x378683?_0x3973e4(0x1a5)+_0x1e75f8['host']+_0x3973e4(0x145):_0x376a8c(0x1ac)+_0x1e75f8[_0x3973e4(0x199)]+_0x3973e4(0x1be);handleNotify[_0x3973e4(0x190)]({'subject':_0x376a8c(0x1a6)+_0x1e75f8[_0x3973e4(0x199)],'msg':_0x1ec883});}let _0x576656={'usersConnected':[0x0,0x0],'usersConnections':[0x0,0x0],'usersSize':[0x0,0x0],'usersSpeed':[0x0,0x0]},_0x23e13f=serversData[_0x3973e4(0x15a)](function(_0x18e9d5){const _0x588ca3=_0x376a8c,_0x2be911=_0x3973e4;return _0x18e9d5[_0x588ca3(0x14a)][_0x2be911(0x199)]==_0x1e75f8[_0x2be911(0x199)];});_0x23e13f['length']>0x0&&(_0x576656={'usersConnected':_0x23e13f[0x0][_0x3973e4(0x1bc)],'usersConnections':_0x23e13f[0x0][_0x3973e4(0x17b)],'usersSize':_0x23e13f[0x0][_0x376a8c(0x179)],'usersSpeed':_0x23e13f[0x0][_0x3973e4(0x1b9)]});if(_0x4f1c5c[0x0]&&_0x4f1c5c[0x0][_0x3973e4(0x194)])_0x576656[_0x376a8c(0x1c8)][_0x376a8c(0x190)](0x0),_0x576656[_0x3973e4(0x1bc)][_0x3973e4(0x1ca)](0x0),_0x576656[_0x3973e4(0x16f)][_0x376a8c(0x190)](0x0),_0x576656[_0x3973e4(0x1b9)][_0x3973e4(0x1ca)](0x0);else{let _0x221d07=[],_0x33dd97=[],_0x544078=0x0,_0x32f7a3=0x0;_0x4f1c5c[_0x3973e4(0x167)]((_0x53643f,_0x4f562b)=>{const _0x470d5b=_0x376a8c,_0x37fb9a=_0x3973e4;let _0x1df01e=_0x53643f[_0x470d5b(0x1e4)]=='-'?_0x53643f[_0x470d5b(0x1bb)]:_0x53643f[_0x470d5b(0x1e4)];_0x221d07[_0x37fb9a(0x12e)](_0x1df01e)==-0x1?(_0x221d07[_0x470d5b(0x190)](_0x1df01e),_0x33dd97['push']({'identifier':_0x1df01e,'last_connection':new Date(),'is_lock':![],'server':_0x1e75f8,'countbytediff':0x0,'uris':[_0x53643f[_0x37fb9a(0x153)]]})):(_0x33dd97[_0x221d07[_0x37fb9a(0x12e)](_0x1df01e)][_0x37fb9a(0x1c8)]+=_0x53643f[_0x37fb9a(0x127)],_0x33dd97[_0x221d07[_0x470d5b(0x170)](_0x1df01e)][_0x37fb9a(0x1a8)][_0x37fb9a(0x1ca)](_0x53643f[_0x37fb9a(0x153)])),_0x544078+=_0x53643f[_0x37fb9a(0x1a2)],_0x32f7a3+=_0x53643f['speed_value'];}),updateSources(_0x33dd97,_0x1170d7),_0x576656[_0x3973e4(0x17b)][_0x3973e4(0x1ca)](_0x4f1c5c[_0x376a8c(0x1be)]),_0x576656[_0x3973e4(0x1bc)][_0x376a8c(0x190)](_0x221d07[_0x3973e4(0x146)]),_0x576656[_0x3973e4(0x16f)][_0x376a8c(0x190)](_0x544078),_0x576656[_0x3973e4(0x1b9)][_0x376a8c(0x190)](_0x32f7a3),_0x576656[_0x376a8c(0x1c8)][_0x3973e4(0x146)]>0x1e&&(_0x576656[_0x3973e4(0x17b)][_0x3973e4(0x129)](),_0x576656[_0x3973e4(0x1bc)][_0x3973e4(0x129)](),_0x576656[_0x3973e4(0x16f)][_0x3973e4(0x129)](),_0x576656[_0x3973e4(0x1b9)][_0x3973e4(0x129)]());}_0x23e13f[_0x3973e4(0x146)]>0x0&&(serversData=serversData[_0x3973e4(0x15a)](function(_0x5e7f55){const _0x5900ea=_0x3973e4;return _0x5e7f55[_0x5900ea(0x148)][_0x5900ea(0x199)]!==_0x1e75f8[_0x5900ea(0x199)];})),serversData[_0x376a8c(0x190)]({'server':_0x1e75f8,'connections':_0x4f1c5c,'usersConnected':_0x576656[_0x3973e4(0x1bc)],'usersConnections':_0x576656[_0x3973e4(0x17b)],'usersSize':_0x576656[_0x3973e4(0x16f)],'usersSpeed':_0x576656[_0x3973e4(0x1b9)]}),_0x1e75f8[_0x3973e4(0x159)]&&_0x1170d7['in'](_0x3973e4(0x144))[_0x376a8c(0x144)](_0x3973e4(0x14c),{'server':_0x1e75f8,'connections':_0x4f1c5c,'usersConnected':_0x576656[_0x376a8c(0x1cd)],'usersConnections':_0x576656[_0x3973e4(0x17b)],'usersSize':_0x576656[_0x376a8c(0x179)],'usersSpeed':_0x576656[_0x3973e4(0x1b9)]});})),serversData;}else return[{'errors':[{'location':_0x37c44b(0x123),'msg':_0x37c44b(0x1a6),'param':_0x37c44b(0x180)}]}];}});exports[a10_0x5ba6d4(0x123)]=getConnections;function execCommand(_0x3adeeb){return new Promise((_0x5a3c99,_0x364aa9)=>{exec(_0x3adeeb,{'timeout':0x1388},(_0x5db805,_0x15f8c6,_0x18c0fb)=>{const _0xd84973=a10_0x2bbd;if(_0x5db805){if(_0x5db805[_0xd84973(0x169)])_0x5a3c99(_0xd84973(0x11f));else _0x5a3c99(_0xd84973(0x12b));}else{if(_0x18c0fb)_0x5a3c99(_0xd84973(0x12b));else _0x5a3c99(_0x15f8c6);}});});}function updateSources(_0x333315,_0x430767){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x448728=a11_0x171c,_0x33c0f7=a10_0x2bbd;let _0x11df3b=yield Quota_1[_0x448728(0x163)]['findOne']({'isdefault':!![]})[_0x33c0f7(0x14a)](_0x33c0f7(0x185))[_0x448728(0x154)](_0x130120=>__awaiter(this,void 0x0,void 0x0,function*(){return _0x130120;}))[_0x448728(0x189)](_0x5d079a=>{return null;});_0x333315[_0x33c0f7(0x193)]((_0xa3de28,_0x440027)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x4d6e4f=_0x448728,_0x1e63f8=_0x33c0f7;let _0x1605b5=_0xa3de28[_0x1e63f8(0x148)][_0x4d6e4f(0x1d0)][_0x1e63f8(0x15a)](function(_0xb0ad3b){const _0x19feda=_0x1e63f8;return _0xb0ad3b[_0x19feda(0x131)]==_0xa3de28[_0x19feda(0x131)];})[0x0];if(_0x1605b5){yield _0x1605b5[_0x1e63f8(0x14a)]('server')[_0x1e63f8(0x14a)](_0x1e63f8(0x13f))[_0x1e63f8(0x14a)]('connection_notifies')[_0x4d6e4f(0x1f1)](),_0x1605b5[_0x1e63f8(0x1cb)]&&_0x1605b5[_0x1e63f8(0x1cb)][_0x1e63f8(0x193)]((_0x1a3f6c,_0x9be53c)=>{const _0xe2c9ce=_0x4d6e4f,_0x3d7df5=_0x1e63f8;if(_0x1a3f6c[_0x3d7df5(0x11e)]==undefined){let _0x13a6f5='';_0xa3de28[_0xe2c9ce(0x173)][_0x3d7df5(0x193)](_0xfeffd5=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x2c4b5c=_0xe2c9ce,_0x299f92=_0x3d7df5;_0xfeffd5[_0x299f92(0x187)](_0x1a3f6c[_0x299f92(0x1ae)])&&(_0x13a6f5+='\x0a'+_0xfeffd5,yield ConnectionNotify_1[_0x299f92(0x19d)][_0x299f92(0x1c1)][_0x299f92(0x140)]({'_id':_0x1a3f6c[_0x2c4b5c(0x1ea)]},{'$set':{'notified':new Date()}}));})),_0x13a6f5[_0xe2c9ce(0x1be)]>0x0&&handleNotify[_0xe2c9ce(0x1bd)]({'subject':_0x3d7df5(0x12d),'msg':_0x3d7df5(0x14e)+Useful_1[_0x3d7df5(0x18c)][_0xe2c9ce(0x18e)](_0x1605b5[_0x3d7df5(0x131)])+_0x3d7df5(0x165)+_0x1a3f6c[_0xe2c9ce(0x1ca)]+_0xe2c9ce(0x15d)+_0x13a6f5});}});let _0x5620d4=_0x1605b5[_0x1e63f8(0x13f)]?_0x1605b5[_0x4d6e4f(0x149)]:_0x11df3b,_0x43e5f8=_0x1605b5[_0x4d6e4f(0x14c)]?_0x1605b5[_0x4d6e4f(0x14c)]+_0xa3de28[_0x1e63f8(0x1c8)]:_0xa3de28[_0x1e63f8(0x1c8)],_0x4dcc6b={'last_connection':_0xa3de28[_0x1e63f8(0x196)],'quota_consumed':_0x43e5f8};!_0x1605b5[_0x1e63f8(0x1b3)]&&_0x5620d4!=null&&(_0x43e5f8>=_0x5620d4[_0x1e63f8(0x18b)]&&(_0x4dcc6b={'last_connection':_0xa3de28['last_connection'],'quota_consumed':_0x43e5f8,'is_lock':!![],'lock_date':new Date(),'lock_from':_0x1e63f8(0x143)})),yield Source_1[_0x1e63f8(0x122)][_0x1e63f8(0x1a0)](_0x1605b5[_0x1e63f8(0x155)],_0x4dcc6b,{'new':!![]})[_0x1e63f8(0x18f)](_0x157987=>{const _0x5ac17a=_0x4d6e4f,_0x501aeb=_0x1e63f8;if(_0x4dcc6b[_0x501aeb(0x1b3)]&&_0x1605b5['server'][_0x501aeb(0x164)]){let _0x302be5='';if(Useful_1[_0x501aeb(0x18c)][_0x501aeb(0x13d)](_0xa3de28))_0x302be5=_0x1605b5[_0x501aeb(0x148)][_0x501aeb(0x1c4)]?_0x1605b5[_0x501aeb(0x148)][_0x5ac17a(0x153)]:null;else _0x302be5=_0x1605b5[_0x501aeb(0x148)]['routelockuser']?_0x1605b5[_0x501aeb(0x148)][_0x501aeb(0x11b)]:null;if(_0x302be5!=null){const _0x31a963=new NodeSSH();_0x31a963[_0x5ac17a(0x15c)]({'host':_0x1605b5[_0x501aeb(0x148)][_0x5ac17a(0x156)],'port':_0x1605b5[_0x501aeb(0x148)][_0x501aeb(0x16c)],'username':_0x1605b5[_0x501aeb(0x148)][_0x5ac17a(0x17b)],'password':_0x1605b5[_0x501aeb(0x148)][_0x501aeb(0x17f)]})[_0x5ac17a(0x154)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x14d212=a11_0x171c,_0x5be814=a10_0x2bbd;yield _0x31a963[_0x5be814(0x1a4)](_0x5be814(0x13a)+_0x302be5)[_0x14d212(0x154)](function(_0x316858){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x398871=a11_0x171c,_0x3d80d3=a10_0x2bbd;if(_0x316858[_0x3d80d3(0x191)]==''){let _0x2d7384=_0x316858[_0x398871(0x1ef)]['split']('\x0a'),_0x3a7147=_0x2d7384[_0x3d80d3(0x15a)](function(_0x5dcb8d){const _0x3aa30b=_0x3d80d3;return _0x5dcb8d!=''&&_0x5dcb8d==_0x1605b5[_0x3aa30b(0x131)];});_0x3a7147[_0x3d80d3(0x146)]==0x0&&(yield _0x31a963[_0x3d80d3(0x1a4)](_0x3d80d3(0x1a3)+_0x1605b5[_0x3d80d3(0x131)]+_0x3d80d3(0x15e)+_0x302be5)[_0x3d80d3(0x18f)](function(_0x5aa61e){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x59bb9c=a11_0x171c,_0x39728d=a10_0x2bbd;_0x5aa61e[_0x59bb9c(0x176)]==''&&(yield _0x31a963[_0x39728d(0x1a4)](_0x59bb9c(0x157))[_0x39728d(0x18f)](function(_0x2d4d28){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x37b42e=a11_0x171c,_0x2b96b1=a10_0x2bbd;handleNotify[_0x2b96b1(0x190)]({'subject':'Nueva\x20cuota\x20excedida','msg':_0x2b96b1(0x14e)+Useful_1[_0x2b96b1(0x18c)][_0x2b96b1(0x1a9)](_0x1605b5[_0x2b96b1(0x131)])+_0x2b96b1(0x13e)+Useful_1[_0x37b42e(0x1af)][_0x2b96b1(0x13c)](_0x5620d4[_0x2b96b1(0x18b)])+'\x20'+Useful_1[_0x37b42e(0x1af)][_0x2b96b1(0x1a1)](_0x5620d4['type'])+_0x2b96b1(0x1be)}),_0x430767[_0x2b96b1(0x160)](_0x2b96b1(0x136));return;});}));});}));}});});});})[_0x501aeb(0x19c)](_0x40394b=>{const _0x24793b=_0x5ac17a,_0xe9147b=_0x501aeb;handleNotify[_0xe9147b(0x190)]({'subject':_0xe9147b(0x174)+_0x1605b5['server'][_0xe9147b(0x199)],'msg':_0x24793b(0x14e)+_0x1605b5[_0xe9147b(0x148)][_0xe9147b(0x199)]+_0x24793b(0x1e1)+_0x1605b5[_0xe9147b(0x131)]+_0xe9147b(0x1bd)+_0x40394b['message']});});}}})[_0x1e63f8(0x19c)](_0x61119e=>{return;});}else{let _0x47cf0c=new Source_1[(_0x4d6e4f(0x1ce))]({'identifier':_0xa3de28[_0x4d6e4f(0x1b4)],'last_connection':_0xa3de28[_0x1e63f8(0x196)],'is_lock':![]});_0x47cf0c[_0x1e63f8(0x148)]=_0xa3de28[_0x1e63f8(0x148)][_0x1e63f8(0x155)];const _0x5ad53e=new Source_1[(_0x1e63f8(0x122))](_0x47cf0c);_0x5ad53e[_0x1e63f8(0x18e)]((_0x4f5a49,_0x21e0c9)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x15e916=_0x4d6e4f,_0x22181b=_0x1e63f8;_0xa3de28[_0x22181b(0x148)][_0x22181b(0x185)][_0x22181b(0x1ca)](_0x21e0c9),yield Server_1[_0x22181b(0x188)][_0x22181b(0x1a0)](_0xa3de28[_0x15e916(0x14a)]['_id'],_0xa3de28[_0x22181b(0x148)],{'new':!![]});}));}}));});}function a11_0x3e85(){const _0x109415=['last_connection','</b>\x20se\x20ha\x20conectado\x20a\x20sitios\x20que\x20contienen\x20','updateLicense','\x22\x20>>\x20','3060759bbhdaU','__importStar','host_found','save','getServersById','squidclient\x20-h\x20','host_not_is_ip','Conexión\x20a\x20sitio','notified','__awaiter','Lo\x20sentimos\x20no\x20se\x20pudo\x20reiniciar\x20el\x20servidor','1467vQMEIZ','\x20al\x20intentar\x20bloquear\x20a\x20','extractConnections','setSSHConnection','username','7540DRegxa','cat\x20','call','child_process','checkLicense','_id','sort','../handlers/handleNotify','active','node-ssh','stdout','stop','execPopulate','8512283IFnbMm','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20regostrado','echo\x20\x22','value','withMessage','Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20SSH\x20del\x20servidor','split','isEmpty','next','sshport','limit','cachepass','emit','apply','app','find','convertQuotaType','quota','server','check','quota_consumed','__esModule','Ha\x20ocurrido\x20un\x20error\x20en\x20la\x20conexión\x20ssh\x20\x20del\x20servidor\x20','reject','204yUGNha','register','port','routelockpc','then','socketio','host','systemctl\x20reload\x20squid','servers','getConnectionsData','483119oXYoHm','splice','connect','\x20detalles\x20de\x20los\x20sitios:\x20','custom','getSize','4gQNJNM','../models/Useful','Lo\x20sentimos\x20no\x20se\x20pudo\x20establecer\x20conexión\x20SSH\x20con\x20el\x20servidor','Quota','prototype','log','deleteSSHConnection','findOne','</b>\x20ha\x20comenzado\x20a\x20ejecutarse\x20correctamente','</b>','../models/Source','findOneAndDelete','31725ZrtCrP','<b>','collection','El\x20servicio\x20en\x20el\x20proxy\x20<b>','indexOf','21fonVFs','ConnectionNotify','uris','__createBinding','body','stderr','shift','getServers','usersSize','133278tdLKwL','sshuser','Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20estado\x20del\x20servidor','countbytediff','savedserver','systemctl\x20status\x20squid','updateOne','137962FVPjNn','node-csv-parse','delete','Server','activate','restartServer','exec','findserver','catch','routelockuser','done','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20de\x20los\x20servidores','../models/ConnectionNotify','parseSource','defineProperty','push','json','findByIdAndDelete','host_empty','refreshSourcesLock','params','receive\x20new\x20connections','connection','\x20mgr:delay@','Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20del\x20servidor','25sZrgWX','189565johmxp','serverldap','1bROJnW','../models/Cache','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','\x20-p\x20','get','ServerInterface','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20servidor','throw','getConnections','Estado\x20del\x20servidor\x20','statusServer','uri','validationResult','findById','788378MqPPMr','Se\x20ha\x20recuperado\x20la\x20conexión\x20al\x20proxy\x20<b>','execCommand','642048BnDEnt','default','notEmpty','3706788mvKnjT','populate','killed','identifier','shutdown','\x20por\x20exceder\x20el\x20límite\x20de\x20cuota,\x20este\x20es\x20el\x20motivo\x20del\x20error:\x20','status','Se\x20ha\x20detenido\x20el\x20servicio\x20en\x20el\x20proxy\x20<b>','findByIdAndUpdate','test','remote','</b>\x20ha\x20sido\x20automaticamente\x20bloqueado\x20por\x20exceder\x20el\x20límite\x20de\x20cuota\x20de\x20<b>','sendNotify','length','sshpass','deleteServer','4892565ATHoXI','</b>,\x20por\x20favor\x20compruebe\x20la\x20conexión','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20registrado','forEach','create','24inqlLA','connection_notifies','usersConnections','1121552LckgrP','site','auto','hasOwnProperty','usersConnected','SourceInterface','express-validator','sources'];a11_0x3e85=function(){return _0x109415;};return a11_0x3e85();}