'use strict';const a80_0x21c900=a80_0x5149;(function(_0x2dcfd6,_0x344b87){const _0x330dd8=a80_0x5149,_0x5cdcea=_0x2dcfd6();while(!![]){try{const _0x12409a=-parseInt(_0x330dd8(0xaa))/0x1+parseInt(_0x330dd8(0x82))/0x2+parseInt(_0x330dd8(0x86))/0x3+parseInt(_0x330dd8(0xa7))/0x4+-parseInt(_0x330dd8(0x94))/0x5+-parseInt(_0x330dd8(0xa1))/0x6*(-parseInt(_0x330dd8(0x9a))/0x7)+-parseInt(_0x330dd8(0x91))/0x8*(parseInt(_0x330dd8(0x8a))/0x9);if(_0x12409a===_0x344b87)break;else _0x5cdcea['push'](_0x5cdcea['shift']());}catch(_0x1ea23f){_0x5cdcea['push'](_0x5cdcea['shift']());}}}(a80_0x28a2,0x331ea));function a80_0x5149(_0x487e0b,_0x433ec9){const _0x28a2d4=a80_0x28a2();return a80_0x5149=function(_0x5149ff,_0x36688f){_0x5149ff=_0x5149ff-0x82;let _0x553af=_0x28a2d4[_0x5149ff];return _0x553af;},a80_0x5149(_0x487e0b,_0x433ec9);}var __awaiter=this&&this[a80_0x21c900(0xac)]||function(_0x93246f,_0x1350b1,_0x25af8a,_0x489f4a){function _0xfb9c69(_0x46fbf9){return _0x46fbf9 instanceof _0x25af8a?_0x46fbf9:new _0x25af8a(function(_0x579edb){_0x579edb(_0x46fbf9);});}return new(_0x25af8a||(_0x25af8a=Promise))(function(_0x149ec0,_0x593c74){const _0x4225b8=a80_0x5149;function _0x154a9c(_0xecee52){const _0x3646e2=a80_0x5149;try{_0x506365(_0x489f4a[_0x3646e2(0x87)](_0xecee52));}catch(_0x45a20e){_0x593c74(_0x45a20e);}}function _0x26affa(_0x2b515e){try{_0x506365(_0x489f4a['throw'](_0x2b515e));}catch(_0x5d51c1){_0x593c74(_0x5d51c1);}}function _0x506365(_0x44def9){const _0x583431=a80_0x5149;_0x44def9[_0x583431(0x93)]?_0x149ec0(_0x44def9[_0x583431(0x99)]):_0xfb9c69(_0x44def9[_0x583431(0x99)])[_0x583431(0x89)](_0x154a9c,_0x26affa);}_0x506365((_0x489f4a=_0x489f4a[_0x4225b8(0xae)](_0x93246f,_0x1350b1||[]))['next']());});},__importDefault=this&&this[a80_0x21c900(0x8e)]||function(_0x401891){const _0x22a97e=a80_0x21c900;return _0x401891&&_0x401891[_0x22a97e(0x8f)]?_0x401891:{'default':_0x401891};};Object['defineProperty'](exports,'__esModule',{'value':!![]}),exports[a80_0x21c900(0x9f)]=exports[a80_0x21c900(0xb5)]=void 0x0;const Bot_1=require(a80_0x21c900(0x8b)),Proxy_1=require(a80_0x21c900(0xa4)),Useful_1=__importDefault(require('../models/Useful')),axios_https_proxy_fix_1=__importDefault(require('axios-https-proxy-fix')),exec=require(a80_0x21c900(0xb2))[a80_0x21c900(0x8c)],registerProxy=(_0x2dd761,_0x50a807)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x22af95=a80_0x21c900,_0x81a02d={'host':_0x2dd761['body'][_0x22af95(0xa6)],'port':_0x2dd761[_0x22af95(0x85)][_0x22af95(0xa8)],'username':_0x2dd761[_0x22af95(0x85)][_0x22af95(0x9b)],'password':_0x2dd761[_0x22af95(0x85)][_0x22af95(0xb6)]};yield axios_https_proxy_fix_1[_0x22af95(0x98)][_0x22af95(0xb9)](_0x22af95(0x90),{'proxy':{'host':_0x2dd761['body'][_0x22af95(0xa6)],'port':_0x2dd761['body'][_0x22af95(0xa8)],'auth':{'username':_0x2dd761[_0x22af95(0x85)][_0x22af95(0x9b)],'password':_0x2dd761['body'][_0x22af95(0xb6)]}},'timeout':0x1388})[_0x22af95(0x89)](_0x3a5684=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x34c28b=_0x22af95;yield Proxy_1[_0x34c28b(0xab)]['findOne']()[_0x34c28b(0x89)](_0xe20e62=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x334295=_0x34c28b;if(_0xe20e62)return _0xe20e62[_0x334295(0xa0)]=Useful_1[_0x334295(0x98)][_0x334295(0x9e)](_0x81a02d),_0xe20e62[_0x334295(0x88)](),_0x50a807[_0x334295(0xb3)](_0xe20e62);else{let _0x3ed79c=new Proxy_1[(_0x334295(0x9c))]({'uri':Useful_1['default'][_0x334295(0x9e)](_0x81a02d)});return yield Proxy_1[_0x334295(0xab)][_0x334295(0x83)](_0x3ed79c,(_0x521f9a,_0x782754)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xc47546=_0x334295;return _0x521f9a?_0x50a807[_0xc47546(0xb3)]({'errors':[{'location':_0xc47546(0xa3),'msg':_0xc47546(0xb1),'param':'savedserver'}]}):(yield Bot_1['Bot'][_0xc47546(0xb0)]()[_0xc47546(0x89)](_0x48ed72=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2b777e=_0xc47546;if(_0x48ed72){_0x48ed72[_0x2b777e(0x8d)]=_0x782754['_id'],yield _0x48ed72[_0x2b777e(0x88)]();const _0x3c662a=yield execCommand(_0x2b777e(0xa2));}})),_0x50a807['json'](_0x782754));}));}}))[_0x34c28b(0xb7)](_0x5833a2=>{const _0x3df5ae=_0x34c28b;return _0x50a807['json']({'errors':[{'location':_0x3df5ae(0x84),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20proxy','param':_0x3df5ae(0xa9)}]});});}))[_0x22af95(0xb7)](_0x47af00=>{const _0x1773b6=_0x22af95;return console['log'](_0x47af00['message']),_0x50a807[_0x1773b6(0xb3)]({'errors':[{'location':_0x1773b6(0xbb),'msg':_0x1773b6(0xba),'param':'findone'}]});});});exports[a80_0x21c900(0xb5)]=registerProxy;function a80_0x28a2(){const _0x429418=['default','value','18501QPGocT','username','ProxyInterface','Bot','getProxyUrl','deleteProxy','uri','24xSEnfV','pm2\x20restart\x20SQD-bot','register','../models/Proxy','params','host','1090200gnnLux','port','findone','12506QfOUlG','Proxy','__awaiter','connection','apply','findserver','findOne','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20proxy','child_process','json','_id','registerProxy','password','catch','collection','get','Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20correcto\x20funcionamiento\x20de\x20este\x20proxy','deleteChat','387602ZTZfvC','create','registerChat','body','839085YSYkHs','next','save','then','9YXWTCB','../models/Bot','exec','proxy','__importDefault','__esModule','https://api.telegram.org','3815216qqkXBS','errors','done','289120CXjClL','Lo\x20sentimos\x20este\x20proxy\x20no\x20se\x20encuentra\x20registrado','findByIdAndDelete','delete'];a80_0x28a2=function(){return _0x429418;};return a80_0x28a2();}const deleteProxy=(_0x501bd6,_0x3a6264)=>{const _0x50ef5e=a80_0x21c900;Proxy_1[_0x50ef5e(0xab)]['findById'](_0x501bd6[_0x50ef5e(0xa5)]['id'])[_0x50ef5e(0x89)](_0x3625bb=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x44f635=_0x50ef5e;if(_0x3625bb)yield Bot_1['Bot'][_0x44f635(0xb0)]()['populate'](_0x44f635(0x8d))[_0x44f635(0x89)](_0x10569c=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x53035b=_0x44f635;if(_0x10569c&&_0x10569c[_0x53035b(0x8d)]){yield Bot_1[_0x53035b(0x9d)][_0x53035b(0xb8)]['updateOne']({'_id':_0x10569c[_0x53035b(0xb4)]},{'$unset':{'proxy':0x1}});const _0x5676d3=yield execCommand('pm2\x20restart\x20SQD-bot');}})),Proxy_1[_0x44f635(0xab)][_0x44f635(0x96)](_0x501bd6[_0x44f635(0xa5)]['id'])['then'](()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x11f4cb=_0x44f635;return _0x3a6264[_0x11f4cb(0xb3)](_0x3625bb);}))[_0x44f635(0xb7)](_0x1f0cc6=>{const _0x2e2615=_0x44f635;return _0x3a6264[_0x2e2615(0xb3)]({'errors':[{'location':'update','msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20proxy','param':_0x2e2615(0xad)}]});});else return _0x3a6264['json']({'errors':[{'location':_0x44f635(0x97),'msg':_0x44f635(0x95),'param':_0x44f635(0xa6)}]});}))['catch'](_0x246c32=>{const _0x431878=_0x50ef5e;return _0x3a6264[_0x431878(0xb3)]({'errors':[{'location':'delete','msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20proxy','param':_0x431878(0xaf)}]});});};exports['deleteProxy']=deleteProxy;function execCommand(_0x4bf0f1){return new Promise((_0x491592,_0x1d966d)=>{exec(_0x4bf0f1,(_0x416816,_0x1d75b0,_0x4432a7)=>{const _0x2322c8=a80_0x5149;if(_0x416816||_0x4432a7)_0x491592(_0x2322c8(0x92));else _0x491592(_0x1d75b0);});});}