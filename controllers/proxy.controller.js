'use strict';function a7_0x4fd9(){const _0x2bab80=['delete','register','1205223vWmhrD','updateOne','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20proxy','deleteChat','value','save','ProxyInterface','errors','findOne','__importDefault','2JmqtEX','password','Bot','findone','pm2\x20restart\x20SQD-bot','findserver','default','host','275144mFoWeg','done','1142716ouPCtu','throw','then','port','message','deleteProxy','child_process','registerChat','Lo\x20sentimos\x20este\x20proxy\x20no\x20se\x20encuentra\x20registrado','5EDnYoA','https://api.telegram.org','body','../models/Useful','getProxyUrl','153BpCxdR','Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20correcto\x20funcionamiento\x20de\x20este\x20proxy','registerProxy','log','collection','params','20336940zNryuE','proxy','Proxy','568591DEyFZH','3833256ZxYNNj','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20proxy','catch','__esModule','_id','next','__awaiter','findByIdAndDelete','exec','json','apply','3042780ziwmGd'];a7_0x4fd9=function(){return _0x2bab80;};return a7_0x4fd9();}function a7_0x3366(_0x4e67ba,_0x3994c5){const _0x4fd90a=a7_0x4fd9();return a7_0x3366=function(_0x336613,_0x3b0b1d){_0x336613=_0x336613-0xeb;let _0x838f4d=_0x4fd90a[_0x336613];return _0x838f4d;},a7_0x3366(_0x4e67ba,_0x3994c5);}const a7_0x1823d6=a7_0x3366;(function(_0x528a0,_0x4e0184){const _0x4d403f=a7_0x3366,_0x4e2925=_0x528a0();while(!![]){try{const _0x1e5328=-parseInt(_0x4d403f(0x117))/0x1+-parseInt(_0x4d403f(0xf6))/0x2*(parseInt(_0x4d403f(0xec))/0x3)+-parseInt(_0x4d403f(0x100))/0x4+parseInt(_0x4d403f(0x109))/0x5*(-parseInt(_0x4d403f(0x123))/0x6)+-parseInt(_0x4d403f(0x118))/0x7+parseInt(_0x4d403f(0xfe))/0x8*(parseInt(_0x4d403f(0x10e))/0x9)+parseInt(_0x4d403f(0x114))/0xa;if(_0x1e5328===_0x4e0184)break;else _0x4e2925['push'](_0x4e2925['shift']());}catch(_0x7a7746){_0x4e2925['push'](_0x4e2925['shift']());}}}(a7_0x4fd9,0x4b1aa));var __awaiter=this&&this[a7_0x1823d6(0x11e)]||function(_0x38b94e,_0x3438d9,_0x32890c,_0xbe4ef4){function _0xa69ade(_0x97d08b){return _0x97d08b instanceof _0x32890c?_0x97d08b:new _0x32890c(function(_0x5322df){_0x5322df(_0x97d08b);});}return new(_0x32890c||(_0x32890c=Promise))(function(_0x1e839a,_0x170780){const _0x562005=a7_0x3366;function _0x24f7b2(_0x445a8a){const _0x7ff972=a7_0x3366;try{_0x396ab5(_0xbe4ef4[_0x7ff972(0x11d)](_0x445a8a));}catch(_0x3f7c7e){_0x170780(_0x3f7c7e);}}function _0x268ded(_0x24ad26){const _0xf91aac=a7_0x3366;try{_0x396ab5(_0xbe4ef4[_0xf91aac(0x101)](_0x24ad26));}catch(_0x4d3a41){_0x170780(_0x4d3a41);}}function _0x396ab5(_0x592e93){const _0x493898=a7_0x3366;_0x592e93[_0x493898(0xff)]?_0x1e839a(_0x592e93['value']):_0xa69ade(_0x592e93[_0x493898(0xf0)])[_0x493898(0x102)](_0x24f7b2,_0x268ded);}_0x396ab5((_0xbe4ef4=_0xbe4ef4[_0x562005(0x122)](_0x38b94e,_0x3438d9||[]))[_0x562005(0x11d)]());});},__importDefault=this&&this[a7_0x1823d6(0xf5)]||function(_0x55ec4c){const _0x36ab11=a7_0x1823d6;return _0x55ec4c&&_0x55ec4c[_0x36ab11(0x11b)]?_0x55ec4c:{'default':_0x55ec4c};};Object['defineProperty'](exports,a7_0x1823d6(0x11b),{'value':!![]}),exports[a7_0x1823d6(0x105)]=exports[a7_0x1823d6(0x110)]=void 0x0;const Bot_1=require('../models/Bot'),Proxy_1=require('../models/Proxy'),Useful_1=__importDefault(require(a7_0x1823d6(0x10c))),axios_https_proxy_fix_1=__importDefault(require('axios-https-proxy-fix')),exec=require(a7_0x1823d6(0x106))[a7_0x1823d6(0x120)],registerProxy=(_0x4eef3f,_0xb9c7c4)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1c6658=a7_0x1823d6,_0x768a90={'host':_0x4eef3f[_0x1c6658(0x10b)][_0x1c6658(0xfd)],'port':_0x4eef3f[_0x1c6658(0x10b)][_0x1c6658(0x103)],'username':_0x4eef3f[_0x1c6658(0x10b)]['username'],'password':_0x4eef3f[_0x1c6658(0x10b)][_0x1c6658(0xf7)]};yield axios_https_proxy_fix_1[_0x1c6658(0xfc)]['get'](_0x1c6658(0x10a),{'proxy':{'host':_0x4eef3f['body'][_0x1c6658(0xfd)],'port':_0x4eef3f[_0x1c6658(0x10b)][_0x1c6658(0x103)],'auth':{'username':_0x4eef3f[_0x1c6658(0x10b)]['username'],'password':_0x4eef3f[_0x1c6658(0x10b)]['password']}},'timeout':0x1388})[_0x1c6658(0x102)](_0x3fdb41=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x35e81a=_0x1c6658;yield Proxy_1['Proxy']['findOne']()[_0x35e81a(0x102)](_0x5cf753=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5b0cac=_0x35e81a;if(_0x5cf753)return _0x5cf753['uri']=Useful_1[_0x5b0cac(0xfc)][_0x5b0cac(0x10d)](_0x768a90),_0x5cf753[_0x5b0cac(0xf1)](),_0xb9c7c4['json'](_0x5cf753);else{let _0x24b0c9=new Proxy_1[(_0x5b0cac(0xf2))]({'uri':Useful_1[_0x5b0cac(0xfc)]['getProxyUrl'](_0x768a90)});return yield Proxy_1[_0x5b0cac(0x116)]['create'](_0x24b0c9,(_0x264c5d,_0x3330ac)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5150bb=_0x5b0cac;return _0x264c5d?_0xb9c7c4[_0x5150bb(0x121)]({'errors':[{'location':_0x5150bb(0xeb),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20proxy','param':'savedserver'}]}):(yield Bot_1['Bot'][_0x5150bb(0xf4)]()[_0x5150bb(0x102)](_0x77d491=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1b1f79=_0x5150bb;if(_0x77d491){_0x77d491['proxy']=_0x3330ac[_0x1b1f79(0x11c)],yield _0x77d491[_0x1b1f79(0xf1)]();const _0x3bc36d=yield execCommand(_0x1b1f79(0xfa));}})),_0xb9c7c4[_0x5150bb(0x121)](_0x3330ac));}));}}))[_0x35e81a(0x11a)](_0xffbd01=>{const _0x2b4a7a=_0x35e81a;return _0xb9c7c4['json']({'errors':[{'location':_0x2b4a7a(0x107),'msg':_0x2b4a7a(0xee),'param':'findone'}]});});}))[_0x1c6658(0x11a)](_0x15a4ed=>{const _0x1755e4=_0x1c6658;return console[_0x1755e4(0x111)](_0x15a4ed[_0x1755e4(0x104)]),_0xb9c7c4[_0x1755e4(0x121)]({'errors':[{'location':_0x1755e4(0xef),'msg':_0x1755e4(0x10f),'param':_0x1755e4(0xf9)}]});});});exports[a7_0x1823d6(0x110)]=registerProxy;const deleteProxy=(_0x2dc1e5,_0x481260)=>{const _0x40f1eb=a7_0x1823d6;Proxy_1[_0x40f1eb(0x116)]['findById'](_0x2dc1e5[_0x40f1eb(0x113)]['id'])[_0x40f1eb(0x102)](_0x47cb1f=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x196698=_0x40f1eb;if(_0x47cb1f)yield Bot_1[_0x196698(0xf8)]['findOne']()['populate'](_0x196698(0x115))[_0x196698(0x102)](_0x5c8893=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5ead3d=_0x196698;if(_0x5c8893&&_0x5c8893[_0x5ead3d(0x115)]){yield Bot_1[_0x5ead3d(0xf8)][_0x5ead3d(0x112)][_0x5ead3d(0xed)]({'_id':_0x5c8893[_0x5ead3d(0x11c)]},{'$unset':{'proxy':0x1}});const _0x187864=yield execCommand(_0x5ead3d(0xfa));}})),Proxy_1['Proxy'][_0x196698(0x11f)](_0x2dc1e5['params']['id'])[_0x196698(0x102)](()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x406b5c=_0x196698;return _0x481260[_0x406b5c(0x121)](_0x47cb1f);}))[_0x196698(0x11a)](_0x2dccc5=>{const _0x196bc3=_0x196698;return _0x481260[_0x196bc3(0x121)]({'errors':[{'location':'update','msg':_0x196bc3(0x119),'param':'connection'}]});});else return _0x481260['json']({'errors':[{'location':_0x196698(0x124),'msg':_0x196698(0x108),'param':_0x196698(0xfd)}]});}))[_0x40f1eb(0x11a)](_0x414290=>{const _0x3bc7b4=_0x40f1eb;return _0x481260[_0x3bc7b4(0x121)]({'errors':[{'location':_0x3bc7b4(0x124),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20proxy','param':_0x3bc7b4(0xfb)}]});});};exports[a7_0x1823d6(0x105)]=deleteProxy;function execCommand(_0x431fdb){return new Promise((_0x5ad5d0,_0x579a70)=>{exec(_0x431fdb,(_0x409739,_0x1f9cc6,_0x19f527)=>{const _0x3dcf3f=a7_0x3366;if(_0x409739||_0x19f527)_0x5ad5d0(_0x3dcf3f(0xf3));else _0x5ad5d0(_0x1f9cc6);});});}