'use strict';const a7_0x136e6e=a7_0x4370;(function(_0x5bedd6,_0x3843c0){const _0x42849a=a7_0x4370,_0x7371=_0x5bedd6();while(!![]){try{const _0x498711=-parseInt(_0x42849a(0x11a))/0x1+-parseInt(_0x42849a(0x128))/0x2+-parseInt(_0x42849a(0x10a))/0x3*(parseInt(_0x42849a(0x119))/0x4)+parseInt(_0x42849a(0xfd))/0x5+-parseInt(_0x42849a(0x101))/0x6*(parseInt(_0x42849a(0x131))/0x7)+-parseInt(_0x42849a(0x109))/0x8+parseInt(_0x42849a(0x10e))/0x9;if(_0x498711===_0x3843c0)break;else _0x7371['push'](_0x7371['shift']());}catch(_0x557eec){_0x7371['push'](_0x7371['shift']());}}}(a7_0x4250,0x445da));var __awaiter=this&&this[a7_0x136e6e(0x10f)]||function(_0x57f7a0,_0x5399ba,_0x9b4358,_0x5bb544){function _0x2161ba(_0x5c0c5e){return _0x5c0c5e instanceof _0x9b4358?_0x5c0c5e:new _0x9b4358(function(_0xd13d51){_0xd13d51(_0x5c0c5e);});}return new(_0x9b4358||(_0x9b4358=Promise))(function(_0x3d3670,_0x4e699d){function _0x18f235(_0x27aafb){const _0x5897ed=a7_0x4370;try{_0x441515(_0x5bb544[_0x5897ed(0x127)](_0x27aafb));}catch(_0x318b8e){_0x4e699d(_0x318b8e);}}function _0x332335(_0x2d8be5){const _0x818789=a7_0x4370;try{_0x441515(_0x5bb544[_0x818789(0x123)](_0x2d8be5));}catch(_0x5f4501){_0x4e699d(_0x5f4501);}}function _0x441515(_0x2ab974){const _0x598e93=a7_0x4370;_0x2ab974[_0x598e93(0x130)]?_0x3d3670(_0x2ab974[_0x598e93(0x113)]):_0x2161ba(_0x2ab974[_0x598e93(0x113)])[_0x598e93(0x138)](_0x18f235,_0x332335);}_0x441515((_0x5bb544=_0x5bb544['apply'](_0x57f7a0,_0x5399ba||[]))['next']());});},__importDefault=this&&this[a7_0x136e6e(0x10b)]||function(_0xf703d9){const _0x5357bb=a7_0x136e6e;return _0xf703d9&&_0xf703d9[_0x5357bb(0x125)]?_0xf703d9:{'default':_0xf703d9};};Object[a7_0x136e6e(0x111)](exports,'__esModule',{'value':!![]}),exports[a7_0x136e6e(0x13a)]=exports[a7_0x136e6e(0x102)]=void 0x0;const Bot_1=require(a7_0x136e6e(0x12d)),Proxy_1=require(a7_0x136e6e(0x117)),Useful_1=__importDefault(require('../models/Useful')),axios_https_proxy_fix_1=__importDefault(require(a7_0x136e6e(0x104))),exec=require(a7_0x136e6e(0x126))[a7_0x136e6e(0x116)],registerProxy=(_0x384c54,_0x305387)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2e6aed=a7_0x136e6e,_0x2f38a4={'host':_0x384c54[_0x2e6aed(0x129)][_0x2e6aed(0x11e)],'port':_0x384c54['body'][_0x2e6aed(0x12b)],'username':_0x384c54['body']['username'],'password':_0x384c54[_0x2e6aed(0x129)]['password']};yield axios_https_proxy_fix_1[_0x2e6aed(0x115)][_0x2e6aed(0x108)](_0x2e6aed(0x11c),{'proxy':{'host':_0x384c54[_0x2e6aed(0x129)]['host'],'port':_0x384c54[_0x2e6aed(0x129)][_0x2e6aed(0x12b)],'auth':{'username':_0x384c54[_0x2e6aed(0x129)][_0x2e6aed(0x135)],'password':_0x384c54['body'][_0x2e6aed(0x10d)]}},'timeout':0x1388})['then'](_0x10f1a3=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4083d9=_0x2e6aed;yield Proxy_1[_0x4083d9(0x11d)][_0x4083d9(0x12c)]()['then'](_0x429ad8=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2c292b=_0x4083d9;if(_0x429ad8)return _0x429ad8[_0x2c292b(0x133)]=Useful_1['default']['getProxyUrl'](_0x2f38a4),_0x429ad8[_0x2c292b(0x124)](),_0x305387[_0x2c292b(0x114)](_0x429ad8);else{let _0x4e3daa=new Proxy_1[(_0x2c292b(0x100))]({'uri':Useful_1[_0x2c292b(0x115)][_0x2c292b(0x107)](_0x2f38a4)});return yield Proxy_1[_0x2c292b(0x11d)][_0x2c292b(0x136)](_0x4e3daa,(_0x4f022c,_0x3262b3)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x29d7d3=_0x2c292b;return _0x4f022c?_0x305387[_0x29d7d3(0x114)]({'errors':[{'location':_0x29d7d3(0x122),'msg':_0x29d7d3(0x106),'param':'savedserver'}]}):(yield Bot_1[_0x29d7d3(0x120)]['findOne']()[_0x29d7d3(0x138)](_0x5a0c14=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xb1409a=_0x29d7d3;if(_0x5a0c14){_0x5a0c14['proxy']=_0x3262b3[_0xb1409a(0x134)],yield _0x5a0c14[_0xb1409a(0x124)]();const _0x5655c7=yield execCommand(_0xb1409a(0x12a));}})),_0x305387[_0x29d7d3(0x114)](_0x3262b3));}));}}))[_0x4083d9(0x10c)](_0x365c4a=>{const _0x41e244=_0x4083d9;return _0x305387['json']({'errors':[{'location':_0x41e244(0x137),'msg':_0x41e244(0xfe),'param':'findone'}]});});}))[_0x2e6aed(0x10c)](_0x3f08a1=>{const _0x3b6d71=_0x2e6aed;return console[_0x3b6d71(0x132)](_0x3f08a1[_0x3b6d71(0xff)]),_0x305387[_0x3b6d71(0x114)]({'errors':[{'location':'deleteChat','msg':_0x3b6d71(0x121),'param':_0x3b6d71(0x11f)}]});});});function a7_0x4250(){const _0x3f0af1=['register','throw','save','__esModule','child_process','next','643156DNFZcl','body','pm2\x20restart\x20SQD-bot','port','findOne','../models/Bot','update','connection','done','9002HTOLJd','log','uri','_id','username','create','registerChat','then','proxy','deleteProxy','findById','2378830CUeqQS','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20proxy','message','ProxyInterface','882zFYOPy','registerProxy','delete','axios-https-proxy-fix','updateOne','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20proxy','getProxyUrl','get','3411904wyAwtb','3nkGhpV','__importDefault','catch','password','11209374MoPkGg','__awaiter','params','defineProperty','errors','value','json','default','exec','../models/Proxy','collection','1712488JQQapU','75996ZICeSX','findByIdAndDelete','https://api.telegram.org','Proxy','host','findone','Bot','Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20correcto\x20funcionamiento\x20de\x20este\x20proxy'];a7_0x4250=function(){return _0x3f0af1;};return a7_0x4250();}exports['registerProxy']=registerProxy;const deleteProxy=(_0x37f7c0,_0x9d858a)=>{const _0x5d7b96=a7_0x136e6e;Proxy_1[_0x5d7b96(0x11d)][_0x5d7b96(0x13b)](_0x37f7c0['params']['id'])[_0x5d7b96(0x138)](_0x536ead=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x325ccd=_0x5d7b96;if(_0x536ead)yield Bot_1[_0x325ccd(0x120)]['findOne']()['populate'](_0x325ccd(0x139))['then'](_0x2ac42d=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x52e88d=_0x325ccd;if(_0x2ac42d&&_0x2ac42d[_0x52e88d(0x139)]){yield Bot_1[_0x52e88d(0x120)][_0x52e88d(0x118)][_0x52e88d(0x105)]({'_id':_0x2ac42d['_id']},{'$unset':{'proxy':0x1}});const _0x338e4d=yield execCommand('pm2\x20restart\x20SQD-bot');}})),Proxy_1[_0x325ccd(0x11d)][_0x325ccd(0x11b)](_0x37f7c0[_0x325ccd(0x110)]['id'])[_0x325ccd(0x138)](()=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2df056=_0x325ccd;return _0x9d858a[_0x2df056(0x114)](_0x536ead);}))[_0x325ccd(0x10c)](_0x43cd26=>{const _0x33a6bd=_0x325ccd;return _0x9d858a['json']({'errors':[{'location':_0x33a6bd(0x12e),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20proxy','param':_0x33a6bd(0x12f)}]});});else return _0x9d858a['json']({'errors':[{'location':'delete','msg':'Lo\x20sentimos\x20este\x20proxy\x20no\x20se\x20encuentra\x20registrado','param':'host'}]});}))['catch'](_0x9ce35f=>{const _0x227776=_0x5d7b96;return _0x9d858a['json']({'errors':[{'location':_0x227776(0x103),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20proxy','param':'findserver'}]});});};exports['deleteProxy']=deleteProxy;function a7_0x4370(_0x342a9f,_0x20fc9f){const _0x425092=a7_0x4250();return a7_0x4370=function(_0x437069,_0x3b05df){_0x437069=_0x437069-0xfd;let _0x5ebfa5=_0x425092[_0x437069];return _0x5ebfa5;},a7_0x4370(_0x342a9f,_0x20fc9f);}function execCommand(_0x2ebfc9){return new Promise((_0x47d105,_0x56bad2)=>{exec(_0x2ebfc9,(_0x696b1,_0x37e22a,_0x1b6c69)=>{const _0x96dca6=a7_0x4370;if(_0x696b1||_0x1b6c69)_0x47d105(_0x96dca6(0x112));else _0x47d105(_0x37e22a);});});}