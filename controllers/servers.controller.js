'use strict';const a9_0x28c422=a9_0x1731;(function(_0x2807af,_0x413532){const _0xf15fc9=a9_0x1731,_0x1dd7e5=_0x2807af();while(!![]){try{const _0x5d0a1c=-parseInt(_0xf15fc9(0x14e))/0x1+-parseInt(_0xf15fc9(0x112))/0x2+parseInt(_0xf15fc9(0x117))/0x3+parseInt(_0xf15fc9(0x17a))/0x4*(parseInt(_0xf15fc9(0x138))/0x5)+-parseInt(_0xf15fc9(0x145))/0x6*(-parseInt(_0xf15fc9(0x135))/0x7)+-parseInt(_0xf15fc9(0xfa))/0x8+-parseInt(_0xf15fc9(0x171))/0x9;if(_0x5d0a1c===_0x413532)break;else _0x1dd7e5['push'](_0x1dd7e5['shift']());}catch(_0x5dcab5){_0x1dd7e5['push'](_0x1dd7e5['shift']());}}}(a9_0x53e4,0xb8408));var __createBinding=this&&this[a9_0x28c422(0x116)]||(Object[a9_0x28c422(0x128)]?function(_0x55d81d,_0x3da171,_0x529792,_0x5842c4){if(_0x5842c4===undefined)_0x5842c4=_0x529792;Object['defineProperty'](_0x55d81d,_0x5842c4,{'enumerable':!![],'get':function(){return _0x3da171[_0x529792];}});}:function(_0x393423,_0x2b7b11,_0x24455a,_0x391427){if(_0x391427===undefined)_0x391427=_0x24455a;_0x393423[_0x391427]=_0x2b7b11[_0x24455a];}),__setModuleDefault=this&&this[a9_0x28c422(0x149)]||(Object[a9_0x28c422(0x128)]?function(_0x43cebe,_0x359cd4){const _0x99b010=a9_0x28c422;Object[_0x99b010(0x12a)](_0x43cebe,_0x99b010(0x104),{'enumerable':!![],'value':_0x359cd4});}:function(_0x4661d6,_0x5af1ca){const _0x3f08f1=a9_0x28c422;_0x4661d6[_0x3f08f1(0x104)]=_0x5af1ca;}),__importStar=this&&this[a9_0x28c422(0x13a)]||function(_0x49b881){const _0x257a7d=a9_0x28c422;if(_0x49b881&&_0x49b881[_0x257a7d(0x16a)])return _0x49b881;var _0x488ee7={};if(_0x49b881!=null){for(var _0x357979 in _0x49b881)if(_0x357979!==_0x257a7d(0x104)&&Object[_0x257a7d(0xf2)]['hasOwnProperty'][_0x257a7d(0x140)](_0x49b881,_0x357979))__createBinding(_0x488ee7,_0x49b881,_0x357979);}return __setModuleDefault(_0x488ee7,_0x49b881),_0x488ee7;},__awaiter=this&&this[a9_0x28c422(0x16b)]||function(_0x189b72,_0x594be0,_0x4f3ea0,_0x374335){function _0x8922a9(_0x204e27){return _0x204e27 instanceof _0x4f3ea0?_0x204e27:new _0x4f3ea0(function(_0x2a60c2){_0x2a60c2(_0x204e27);});}return new(_0x4f3ea0||(_0x4f3ea0=Promise))(function(_0x2f3319,_0x2128f0){const _0xdeb810=a9_0x1731;function _0x51c41f(_0xc486dc){const _0x2b7e52=a9_0x1731;try{_0x2e9ce0(_0x374335[_0x2b7e52(0x16c)](_0xc486dc));}catch(_0x411672){_0x2128f0(_0x411672);}}function _0x33bfb8(_0xf7cde5){const _0x298022=a9_0x1731;try{_0x2e9ce0(_0x374335[_0x298022(0x11f)](_0xf7cde5));}catch(_0x50d659){_0x2128f0(_0x50d659);}}function _0x2e9ce0(_0x3ec0e5){const _0x444db1=a9_0x1731;_0x3ec0e5[_0x444db1(0x18d)]?_0x2f3319(_0x3ec0e5[_0x444db1(0x190)]):_0x8922a9(_0x3ec0e5[_0x444db1(0x190)])[_0x444db1(0xf1)](_0x51c41f,_0x33bfb8);}_0x2e9ce0((_0x374335=_0x374335[_0xdeb810(0x102)](_0x189b72,_0x594be0||[]))[_0xdeb810(0x16c)]());});},__importDefault=this&&this[a9_0x28c422(0x193)]||function(_0x3fad24){const _0x16ab2e=a9_0x28c422;return _0x3fad24&&_0x3fad24[_0x16ab2e(0x16a)]?_0x3fad24:{'default':_0x3fad24};};Object['defineProperty'](exports,a9_0x28c422(0x16a),{'value':!![]}),exports[a9_0x28c422(0x130)]=exports[a9_0x28c422(0x15d)]=exports[a9_0x28c422(0x118)]=exports[a9_0x28c422(0x164)]=exports[a9_0x28c422(0x151)]=exports[a9_0x28c422(0x12f)]=exports['update']=exports[a9_0x28c422(0x18f)]=exports['setSSHConnection']=exports[a9_0x28c422(0x109)]=exports[a9_0x28c422(0x141)]=exports['getServers']=void 0x0;const express_validator_1=require('express-validator'),Server_1=require('../models/Server'),Source_1=require(a9_0x28c422(0x194)),Quota_1=require('../models/Quota'),ConnectionNotify_1=require(a9_0x28c422(0x175)),LicenseController=__importStar(require(a9_0x28c422(0x10f))),handleNotify=__importStar(require(a9_0x28c422(0xf7))),Useful_1=__importDefault(require('../models/Useful')),Cache_1=__importDefault(require(a9_0x28c422(0x172))),{NodeSSH}=require(a9_0x28c422(0x127)),parser=require(a9_0x28c422(0x162)),exec=require(a9_0x28c422(0x170))[a9_0x28c422(0x15b)];let serversData=[];const getServers=(_0x2c1ccb,_0x5df3fc)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2227ee=a9_0x28c422;let _0x358d92=yield Server_1[_0x2227ee(0x114)]['find']()[_0x2227ee(0xf1)](_0x27ef5f=>{return _0x27ef5f;})[_0x2227ee(0x196)](_0x4107e4=>{const _0x420470=_0x2227ee;return{'errors':[{'location':'getServers','msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20de\x20los\x20servidores','param':_0x420470(0x134)}]};});return _0x358d92[_0x2227ee(0x176)]((_0x484903,_0x44d6d9)=>_0x44d6d9[_0x2227ee(0x148)]-_0x484903['active']),_0x5df3fc[_0x2227ee(0x103)](_0x358d92);});exports[a9_0x28c422(0x124)]=getServers;const getServersById=(_0xcd2695,_0x1e1048)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x588bea=a9_0x28c422;let _0x56e24a=yield Server_1[_0x588bea(0x114)][_0x588bea(0x163)](_0xcd2695['body']['id'])[_0x588bea(0x14b)](_0x588bea(0xf6))[_0x588bea(0xf1)](_0x363692=>{return _0x363692;})[_0x588bea(0x196)](_0x1c0285=>{const _0x1ad192=_0x588bea;return{'errors':[{'location':_0x1ad192(0x124),'msg':_0x1ad192(0x100),'param':'servers'}]};});return _0x1e1048[_0x588bea(0x103)](_0x56e24a);});exports[a9_0x28c422(0x141)]=getServersById;const register=(_0x1996f6,_0x197620)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5e3043=a9_0x28c422;yield express_validator_1[_0x5e3043(0x199)](_0x5e3043(0x155))['notEmpty']()['withMessage']('host_empty')[_0x5e3043(0x181)](_0x1996f6);const _0x495bbd=_0x4c6f40=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3e18b4=_0x5e3043;if(!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x3e18b4(0x198)](_0x1996f6[_0x3e18b4(0x115)]['host']))return Promise[_0x3e18b4(0x160)](_0x3e18b4(0x136));}),_0xf45e5c=_0x45ca9d=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1b8c08=_0x5e3043;return yield Server_1[_0x1b8c08(0x114)][_0x1b8c08(0x15f)]({'host':_0x1996f6[_0x1b8c08(0x115)][_0x1b8c08(0x155)]})[_0x1b8c08(0xf1)](_0x346e5a=>{const _0x26912c=_0x1b8c08;if(_0x346e5a)return Promise[_0x26912c(0x160)](_0x26912c(0xef));});});yield express_validator_1[_0x5e3043(0x199)](_0x5e3043(0x155))[_0x5e3043(0x182)](_0x495bbd)['run'](_0x1996f6),yield express_validator_1['check'](_0x5e3043(0x155))[_0x5e3043(0x182)](_0xf45e5c)[_0x5e3043(0x181)](_0x1996f6);const _0x397c22=express_validator_1[_0x5e3043(0x10d)](_0x1996f6);if(!_0x397c22[_0x5e3043(0x139)]())return _0x197620[_0x5e3043(0x103)]({'errors':_0x397c22[_0x5e3043(0x188)]()});let _0x54669f=yield Server_1[_0x5e3043(0x114)][_0x5e3043(0x15f)]({'active':!![]})[_0x5e3043(0xf1)](_0xf791a0=>{if(_0xf791a0)return![];else return!![];}),_0xe00588=new Server_1[(_0x5e3043(0xf4))]({'host':_0x1996f6[_0x5e3043(0x115)][_0x5e3043(0x155)],'port':_0x1996f6['body'][_0x5e3043(0x12e)],'cachepass':_0x1996f6['body'][_0x5e3043(0x185)],'active':_0x54669f});return yield Server_1['Server'][_0x5e3043(0x128)](_0xe00588,(_0x245129,_0x5dcc17)=>{const _0x393ce6=_0x5e3043;if(_0x245129)return _0x197620[_0x393ce6(0x103)]({'errors':[{'location':'register','msg':_0x393ce6(0x187),'param':_0x393ce6(0x11c)}]});else return _0x197620[_0x393ce6(0x103)](_0x5dcc17);});});exports[a9_0x28c422(0x109)]=register;const setSSHConnection=(_0x25f4e2,_0x5c997e)=>{const _0x310151=a9_0x28c422;Server_1['Server'][_0x310151(0x163)](_0x25f4e2[_0x310151(0x11a)]['id'])['then'](_0x3fe8dd=>{const _0x1597e4=_0x310151;if(_0x3fe8dd){const _0x49b707=new NodeSSH();_0x49b707[_0x1597e4(0x18c)]({'host':_0x3fe8dd[_0x1597e4(0x155)],'port':_0x25f4e2[_0x1597e4(0x115)]['sshport'],'username':_0x25f4e2[_0x1597e4(0x115)][_0x1597e4(0x17c)],'password':_0x25f4e2[_0x1597e4(0x115)][_0x1597e4(0x180)]})[_0x1597e4(0xf1)](function(){const _0x20b8a3=_0x1597e4;Server_1['Server'][_0x20b8a3(0x143)](_0x25f4e2[_0x20b8a3(0x11a)]['id'],_0x25f4e2[_0x20b8a3(0x115)],{'new':!![]})[_0x20b8a3(0xf1)](_0x4f344f=>{return _0x5c997e['json'](_0x4f344f);})[_0x20b8a3(0x196)](_0x34e4e6=>{const _0x49774c=_0x20b8a3;return _0x5c997e['json']({'errors':[{'location':_0x49774c(0x14d),'msg':_0x49774c(0x147),'param':_0x49774c(0x168)}]});});})[_0x1597e4(0x196)](_0x424a7b=>{const _0x2e91d0=_0x1597e4;return _0x5c997e[_0x2e91d0(0x103)]({'errors':[{'location':_0x2e91d0(0x113),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20establecer\x20conexión\x20SSH\x20con\x20el\x20servidor','param':_0x2e91d0(0x168)}]});});}else return _0x5c997e[_0x1597e4(0x103)]({'errors':[{'location':_0x1597e4(0x12d),'msg':_0x1597e4(0x179),'param':_0x1597e4(0x155)}]});})[_0x310151(0x196)](_0x46ebb3=>{const _0x5c2895=_0x310151;return _0x5c997e[_0x5c2895(0x103)]({'errors':[{'location':_0x5c2895(0x12d),'msg':_0x5c2895(0x100),'param':_0x5c2895(0x11d)}]});});};exports[a9_0x28c422(0x12d)]=setSSHConnection;const deleteSSHConnection=(_0xb19f3e,_0xd933c4)=>{const _0x198302=a9_0x28c422;Server_1[_0x198302(0x114)][_0x198302(0x163)](_0xb19f3e[_0x198302(0x11a)]['id'])[_0x198302(0xf1)](_0x40e68c=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x52f573=_0x198302;return _0x40e68c?_0x40e68c[_0x52f573(0x17c)]?(yield Server_1['Server'][_0x52f573(0x108)]['updateOne']({'_id':_0x40e68c['_id']},{'$unset':{'sshuser':0x1,'sshport':0x1,'sshpass':0x1}}),_0xd933c4['json'](_0x40e68c)):_0xd933c4[_0x52f573(0x103)]({'errors':[{'location':_0x52f573(0x12d),'msg':'Lo\x20sentimos\x20este\x20servidor\x20no\x20tiene\x20conexión\x20SSH\x20registrada','param':_0x52f573(0x155)}]}):_0xd933c4['json']({'errors':[{'location':'setSSHConnection','msg':_0x52f573(0x179),'param':_0x52f573(0x155)}]});}))[_0x198302(0x196)](_0x20a46e=>{const _0x54939f=_0x198302;return _0xd933c4[_0x54939f(0x103)]({'errors':[{'location':_0x54939f(0x12d),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','param':_0x54939f(0x11d)}]});});};exports[a9_0x28c422(0x18f)]=deleteSSHConnection;const update=(_0x475534,_0x20c189)=>{const _0x10863b=a9_0x28c422;Server_1[_0x10863b(0x114)][_0x10863b(0x163)](_0x475534[_0x10863b(0x11a)]['id'])[_0x10863b(0xf1)](_0x2c2f72=>{const _0x5073f2=_0x10863b;if(_0x2c2f72)Server_1['Server'][_0x5073f2(0x143)](_0x475534[_0x5073f2(0x11a)]['id'],_0x475534[_0x5073f2(0x115)],{'new':!![]})[_0x5073f2(0xf1)](_0x110bb0=>{const _0x5b67f5=_0x5073f2;return _0x20c189[_0x5b67f5(0x103)](_0x110bb0);})[_0x5073f2(0x196)](_0x1b08c5=>{const _0x1c2062=_0x5073f2;return _0x20c189[_0x1c2062(0x103)]({'errors':[{'location':'update','msg':_0x1c2062(0x169),'param':_0x1c2062(0x168)}]});});else return _0x20c189[_0x5073f2(0x103)]({'errors':[{'location':_0x5073f2(0x14d),'msg':_0x5073f2(0x179),'param':_0x5073f2(0x155)}]});})[_0x10863b(0x196)](_0xbff286=>{const _0x2eb16b=_0x10863b;return _0x20c189['json']({'errors':[{'location':'update','msg':_0x2eb16b(0x100),'param':_0x2eb16b(0x11d)}]});});};exports[a9_0x28c422(0x14d)]=update;const activate=(_0x418ef0,_0x5aa4e9)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1d7b33=a9_0x28c422;yield Server_1[_0x1d7b33(0x114)][_0x1d7b33(0x163)](_0x418ef0['params']['id'])['then'](_0x3992e8=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5743d8=_0x1d7b33;if(_0x3992e8)yield Server_1[_0x5743d8(0x114)][_0x5743d8(0x15f)]({'active':!![]})[_0x5743d8(0xf1)](_0x1e5b45=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4995c5=_0x5743d8;_0x1e5b45&&_0x1e5b45['_id']!=_0x3992e8['_id']&&(yield Server_1['Server'][_0x4995c5(0x143)](_0x1e5b45['id'],{'active':![]},{'new':!![]}));})),yield Server_1[_0x5743d8(0x114)][_0x5743d8(0x143)](_0x418ef0['params']['id'],{'active':!![]},{'new':!![]})[_0x5743d8(0xf1)](_0x1db69d=>{const _0x3750ef=_0x5743d8;return _0x5aa4e9[_0x3750ef(0x103)](_0x1db69d);});else return _0x5aa4e9['json']({'errors':[{'location':_0x5743d8(0x12f),'msg':_0x5743d8(0x146),'param':_0x5743d8(0x155)}]});}))['catch'](_0x38c0fd=>{const _0x53f64f=_0x1d7b33;return _0x5aa4e9[_0x53f64f(0x103)]({'errors':[{'location':_0x53f64f(0x12f),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','param':_0x53f64f(0x11d)}]});});});exports[a9_0x28c422(0x12f)]=activate;const deleteServer=(_0x560a2e,_0x3f2e38)=>{const _0x22dea6=a9_0x28c422;Server_1[_0x22dea6(0x114)]['findById'](_0x560a2e[_0x22dea6(0x11a)]['id'])['populate'](_0x22dea6(0xfb))[_0x22dea6(0xf1)](_0x49bd9d=>{const _0x23ff82=_0x22dea6;if(_0x49bd9d)_0x49bd9d[_0x23ff82(0xfb)]&&_0x49bd9d[_0x23ff82(0xfb)][_0x23ff82(0x18b)]((_0x2f3b15,_0x114caa)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2d272c=_0x23ff82;yield _0x2f3b15[_0x2d272c(0x14b)](_0x2d272c(0x189))[_0x2d272c(0x14b)](_0x2d272c(0x152))[_0x2d272c(0x121)]();_0x2f3b15[_0x2d272c(0x152)][_0x2d272c(0x126)]>0x0&&(console[_0x2d272c(0x137)](_0x2f3b15[_0x2d272c(0x152)][_0x2d272c(0x126)]),_0x2f3b15[_0x2d272c(0x152)][_0x2d272c(0x18b)]((_0x2140bf,_0x72bade)=>{const _0x663b7c=_0x2d272c;ConnectionNotify_1[_0x663b7c(0xf3)][_0x663b7c(0x108)][_0x663b7c(0x13b)]({'_id':_0x2140bf['_id']});}));if(_0x2f3b15[_0x2d272c(0x189)]){let _0x2e0f70=yield _0x2f3b15[_0x2d272c(0x189)]['populate'](_0x2d272c(0xfb))[_0x2d272c(0x121)]();_0x2e0f70['sources'][_0x2d272c(0x18b)]((_0x42262c,_0x48eff4)=>{const _0x5f5b69=_0x2d272c;if(_0x42262c['identifier']==_0x2f3b15[_0x5f5b69(0x17e)]){let _0x168e91=_0x2e0f70['sources']['splice'](_0x48eff4,0x0);Quota_1[_0x5f5b69(0x184)][_0x5f5b69(0x108)]['updateOne']({'_id':_0x2f3b15[_0x5f5b69(0x189)][_0x5f5b69(0x157)]},{'$set':{'sources':_0x168e91}});}return _0x42262c;});}return Source_1[_0x2d272c(0x195)][_0x2d272c(0x108)][_0x2d272c(0x13b)]({'_id':_0x2f3b15['_id']}),_0x2f3b15;})),Server_1[_0x23ff82(0x114)][_0x23ff82(0x15a)](_0x560a2e[_0x23ff82(0x11a)]['id'])[_0x23ff82(0xf1)](()=>{const _0x525324=_0x23ff82;return _0x3f2e38[_0x525324(0x103)](_0x49bd9d);})['catch'](_0x30dd33=>{const _0x7c1c06=_0x23ff82;return _0x3f2e38[_0x7c1c06(0x103)]({'errors':[{'location':'update','msg':_0x7c1c06(0x12c),'param':_0x7c1c06(0x168)}]});});else return _0x3f2e38[_0x23ff82(0x103)]({'errors':[{'location':_0x23ff82(0xf9),'msg':_0x23ff82(0x179),'param':_0x23ff82(0x155)}]});})[_0x22dea6(0x196)](_0x34ea24=>{const _0x227d3b=_0x22dea6;return _0x3f2e38[_0x227d3b(0x103)]({'errors':[{'location':_0x227d3b(0xf9),'msg':_0x227d3b(0x100),'param':_0x227d3b(0x11d)}]});});};exports[a9_0x28c422(0x151)]=deleteServer;const statusServer=(_0x596509,_0x3c4eea)=>{const _0x561811=a9_0x28c422;Server_1[_0x561811(0x114)]['findById'](_0x596509[_0x561811(0x11a)]['id'])[_0x561811(0xf1)](_0x3a31ec=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x328596=_0x561811;if(_0x3a31ec){if(_0x3a31ec[_0x328596(0x17c)]){const _0x37e255=new NodeSSH();yield _0x37e255['connect']({'host':_0x3a31ec[_0x328596(0x155)],'port':_0x3a31ec['sshport'],'username':_0x3a31ec[_0x328596(0x17c)],'password':_0x3a31ec[_0x328596(0x180)]})[_0x328596(0xf1)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x43d980=a9_0x1731;yield _0x37e255[_0x43d980(0x165)](_0x43d980(0x10e))[_0x43d980(0xf1)](function(_0x22d578){const _0x43504c=_0x43d980;if(_0x22d578['stderr']!='')return _0x3c4eea[_0x43504c(0x103)]({'errors':[{'location':_0x43504c(0x164),'msg':_0x43504c(0x154),'param':_0x43504c(0x168)}]});else{let _0x36800c=_0x22d578[_0x43504c(0x16e)][_0x43504c(0x119)](_0x43504c(0x142))[0x1][_0x43504c(0x119)]('\x20')[0x0];return _0x3c4eea[_0x43504c(0x103)]({'status':_0x36800c,'detail':_0x22d578[_0x43504c(0x16e)]});}})[_0x43d980(0x196)](_0x8d2ae7=>{const _0xd074f2=_0x43d980;return _0x3c4eea[_0xd074f2(0x103)]({'errors':[{'location':_0xd074f2(0x164),'msg':_0xd074f2(0x154),'param':_0xd074f2(0x168)}]});});});})[_0x328596(0x196)](_0x5d8ded=>{const _0x1a9d5e=_0x328596;return _0x3c4eea[_0x1a9d5e(0x103)]({'errors':[{'location':_0x1a9d5e(0x164),'msg':_0x1a9d5e(0x167),'param':_0x1a9d5e(0x168)}]});});}else return _0x3c4eea['json']({'errors':[{'location':_0x328596(0x164),'msg':_0x328596(0x122),'param':_0x328596(0x168)}]});}else return _0x3c4eea[_0x328596(0x103)]({'errors':[{'location':_0x328596(0x164),'msg':_0x328596(0x179),'param':_0x328596(0x155)}]});}))[_0x561811(0x196)](_0x4a75d3=>{const _0x3fde11=_0x561811;return _0x3c4eea['json']({'errors':[{'location':_0x3fde11(0x164),'msg':_0x3fde11(0x100),'param':_0x3fde11(0x11d)}]});});};exports['statusServer']=statusServer;const restartServer=(_0x419ca5,_0x491c18)=>{const _0x5055fd=a9_0x28c422;Server_1[_0x5055fd(0x114)][_0x5055fd(0x163)](_0x419ca5['params']['id'])[_0x5055fd(0xf1)](_0x492902=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3cecd4=_0x5055fd;if(_0x492902){if(_0x492902[_0x3cecd4(0x17c)]){const _0x25c9c6=new NodeSSH();yield _0x25c9c6['connect']({'host':_0x492902[_0x3cecd4(0x155)],'port':_0x492902['sshport'],'username':_0x492902['sshuser'],'password':_0x492902[_0x3cecd4(0x180)]})[_0x3cecd4(0xf1)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3c811f=a9_0x1731;yield _0x25c9c6['execCommand'](_0x3c811f(0x183))[_0x3c811f(0xf1)](function(_0x30dc14){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x3414f3=a9_0x1731;if(_0x30dc14['stderr']!='')return _0x491c18[_0x3414f3(0x103)]({'errors':[{'location':'restartServer','msg':_0x3414f3(0x133),'param':_0x3414f3(0x168)}]});else yield _0x25c9c6[_0x3414f3(0x165)]('systemctl\x20status\x20squid')[_0x3414f3(0xf1)](function(_0x477489){const _0x1eec92=_0x3414f3;if(_0x477489[_0x1eec92(0x10c)]!='')return _0x491c18['json']({'errors':[{'location':_0x1eec92(0x118),'msg':_0x1eec92(0x154),'param':_0x1eec92(0x168)}]});else{let _0x1bcd94=_0x477489[_0x1eec92(0x16e)][_0x1eec92(0x119)](_0x1eec92(0x142))[0x1][_0x1eec92(0x119)]('\x20')[0x0];return _0x491c18[_0x1eec92(0x103)]({'status':_0x1bcd94,'detail':_0x477489[_0x1eec92(0x16e)]});}})['catch'](_0x2d2588=>{const _0x4dde32=_0x3414f3;return _0x491c18['json']({'errors':[{'location':_0x4dde32(0x118),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20estado\x20del\x20servidor','param':_0x4dde32(0x168)}]});});});})[_0x3c811f(0x196)](_0x50674f=>{const _0x29b4e9=_0x3c811f;return _0x491c18[_0x29b4e9(0x103)]({'errors':[{'location':_0x29b4e9(0x118),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20reiniciar\x20el\x20servidor','param':_0x29b4e9(0x168)}]});});});})[_0x3cecd4(0x196)](_0x58588a=>{const _0x136c7c=_0x3cecd4;return _0x491c18[_0x136c7c(0x103)]({'errors':[{'location':_0x136c7c(0x118),'msg':_0x136c7c(0x167),'param':_0x136c7c(0x168)}]});});}else return _0x491c18[_0x3cecd4(0x103)]({'errors':[{'location':_0x3cecd4(0x164),'msg':_0x3cecd4(0x122),'param':_0x3cecd4(0x168)}]});}else return _0x491c18[_0x3cecd4(0x103)]({'errors':[{'location':_0x3cecd4(0x118),'msg':_0x3cecd4(0x179),'param':_0x3cecd4(0x155)}]});}))[_0x5055fd(0x196)](_0x491bd9=>{const _0x3769cb=_0x5055fd;return _0x491c18[_0x3769cb(0x103)]({'errors':[{'location':_0x3769cb(0x118),'msg':_0x3769cb(0x100),'param':_0x3769cb(0x11d)}]});});};function a9_0x53e4(){const _0x3296d6=['<b>','Se\x20ha\x20recuperado\x20la\x20conexión\x20al\x20proxy\x20<b>','stderr','validationResult','systemctl\x20status\x20squid','../controllers/license.controller','routelockpc','get','1760188YPLxsX','ssh','Server','body','__createBinding','3222216QaSGEU','restartServer','split','params','killed','savedserver','findserver','filter','throw','push','execPopulate','Lo\x20sentimos\x20este\x20servidor\x20no\x20tiene\x20conexión\x20SSH\x20registrada','updateLicense','getServers','type','length','node-ssh','create','Conexión\x20a\x20sitio','defineProperty','quota_consumed','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20servidor','setSSHConnection','port','activate','getConnections','status','proxyConnections','Lo\x20sentimos\x20no\x20se\x20pudo\x20reiniciar\x20el\x20servidor','servers','47887aMliYs','host_not_is_ip','log','1037555rYAbXS','isEmpty','__importStar','findOneAndDelete','notified','checkLicense','includes','save','call','getServersById','Active:\x20','findByIdAndUpdate','Ha\x20ocurrido\x20un\x20error\x20en\x20la\x20conexión\x20ssh\x20\x20del\x20servidor\x20','774prvttB','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20regostrado','Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20SSH\x20del\x20servidor','active','__setModuleDefault','indexOf','populate','speed_value','update','875176IqBZCu','El\x20servicio\x20en\x20el\x20proxy\x20<b>','uris','deleteServer','connection_notifies','Estado\x20del\x20servidor\x20','Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20estado\x20del\x20servidor','host','sendNotify','_id','shift','convertQuotaType','findByIdAndDelete','exec','server','getConnectionsData','request','findOne','reject','limit','node-csv-parse','findById','statusServer','execCommand','sshport','Lo\x20sentimos\x20no\x20se\x20pudo\x20establecer\x20conexión\x20SSH\x20con\x20el\x20servidor','connection','Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20del\x20servidor','__esModule','__awaiter','next','last_connection','stdout','stop','child_process','5125806mhjRDK','../models/Cache','usersSpeed','</b>','../models/ConnectionNotify','sort','</b>\x20ha\x20comenzado\x20a\x20ejecutarse\x20correctamente','is_lock','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20registrado','24IOmjmh','parseSource','sshuser','\x20al\x20intentar\x20bloquear\x20a\x20','identifier','Error\x20en\x20la\x20conexión\x20ssh\x20del\x20servidor\x20','sshpass','run','custom','systemctl\x20restart\x20squid','Quota','cachepass','emit','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20servidor','array','quota','updateOne','map','connect','done','\x22\x20>>\x20','deleteSSHConnection','value','site','Se\x20ha\x20detenido\x20el\x20servicio\x20en\x20el\x20proxy\x20<b>','__importDefault','../models/Source','Source','catch','SourceInterface','test','check','systemctl\x20reload\x20squid','host_found','countbytediff','then','prototype','ConnectionNotify','ServerInterface','shutdown','serverldap','../handlers/handleNotify','cat\x20','delete','977016GHctfM','sources','byteDiff','forEach','usersSize','usersConnections','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','bytes','apply','json','default','usersConnected','refreshSourcesLock','Nueva\x20cuota\x20excedida','collection','register'];a9_0x53e4=function(){return _0x3296d6;};return a9_0x53e4();}exports['restartServer']=restartServer;function a9_0x1731(_0x27eb06,_0x46c2e1){const _0x53e49a=a9_0x53e4();return a9_0x1731=function(_0x173114,_0x6bb5f0){_0x173114=_0x173114-0xee;let _0xf66786=_0x53e49a[_0x173114];return _0xf66786;},a9_0x1731(_0x27eb06,_0x46c2e1);}const getConnectionsData=(_0x13b6a1,_0x530e4b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x254514=a9_0x28c422,_0x5e64da=_0x13b6a1['app'][_0x254514(0x111)]('socketio');return yield exports[_0x254514(0x130)](_0x5e64da),_0x530e4b['json'](serversData);});exports[a9_0x28c422(0x15d)]=getConnectionsData;const getConnections=_0x4ccc3e=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x53b49f=a9_0x28c422;let _0x3ac6dd=yield LicenseController[_0x53b49f(0x13d)]();_0x4ccc3e['in']('receive\x20new\x20connections')[_0x53b49f(0x186)](_0x53b49f(0x123),{'license':_0x3ac6dd});if(_0x3ac6dd[_0x53b49f(0x131)]){let _0x4155ee=yield Server_1[_0x53b49f(0x114)]['find']()[_0x53b49f(0x14b)](_0x53b49f(0xfb))[_0x53b49f(0xf1)](_0x562b02=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x562b02;}));if(_0x4155ee['length']>0x0){const _0x42b924=new Cache_1[(_0x53b49f(0x104))]();return _0x4155ee['map']((_0x5e0270,_0x1c75ee)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1cf2f2=_0x53b49f,_0x4da920=_0x42b924['getDemoConnections'](),_0x58aed9=_0x1cf2f2(0x148);let _0x119e24=_0x58aed9=='shutdown'||_0x58aed9==_0x1cf2f2(0x16f)?_0x58aed9:_0x1cf2f2(0x148),_0x59fedf=_0x5e0270[_0x1cf2f2(0x131)]!==undefined&&_0x5e0270['status']==_0x1cf2f2(0x16f)&&_0x119e24==_0x1cf2f2(0x148);if(_0x5e0270['status']==undefined||_0x5e0270[_0x1cf2f2(0x131)]!==_0x119e24){yield Server_1['Server'][_0x1cf2f2(0x108)][_0x1cf2f2(0x18a)]({'_id':_0x5e0270['_id']},{'$set':{'status':_0x119e24}});let _0x3b4faa=_0x119e24==_0x1cf2f2(0xf5)?'Se\x20ha\x20perdido\x20la\x20conexión\x20al\x20proxy\x20<b>'+_0x5e0270[_0x1cf2f2(0x155)]+'</b>,\x20por\x20favor\x20compruebe\x20la\x20conexión':_0x119e24=='stop'?_0x1cf2f2(0x192)+_0x5e0270['host']+'</b>':_0x59fedf?_0x1cf2f2(0x14f)+_0x5e0270[_0x1cf2f2(0x155)]+_0x1cf2f2(0x177):_0x1cf2f2(0x10b)+_0x5e0270[_0x1cf2f2(0x155)]+_0x1cf2f2(0x174);handleNotify[_0x1cf2f2(0x156)]({'subject':_0x1cf2f2(0x153)+_0x5e0270[_0x1cf2f2(0x155)],'msg':_0x3b4faa});}let _0x5169e0={'usersConnected':[0x0,0x0],'usersConnections':[0x0,0x0],'usersSize':[0x0,0x0],'usersSpeed':[0x0,0x0]},_0x563928=serversData[_0x1cf2f2(0x11e)](function(_0xaff0a1){const _0x55a17f=_0x1cf2f2;return _0xaff0a1[_0x55a17f(0x15c)][_0x55a17f(0x155)]==_0x5e0270[_0x55a17f(0x155)];});_0x563928[_0x1cf2f2(0x126)]>0x0&&(_0x5169e0={'usersConnected':_0x563928[0x0]['usersConnected'],'usersConnections':_0x563928[0x0][_0x1cf2f2(0xff)],'usersSize':_0x563928[0x0]['usersSize'],'usersSpeed':_0x563928[0x0][_0x1cf2f2(0x173)]});if(_0x4da920[0x0]&&_0x4da920[0x0]['errors'])_0x5169e0[_0x1cf2f2(0xff)][_0x1cf2f2(0x120)](0x0),_0x5169e0[_0x1cf2f2(0x105)][_0x1cf2f2(0x120)](0x0),_0x5169e0[_0x1cf2f2(0xfe)]['push'](0x0),_0x5169e0[_0x1cf2f2(0x173)][_0x1cf2f2(0x120)](0x0);else{let _0x5d4784=[],_0x30af26=[],_0x1a8572=0x0,_0x54aa87=0x0;_0x4da920[_0x1cf2f2(0xfd)]((_0x3b1f2a,_0x40965e)=>{const _0x24a7df=_0x1cf2f2;let _0x2d75d9=_0x3b1f2a['username']=='-'?_0x3b1f2a['remote']:_0x3b1f2a['username'];_0x5d4784[_0x24a7df(0x14a)](_0x2d75d9)==-0x1?(_0x5d4784['push'](_0x2d75d9),_0x30af26['push']({'identifier':_0x2d75d9,'last_connection':new Date(),'is_lock':![],'server':_0x5e0270,'countbytediff':0x0,'uris':[_0x3b1f2a['uri']]})):(_0x30af26[_0x5d4784[_0x24a7df(0x14a)](_0x2d75d9)]['countbytediff']+=_0x3b1f2a[_0x24a7df(0xfc)],_0x30af26[_0x5d4784[_0x24a7df(0x14a)](_0x2d75d9)][_0x24a7df(0x150)][_0x24a7df(0x120)](_0x3b1f2a['uri'])),_0x1a8572+=_0x3b1f2a[_0x24a7df(0x101)],_0x54aa87+=_0x3b1f2a[_0x24a7df(0x14c)];}),updateSources(_0x30af26,_0x4ccc3e),_0x5169e0[_0x1cf2f2(0xff)][_0x1cf2f2(0x120)](_0x4da920['length']),_0x5169e0[_0x1cf2f2(0x105)][_0x1cf2f2(0x120)](_0x5d4784[_0x1cf2f2(0x126)]),_0x5169e0[_0x1cf2f2(0xfe)][_0x1cf2f2(0x120)](_0x1a8572),_0x5169e0['usersSpeed']['push'](_0x54aa87),_0x5169e0[_0x1cf2f2(0xff)]['length']>0x1e&&(_0x5169e0[_0x1cf2f2(0xff)][_0x1cf2f2(0x158)](),_0x5169e0[_0x1cf2f2(0x105)]['shift'](),_0x5169e0[_0x1cf2f2(0xfe)][_0x1cf2f2(0x158)](),_0x5169e0[_0x1cf2f2(0x173)][_0x1cf2f2(0x158)]());}_0x563928[_0x1cf2f2(0x126)]>0x0&&(serversData=serversData[_0x1cf2f2(0x11e)](function(_0x24498f){const _0x28aafc=_0x1cf2f2;return _0x24498f[_0x28aafc(0x15c)]['host']!==_0x5e0270[_0x28aafc(0x155)];})),serversData['push']({'server':_0x5e0270,'connections':_0x4da920,'usersConnected':_0x5169e0['usersConnected'],'usersConnections':_0x5169e0[_0x1cf2f2(0xff)],'usersSize':_0x5169e0[_0x1cf2f2(0xfe)],'usersSpeed':_0x5169e0[_0x1cf2f2(0x173)]}),_0x5e0270[_0x1cf2f2(0x148)]&&_0x4ccc3e['in']('receive\x20new\x20connections')[_0x1cf2f2(0x186)](_0x1cf2f2(0x132),{'server':_0x5e0270,'connections':_0x4da920,'usersConnected':_0x5169e0['usersConnected'],'usersConnections':_0x5169e0[_0x1cf2f2(0xff)],'usersSize':_0x5169e0['usersSize'],'usersSpeed':_0x5169e0['usersSpeed']});})),serversData;}else return[{'errors':[{'location':'getConnections','msg':'Lo\x20sentimos\x20no\x20se\x20encuentran\x20servidores\x20registrados','param':_0x53b49f(0x15e)}]}];}});exports[a9_0x28c422(0x130)]=getConnections;function execCommand(_0x394a88){return new Promise((_0x203548,_0x4d23d1)=>{exec(_0x394a88,{'timeout':0x1388},(_0x4459b8,_0x356517,_0x18a2a7)=>{const _0x16601f=a9_0x1731;if(_0x4459b8){if(_0x4459b8[_0x16601f(0x11b)])_0x203548(_0x16601f(0xf5));else _0x203548(_0x16601f(0x16f));}else{if(_0x18a2a7)_0x203548(_0x16601f(0x16f));else _0x203548(_0x356517);}});});}function updateSources(_0x448b97,_0x510a61){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2f9d2c=a9_0x1731;let _0x50a66a=yield Quota_1[_0x2f9d2c(0x184)][_0x2f9d2c(0x15f)]({'isdefault':!![]})[_0x2f9d2c(0x14b)](_0x2f9d2c(0xfb))['then'](_0x4e940c=>__awaiter(this,void 0x0,void 0x0,function*(){return _0x4e940c;}))[_0x2f9d2c(0x196)](_0x5ea739=>{return null;});_0x448b97[_0x2f9d2c(0x18b)]((_0x4751cf,_0x56612f)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x208b96=_0x2f9d2c;let _0x5d7621=_0x4751cf[_0x208b96(0x15c)][_0x208b96(0xfb)][_0x208b96(0x11e)](function(_0x5069ac){const _0x3b2361=_0x208b96;return _0x5069ac['identifier']==_0x4751cf[_0x3b2361(0x17e)];})[0x0];if(_0x5d7621){yield _0x5d7621[_0x208b96(0x14b)]('server')[_0x208b96(0x14b)](_0x208b96(0x189))[_0x208b96(0x14b)](_0x208b96(0x152))[_0x208b96(0x121)]();_0x5d7621['connection_notifies']&&_0x5d7621['connection_notifies'][_0x208b96(0x18b)]((_0x31d6c1,_0x30b7d9)=>{const _0x57a8d8=_0x208b96;if(_0x31d6c1[_0x57a8d8(0x13c)]==undefined){let _0x402ecb='';_0x4751cf[_0x57a8d8(0x150)][_0x57a8d8(0x18b)](_0x2afc37=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x50f618=_0x57a8d8;_0x2afc37[_0x50f618(0x13e)](_0x31d6c1[_0x50f618(0x191)])&&(_0x402ecb+='\x0a'+_0x2afc37,yield ConnectionNotify_1[_0x50f618(0xf3)][_0x50f618(0x108)][_0x50f618(0x18a)]({'_id':_0x31d6c1[_0x50f618(0x157)]},{'$set':{'notified':new Date()}}));})),_0x402ecb[_0x57a8d8(0x126)]>0x0&&handleNotify[_0x57a8d8(0x156)]({'subject':_0x57a8d8(0x129),'msg':_0x57a8d8(0x10a)+Useful_1[_0x57a8d8(0x104)][_0x57a8d8(0x17b)](_0x5d7621[_0x57a8d8(0x17e)])+'</b>\x20se\x20ha\x20conectado\x20a\x20sitios\x20que\x20contienen\x20'+_0x31d6c1['site']+'\x20detalles\x20de\x20los\x20sitios:\x20'+_0x402ecb});}});let _0x1deba5=_0x5d7621['quota']?_0x5d7621['quota']:_0x50a66a,_0x154b1d=_0x5d7621[_0x208b96(0x12b)]?_0x5d7621[_0x208b96(0x12b)]+_0x4751cf[_0x208b96(0xf0)]:_0x4751cf[_0x208b96(0xf0)],_0x3d0155={'last_connection':_0x4751cf[_0x208b96(0x16d)],'quota_consumed':_0x154b1d};!_0x5d7621[_0x208b96(0x178)]&&_0x1deba5!=null&&(_0x154b1d>=_0x1deba5[_0x208b96(0x161)]&&(_0x3d0155={'last_connection':_0x4751cf[_0x208b96(0x16d)],'quota_consumed':_0x154b1d,'is_lock':!![],'lock_date':new Date(),'lock_from':'auto'})),yield Source_1[_0x208b96(0x195)][_0x208b96(0x143)](_0x5d7621[_0x208b96(0x157)],_0x3d0155,{'new':!![]})[_0x208b96(0xf1)](_0x108290=>{const _0x102516=_0x208b96;if(_0x3d0155[_0x102516(0x178)]&&_0x5d7621[_0x102516(0x15c)][_0x102516(0x17c)]){let _0x244721='';if(Useful_1[_0x102516(0x104)]['isIPAddress'](_0x4751cf))_0x244721=_0x5d7621['server'][_0x102516(0x110)]?_0x5d7621['server']['routelockpc']:null;else _0x244721=_0x5d7621['server']['routelockuser']?_0x5d7621[_0x102516(0x15c)]['routelockuser']:null;if(_0x244721!=null){const _0x1520a4=new NodeSSH();_0x1520a4[_0x102516(0x18c)]({'host':_0x5d7621[_0x102516(0x15c)]['host'],'port':_0x5d7621[_0x102516(0x15c)][_0x102516(0x166)],'username':_0x5d7621[_0x102516(0x15c)]['sshuser'],'password':_0x5d7621['server'][_0x102516(0x180)]})['then'](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x1e1ec6=a9_0x1731;yield _0x1520a4[_0x1e1ec6(0x165)](_0x1e1ec6(0xf8)+_0x244721)[_0x1e1ec6(0xf1)](function(_0x46c843){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2671b0=a9_0x1731;if(_0x46c843[_0x2671b0(0x10c)]==''){let _0x273fea=_0x46c843[_0x2671b0(0x16e)][_0x2671b0(0x119)]('\x0a'),_0x51830c=_0x273fea[_0x2671b0(0x11e)](function(_0x3d2e55){const _0x3a04a6=_0x2671b0;return _0x3d2e55!=''&&_0x3d2e55==_0x5d7621[_0x3a04a6(0x17e)];});_0x51830c['length']==0x0&&(yield _0x1520a4[_0x2671b0(0x165)]('echo\x20\x22'+_0x5d7621['identifier']+_0x2671b0(0x18e)+_0x244721)[_0x2671b0(0xf1)](function(_0x353b0a){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x443df1=a9_0x1731;_0x353b0a['stderr']==''&&(yield _0x1520a4[_0x443df1(0x165)](_0x443df1(0xee))[_0x443df1(0xf1)](function(_0x56b055){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x177805=a9_0x1731;handleNotify[_0x177805(0x156)]({'subject':_0x177805(0x107),'msg':_0x177805(0x10a)+Useful_1['default']['parseSource'](_0x5d7621[_0x177805(0x17e)])+'</b>\x20ha\x20sido\x20automaticamente\x20bloqueado\x20por\x20exceder\x20el\x20límite\x20de\x20cuota\x20de\x20<b>'+Useful_1['default']['getSize'](_0x1deba5[_0x177805(0x161)])+'\x20'+Useful_1[_0x177805(0x104)][_0x177805(0x159)](_0x1deba5[_0x177805(0x125)])+_0x177805(0x174)}),_0x510a61[_0x177805(0x186)](_0x177805(0x106));return;});}));});}));}});});});})['catch'](_0x28a249=>{const _0x2f4d30=_0x102516;handleNotify[_0x2f4d30(0x156)]({'subject':_0x2f4d30(0x17f)+_0x5d7621[_0x2f4d30(0x15c)][_0x2f4d30(0x155)],'msg':_0x2f4d30(0x144)+_0x5d7621[_0x2f4d30(0x15c)][_0x2f4d30(0x155)]+_0x2f4d30(0x17d)+_0x5d7621[_0x2f4d30(0x17e)]+'\x20por\x20exceder\x20el\x20límite\x20de\x20cuota,\x20este\x20es\x20el\x20motivo\x20del\x20error:\x20'+_0x28a249['message']});});}}})[_0x208b96(0x196)](_0x598fee=>{return;});}else{let _0x174602=new Source_1[(_0x208b96(0x197))]({'identifier':_0x4751cf[_0x208b96(0x17e)],'last_connection':_0x4751cf['last_connection'],'is_lock':![]});_0x174602[_0x208b96(0x15c)]=_0x4751cf[_0x208b96(0x15c)][_0x208b96(0x157)];const _0x384f4e=new Source_1['Source'](_0x174602);_0x384f4e[_0x208b96(0x13f)]((_0x50d99d,_0x128e2b)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x529f61=_0x208b96;_0x4751cf[_0x529f61(0x15c)][_0x529f61(0xfb)][_0x529f61(0x120)](_0x128e2b),yield Server_1['Server']['findByIdAndUpdate'](_0x4751cf['server'][_0x529f61(0x157)],_0x4751cf[_0x529f61(0x15c)],{'new':!![]});}));}}));});}