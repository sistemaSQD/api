'use strict';const a82_0x2eb021=a82_0x91c7;(function(_0x655e4f,_0x589c5c){const _0x34813b=a82_0x91c7,_0xc3b933=_0x655e4f();while(!![]){try{const _0x222fc5=-parseInt(_0x34813b(0x163))/0x1+parseInt(_0x34813b(0x105))/0x2+parseInt(_0x34813b(0x180))/0x3*(-parseInt(_0x34813b(0x108))/0x4)+parseInt(_0x34813b(0x12d))/0x5+parseInt(_0x34813b(0x13e))/0x6*(-parseInt(_0x34813b(0x151))/0x7)+-parseInt(_0x34813b(0x194))/0x8*(-parseInt(_0x34813b(0x181))/0x9)+-parseInt(_0x34813b(0x17a))/0xa*(-parseInt(_0x34813b(0x16d))/0xb);if(_0x222fc5===_0x589c5c)break;else _0xc3b933['push'](_0xc3b933['shift']());}catch(_0x43a504){_0xc3b933['push'](_0xc3b933['shift']());}}}(a82_0x16bc,0xbe522));var __createBinding=this&&this[a82_0x2eb021(0x199)]||(Object[a82_0x2eb021(0x101)]?function(_0x4efbc4,_0x2b0925,_0x3a3e83,_0x4f08a5){const _0x57301f=a82_0x2eb021;if(_0x4f08a5===undefined)_0x4f08a5=_0x3a3e83;Object[_0x57301f(0x193)](_0x4efbc4,_0x4f08a5,{'enumerable':!![],'get':function(){return _0x2b0925[_0x3a3e83];}});}:function(_0x2cd9f0,_0x1fc3ba,_0xfb19b4,_0x74e28f){if(_0x74e28f===undefined)_0x74e28f=_0xfb19b4;_0x2cd9f0[_0x74e28f]=_0x1fc3ba[_0xfb19b4];}),__setModuleDefault=this&&this['__setModuleDefault']||(Object[a82_0x2eb021(0x101)]?function(_0xf240c6,_0x5d65ed){const _0x32fe81=a82_0x2eb021;Object[_0x32fe81(0x193)](_0xf240c6,_0x32fe81(0x15e),{'enumerable':!![],'value':_0x5d65ed});}:function(_0x20197b,_0x26d411){_0x20197b['default']=_0x26d411;}),__importStar=this&&this[a82_0x2eb021(0x124)]||function(_0x1db828){const _0x18af99=a82_0x2eb021;if(_0x1db828&&_0x1db828['__esModule'])return _0x1db828;var _0x492e2b={};if(_0x1db828!=null){for(var _0xe02afc in _0x1db828)if(_0xe02afc!=='default'&&Object[_0x18af99(0x19c)][_0x18af99(0x18b)]['call'](_0x1db828,_0xe02afc))__createBinding(_0x492e2b,_0x1db828,_0xe02afc);}return __setModuleDefault(_0x492e2b,_0x1db828),_0x492e2b;},__awaiter=this&&this[a82_0x2eb021(0x166)]||function(_0x18231c,_0x1c5bf8,_0x396c81,_0x58fec6){function _0x30f748(_0x56b646){return _0x56b646 instanceof _0x396c81?_0x56b646:new _0x396c81(function(_0x4e7e4c){_0x4e7e4c(_0x56b646);});}return new(_0x396c81||(_0x396c81=Promise))(function(_0x5a0860,_0xf9a6fe){const _0x5d8803=a82_0x91c7;function _0x2d5a39(_0x2521c8){try{_0x30beec(_0x58fec6['next'](_0x2521c8));}catch(_0x12d108){_0xf9a6fe(_0x12d108);}}function _0x399e3c(_0x133b94){try{_0x30beec(_0x58fec6['throw'](_0x133b94));}catch(_0x36e0c8){_0xf9a6fe(_0x36e0c8);}}function _0x30beec(_0xae43e4){const _0x52c3c8=a82_0x91c7;_0xae43e4[_0x52c3c8(0x162)]?_0x5a0860(_0xae43e4[_0x52c3c8(0x107)]):_0x30f748(_0xae43e4[_0x52c3c8(0x107)])[_0x52c3c8(0x114)](_0x2d5a39,_0x399e3c);}_0x30beec((_0x58fec6=_0x58fec6[_0x5d8803(0x125)](_0x18231c,_0x1c5bf8||[]))['next']());});},__importDefault=this&&this[a82_0x2eb021(0x182)]||function(_0x3475b1){const _0x31e2df=a82_0x2eb021;return _0x3475b1&&_0x3475b1[_0x31e2df(0x14c)]?_0x3475b1:{'default':_0x3475b1};};Object[a82_0x2eb021(0x193)](exports,a82_0x2eb021(0x14c),{'value':!![]}),exports[a82_0x2eb021(0x13f)]=exports[a82_0x2eb021(0x127)]=exports[a82_0x2eb021(0x185)]=exports[a82_0x2eb021(0x13a)]=exports[a82_0x2eb021(0x134)]=exports[a82_0x2eb021(0x158)]=exports['update']=exports[a82_0x2eb021(0x11a)]=exports[a82_0x2eb021(0x115)]=exports['register']=exports[a82_0x2eb021(0x157)]=exports[a82_0x2eb021(0x15c)]=void 0x0;const express_validator_1=require(a82_0x2eb021(0xff)),Server_1=require('../models/Server'),Source_1=require('../models/Source'),Quota_1=require(a82_0x2eb021(0x173)),ConnectionNotify_1=require(a82_0x2eb021(0x183)),LicenseController=__importStar(require(a82_0x2eb021(0x145))),handleNotify=__importStar(require('../handlers/handleNotify')),Useful_1=__importDefault(require(a82_0x2eb021(0x16e))),Cache_1=__importDefault(require(a82_0x2eb021(0x159))),{NodeSSH}=require('node-ssh'),parser=require('node-csv-parse'),exec=require(a82_0x2eb021(0x18f))['exec'];let serversData=[];function a82_0x16bc(){const _0x1f86f0=['serverldap','stderr','update','Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20estado\x20del\x20servidor','withMessage','Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20del\x20servidor','map','systemctl\x20status\x20squid','Lo\x20sentimos\x20no\x20se\x20pudo\x20establecer\x20conexión\x20SSH\x20con\x20el\x20servidor','__importStar','apply','is_lock','getConnectionsData','refreshSourcesLock','length','custom','json','find','2624805YTycja','sshpass','execCommand','notified','findOne','indexOf','shutdown','deleteServer','killed','catch','sort','quota','connection_notifies','statusServer','Se\x20ha\x20detenido\x20el\x20servicio\x20en\x20el\x20proxy\x20<b>','SourceInterface','</b>,\x20por\x20favor\x20compruebe\x20la\x20conexión','48486LCJHij','getConnections','notEmpty','validationResult','speed_value','\x20detalles\x20de\x20los\x20sitios:\x20','Error\x20en\x20la\x20conexión\x20ssh\x20del\x20servidor\x20','../controllers/license.controller','shift','test','host_found','cat\x20','cachepass','host','__esModule','\x22\x20>>\x20','receive\x20new\x20connections','Active:\x20','</b>\x20ha\x20sido\x20automaticamente\x20bloqueado\x20por\x20exceder\x20el\x20límite\x20de\x20cuota\x20de\x20<b>','42CJJiiH','log','Lo\x20sentimos\x20no\x20se\x20encuentran\x20servidores\x20registrados','Conexión\x20a\x20sitio','isIPAddress','Server','getServersById','activate','../models/Cache','<b>','get','getServers','split','default','body','</b>\x20se\x20ha\x20conectado\x20a\x20sitios\x20que\x20contienen\x20','updateOne','done','1273734WnuIdZ','sshuser','Source','__awaiter','Lo\x20sentimos\x20no\x20se\x20pudo\x20reiniciar\x20el\x20servidor','identifier','ConnectionNotify','register','sources','Lo\x20sentimos\x20este\x20servidor\x20no\x20tiene\x20conexión\x20SSH\x20registrada','7832SCBicD','../models/Useful','Se\x20ha\x20perdido\x20la\x20conexión\x20al\x20proxy\x20<b>','isEmpty','populate','countbytediff','../models/Quota','request','findOneAndDelete','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20de\x20los\x20servidores','uris','</b>\x20ha\x20comenzado\x20a\x20ejecutarse\x20correctamente','servers','22420RozSyI','Estado\x20del\x20servidor\x20','connection','stop','Se\x20ha\x20recuperado\x20la\x20conexión\x20al\x20proxy\x20<b>','emit','460203hOxmKs','9sWKnJg','__importDefault','../models/ConnectionNotify','status','restartServer','remote','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','host_not_is_ip','ssh','check','hasOwnProperty','bytes','getSize','stdout','child_process','app','quota_consumed','squidclient\x20-h\x20','defineProperty','1240072dPckjt','findById','sendNotify','_id','push','__createBinding','run','active','prototype','checkLicense','usersSpeed','Quota','\x20-p\x20','last_connection','server','parseSource','usersConnections','username','uri','site','savedserver','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20regostrado','execPopulate','filter','proxyConnections','usersConnected','convertQuotaType','port','findByIdAndUpdate','express-validator','collection','create','routelockuser','\x20mgr:active_requests@','reject','1798614ZOsieS','connect','value','28LRDhwQ','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20servidor','params','delete','\x20mgr:delay@','routelockpc','splice','</b>','sshport','Lo\x20sentimos\x20no\x20se\x20pudieron\x20actualizar\x20los\x20datos\x20SSH\x20del\x20servidor','findByIdAndDelete','usersSize','then','setSSHConnection','limit','byteDiff','findserver','Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20registrado','deleteSSHConnection'];a82_0x16bc=function(){return _0x1f86f0;};return a82_0x16bc();}const getServers=(_0x27f199,_0xbe472e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xf95310=a82_0x2eb021;let _0x4e6f23=yield Server_1[_0xf95310(0x156)][_0xf95310(0x12c)]()[_0xf95310(0x114)](_0x4b7be8=>{return _0x4b7be8;})[_0xf95310(0x136)](_0x33e135=>{const _0x5bcd34=_0xf95310;return{'errors':[{'location':_0x5bcd34(0x15c),'msg':_0x5bcd34(0x176),'param':_0x5bcd34(0x179)}]};});return _0x4e6f23[_0xf95310(0x137)]((_0x449704,_0x48a9f3)=>_0x48a9f3[_0xf95310(0x19b)]-_0x449704[_0xf95310(0x19b)]),_0xbe472e[_0xf95310(0x12b)](_0x4e6f23);});function a82_0x91c7(_0x1321c2,_0x2a17d6){const _0x16bc6d=a82_0x16bc();return a82_0x91c7=function(_0x91c72c,_0x3ff114){_0x91c72c=_0x91c72c-0xff;let _0x4f4653=_0x16bc6d[_0x91c72c];return _0x4f4653;},a82_0x91c7(_0x1321c2,_0x2a17d6);}exports['getServers']=getServers;const getServersById=(_0x2e8274,_0x3088fc)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x480829=a82_0x2eb021;let _0x171231=yield Server_1[_0x480829(0x156)]['findById'](_0x2e8274[_0x480829(0x15f)]['id'])[_0x480829(0x171)](_0x480829(0x11b))['then'](_0x202244=>{return _0x202244;})[_0x480829(0x136)](_0x1a7c8e=>{const _0x492893=_0x480829;return{'errors':[{'location':'getServers','msg':_0x492893(0x187),'param':_0x492893(0x179)}]};});return _0x3088fc[_0x480829(0x12b)](_0x171231);});exports['getServersById']=getServersById;const register=(_0x5a9635,_0x37425e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x314451=a82_0x2eb021;yield express_validator_1[_0x314451(0x18a)]('host')[_0x314451(0x140)]()[_0x314451(0x11f)]('host_empty')['run'](_0x5a9635);const _0x45e7b4=_0x113de2=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x428afb=_0x314451;if(!/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/[_0x428afb(0x147)](_0x5a9635[_0x428afb(0x15f)][_0x428afb(0x14b)]))return Promise['reject'](_0x428afb(0x188));}),_0x3a298a=_0x4d11cc=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x479b3b=_0x314451;return yield Server_1['Server'][_0x479b3b(0x131)]({'host':_0x5a9635[_0x479b3b(0x15f)][_0x479b3b(0x14b)]})[_0x479b3b(0x114)](_0x46874e=>{const _0x19aa6d=_0x479b3b;if(_0x46874e)return Promise[_0x19aa6d(0x104)](_0x19aa6d(0x148));});});yield express_validator_1[_0x314451(0x18a)](_0x314451(0x14b))[_0x314451(0x12a)](_0x45e7b4)[_0x314451(0x19a)](_0x5a9635),yield express_validator_1[_0x314451(0x18a)](_0x314451(0x14b))[_0x314451(0x12a)](_0x3a298a)[_0x314451(0x19a)](_0x5a9635);const _0x570613=express_validator_1[_0x314451(0x141)](_0x5a9635);if(!_0x570613[_0x314451(0x170)]())return _0x37425e[_0x314451(0x12b)]({'errors':_0x570613['array']()});let _0x3ddb2d=yield Server_1[_0x314451(0x156)]['findOne']({'active':!![]})[_0x314451(0x114)](_0x20b5fc=>{if(_0x20b5fc)return![];else return!![];}),_0x38c197=new Server_1['ServerInterface']({'host':_0x5a9635['body'][_0x314451(0x14b)],'port':_0x5a9635['body'][_0x314451(0x1af)],'cachepass':_0x5a9635[_0x314451(0x15f)][_0x314451(0x14a)],'active':_0x3ddb2d});return yield Server_1['Server'][_0x314451(0x101)](_0x38c197,(_0x5d7712,_0x3698d3)=>{const _0x33e409=_0x314451;if(_0x5d7712)return _0x37425e[_0x33e409(0x12b)]({'errors':[{'location':_0x33e409(0x16a),'msg':_0x33e409(0x109),'param':_0x33e409(0x1a8)}]});else return _0x37425e[_0x33e409(0x12b)](_0x3698d3);});});exports[a82_0x2eb021(0x16a)]=register;const setSSHConnection=(_0x5a7ad2,_0x31cee1)=>{const _0x28c3b1=a82_0x2eb021;Server_1[_0x28c3b1(0x156)]['findById'](_0x5a7ad2[_0x28c3b1(0x10a)]['id'])[_0x28c3b1(0x114)](_0x26faeb=>{const _0x7afbcc=_0x28c3b1;if(_0x26faeb){const _0x12a4e9=new NodeSSH();_0x12a4e9[_0x7afbcc(0x106)]({'host':_0x26faeb[_0x7afbcc(0x14b)],'port':_0x5a7ad2[_0x7afbcc(0x15f)]['sshport'],'username':_0x5a7ad2[_0x7afbcc(0x15f)][_0x7afbcc(0x164)],'password':_0x5a7ad2[_0x7afbcc(0x15f)][_0x7afbcc(0x12e)]})[_0x7afbcc(0x114)](function(){const _0x2035d9=_0x7afbcc;Server_1['Server'][_0x2035d9(0x1b0)](_0x5a7ad2[_0x2035d9(0x10a)]['id'],_0x5a7ad2[_0x2035d9(0x15f)],{'new':!![]})[_0x2035d9(0x114)](_0x528289=>{return _0x31cee1['json'](_0x528289);})[_0x2035d9(0x136)](_0xc3d29b=>{const _0x5fac7d=_0x2035d9;return _0x31cee1[_0x5fac7d(0x12b)]({'errors':[{'location':_0x5fac7d(0x11d),'msg':_0x5fac7d(0x111),'param':_0x5fac7d(0x17c)}]});});})[_0x7afbcc(0x136)](_0x303d04=>{const _0x34dcf3=_0x7afbcc;return _0x31cee1[_0x34dcf3(0x12b)]({'errors':[{'location':_0x34dcf3(0x189),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20establecer\x20conexión\x20SSH\x20con\x20el\x20servidor','param':'connection'}]});});}else return _0x31cee1[_0x7afbcc(0x12b)]({'errors':[{'location':_0x7afbcc(0x115),'msg':_0x7afbcc(0x119),'param':_0x7afbcc(0x14b)}]});})[_0x28c3b1(0x136)](_0x2ecbdc=>{const _0x271d2a=_0x28c3b1;return _0x31cee1[_0x271d2a(0x12b)]({'errors':[{'location':_0x271d2a(0x115),'msg':_0x271d2a(0x187),'param':'findserver'}]});});};exports['setSSHConnection']=setSSHConnection;const deleteSSHConnection=(_0x4eb840,_0x35c437)=>{const _0x590476=a82_0x2eb021;Server_1[_0x590476(0x156)][_0x590476(0x195)](_0x4eb840[_0x590476(0x10a)]['id'])[_0x590476(0x114)](_0x1bcd5b=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x34d2a5=_0x590476;return _0x1bcd5b?_0x1bcd5b[_0x34d2a5(0x164)]?(yield Server_1[_0x34d2a5(0x156)][_0x34d2a5(0x100)][_0x34d2a5(0x161)]({'_id':_0x1bcd5b[_0x34d2a5(0x197)]},{'$unset':{'sshuser':0x1,'sshport':0x1,'sshpass':0x1}}),_0x35c437[_0x34d2a5(0x12b)](_0x1bcd5b)):_0x35c437[_0x34d2a5(0x12b)]({'errors':[{'location':'setSSHConnection','msg':_0x34d2a5(0x16c),'param':_0x34d2a5(0x14b)}]}):_0x35c437[_0x34d2a5(0x12b)]({'errors':[{'location':'setSSHConnection','msg':_0x34d2a5(0x119),'param':_0x34d2a5(0x14b)}]});}))[_0x590476(0x136)](_0xdc7174=>{const _0x2f9c1d=_0x590476;return _0x35c437[_0x2f9c1d(0x12b)]({'errors':[{'location':_0x2f9c1d(0x115),'msg':_0x2f9c1d(0x187),'param':_0x2f9c1d(0x118)}]});});};exports[a82_0x2eb021(0x11a)]=deleteSSHConnection;const update=(_0x35a2a9,_0xe101d3)=>{const _0x7ff4de=a82_0x2eb021;Server_1[_0x7ff4de(0x156)]['findById'](_0x35a2a9['params']['id'])['then'](_0x3243fd=>{const _0x9f36ac=_0x7ff4de;if(_0x3243fd)Server_1[_0x9f36ac(0x156)]['findByIdAndUpdate'](_0x35a2a9['params']['id'],_0x35a2a9[_0x9f36ac(0x15f)],{'new':!![]})[_0x9f36ac(0x114)](_0x22a943=>{const _0x46754d=_0x9f36ac;return _0xe101d3[_0x46754d(0x12b)](_0x22a943);})[_0x9f36ac(0x136)](_0x510a4c=>{const _0x2a182b=_0x9f36ac;return _0xe101d3[_0x2a182b(0x12b)]({'errors':[{'location':'update','msg':_0x2a182b(0x120),'param':_0x2a182b(0x17c)}]});});else return _0xe101d3[_0x9f36ac(0x12b)]({'errors':[{'location':'update','msg':_0x9f36ac(0x119),'param':_0x9f36ac(0x14b)}]});})['catch'](_0x555378=>{const _0x55b25c=_0x7ff4de;return _0xe101d3[_0x55b25c(0x12b)]({'errors':[{'location':'update','msg':_0x55b25c(0x187),'param':_0x55b25c(0x118)}]});});};exports['update']=update;const activate=(_0x35f596,_0x7694f1)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x301563=a82_0x2eb021;yield Server_1[_0x301563(0x156)][_0x301563(0x195)](_0x35f596['params']['id'])[_0x301563(0x114)](_0x242989=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x32b8c3=_0x301563;if(_0x242989)yield Server_1[_0x32b8c3(0x156)][_0x32b8c3(0x131)]({'active':!![]})[_0x32b8c3(0x114)](_0x524876=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5ebd81=_0x32b8c3;_0x524876&&_0x524876[_0x5ebd81(0x197)]!=_0x242989[_0x5ebd81(0x197)]&&(yield Server_1[_0x5ebd81(0x156)][_0x5ebd81(0x1b0)](_0x524876['id'],{'active':![]},{'new':!![]}));})),yield Server_1['Server'][_0x32b8c3(0x1b0)](_0x35f596[_0x32b8c3(0x10a)]['id'],{'active':!![]},{'new':!![]})['then'](_0x4f6ed8=>{const _0x36f860=_0x32b8c3;return _0x7694f1[_0x36f860(0x12b)](_0x4f6ed8);});else return _0x7694f1['json']({'errors':[{'location':_0x32b8c3(0x158),'msg':_0x32b8c3(0x1a9),'param':_0x32b8c3(0x14b)}]});}))[_0x301563(0x136)](_0x566ded=>{const _0x5daa20=_0x301563;return _0x7694f1['json']({'errors':[{'location':_0x5daa20(0x158),'msg':_0x5daa20(0x187),'param':_0x5daa20(0x118)}]});});});exports[a82_0x2eb021(0x158)]=activate;const deleteServer=(_0x59d0e3,_0xb35c21)=>{const _0x5c7095=a82_0x2eb021;Server_1[_0x5c7095(0x156)][_0x5c7095(0x195)](_0x59d0e3[_0x5c7095(0x10a)]['id'])['populate']('sources')[_0x5c7095(0x114)](_0x4e9432=>{const _0x170b17=_0x5c7095;if(_0x4e9432)_0x4e9432[_0x170b17(0x16b)]&&_0x4e9432[_0x170b17(0x16b)][_0x170b17(0x121)]((_0x33fe2f,_0x256db1)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4e9623=_0x170b17;yield _0x33fe2f[_0x4e9623(0x171)](_0x4e9623(0x138))[_0x4e9623(0x171)](_0x4e9623(0x139))[_0x4e9623(0x1aa)]();_0x33fe2f['connection_notifies'][_0x4e9623(0x129)]>0x0&&(console[_0x4e9623(0x152)](_0x33fe2f[_0x4e9623(0x139)]['length']),_0x33fe2f[_0x4e9623(0x139)]['map']((_0x2a4d59,_0xd7105f)=>{const _0x41ec4d=_0x4e9623;ConnectionNotify_1[_0x41ec4d(0x169)][_0x41ec4d(0x100)][_0x41ec4d(0x175)]({'_id':_0x2a4d59[_0x41ec4d(0x197)]});}));if(_0x33fe2f['quota']){let _0x2ac07f=yield _0x33fe2f[_0x4e9623(0x138)][_0x4e9623(0x171)](_0x4e9623(0x16b))[_0x4e9623(0x1aa)]();_0x2ac07f[_0x4e9623(0x16b)][_0x4e9623(0x121)]((_0x4d688a,_0x1f49cd)=>{const _0x47c272=_0x4e9623;if(_0x4d688a['identifier']==_0x33fe2f['identifier']){let _0x8fc16e=_0x2ac07f[_0x47c272(0x16b)][_0x47c272(0x10e)](_0x1f49cd,0x0);Quota_1['Quota'][_0x47c272(0x100)][_0x47c272(0x161)]({'_id':_0x33fe2f[_0x47c272(0x138)][_0x47c272(0x197)]},{'$set':{'sources':_0x8fc16e}});}return _0x4d688a;});}return Source_1[_0x4e9623(0x165)][_0x4e9623(0x100)][_0x4e9623(0x175)]({'_id':_0x33fe2f[_0x4e9623(0x197)]}),_0x33fe2f;})),Server_1['Server'][_0x170b17(0x112)](_0x59d0e3['params']['id'])[_0x170b17(0x114)](()=>{const _0x4840eb=_0x170b17;return _0xb35c21[_0x4840eb(0x12b)](_0x4e9432);})[_0x170b17(0x136)](_0x16dceb=>{const _0x403cd6=_0x170b17;return _0xb35c21[_0x403cd6(0x12b)]({'errors':[{'location':_0x403cd6(0x11d),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20servidor','param':_0x403cd6(0x17c)}]});});else return _0xb35c21['json']({'errors':[{'location':_0x170b17(0x10b),'msg':'Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20registrado','param':_0x170b17(0x14b)}]});})[_0x5c7095(0x136)](_0x39d124=>{const _0x47c597=_0x5c7095;return _0xb35c21['json']({'errors':[{'location':'delete','msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','param':_0x47c597(0x118)}]});});};exports[a82_0x2eb021(0x134)]=deleteServer;const statusServer=(_0x4cbd7d,_0x9b3404)=>{const _0x476008=a82_0x2eb021;Server_1[_0x476008(0x156)][_0x476008(0x195)](_0x4cbd7d['params']['id'])[_0x476008(0x114)](_0x2dd79a=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3edc6b=_0x476008;if(_0x2dd79a){if(_0x2dd79a[_0x3edc6b(0x164)]){const _0x51b902=new NodeSSH();yield _0x51b902['connect']({'host':_0x2dd79a[_0x3edc6b(0x14b)],'port':_0x2dd79a[_0x3edc6b(0x110)],'username':_0x2dd79a['sshuser'],'password':_0x2dd79a[_0x3edc6b(0x12e)]})[_0x3edc6b(0x114)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5a97e7=a82_0x91c7;yield _0x51b902[_0x5a97e7(0x12f)]('systemctl\x20status\x20squid')['then'](function(_0x28b190){const _0x571cf3=_0x5a97e7;if(_0x28b190[_0x571cf3(0x11c)]!='')return _0x9b3404[_0x571cf3(0x12b)]({'errors':[{'location':'statusServer','msg':_0x571cf3(0x11e),'param':'connection'}]});else{let _0x574981=_0x28b190[_0x571cf3(0x18e)][_0x571cf3(0x15d)](_0x571cf3(0x14f))[0x1][_0x571cf3(0x15d)]('\x20')[0x0];return _0x9b3404['json']({'status':_0x574981,'detail':_0x28b190[_0x571cf3(0x18e)]});}})[_0x5a97e7(0x136)](_0x21d875=>{const _0x5ec19a=_0x5a97e7;return _0x9b3404[_0x5ec19a(0x12b)]({'errors':[{'location':_0x5ec19a(0x13a),'msg':_0x5ec19a(0x11e),'param':_0x5ec19a(0x17c)}]});});});})[_0x3edc6b(0x136)](_0x5e1afd=>{const _0x5341c1=_0x3edc6b;return _0x9b3404['json']({'errors':[{'location':_0x5341c1(0x13a),'msg':_0x5341c1(0x123),'param':'connection'}]});});}else return _0x9b3404[_0x3edc6b(0x12b)]({'errors':[{'location':_0x3edc6b(0x13a),'msg':_0x3edc6b(0x16c),'param':_0x3edc6b(0x17c)}]});}else return _0x9b3404['json']({'errors':[{'location':_0x3edc6b(0x13a),'msg':_0x3edc6b(0x119),'param':_0x3edc6b(0x14b)}]});}))['catch'](_0x5ad647=>{const _0x7e253e=_0x476008;return _0x9b3404[_0x7e253e(0x12b)]({'errors':[{'location':_0x7e253e(0x13a),'msg':_0x7e253e(0x187),'param':'findserver'}]});});};exports[a82_0x2eb021(0x13a)]=statusServer;const restartServer=(_0x4cd1d5,_0x35cd0e)=>{const _0x2e6abd=a82_0x2eb021;Server_1[_0x2e6abd(0x156)]['findById'](_0x4cd1d5[_0x2e6abd(0x10a)]['id'])[_0x2e6abd(0x114)](_0x1ceb49=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1b3f75=_0x2e6abd;if(_0x1ceb49){if(_0x1ceb49['sshuser']){const _0x2f05a4=new NodeSSH();yield _0x2f05a4['connect']({'host':_0x1ceb49[_0x1b3f75(0x14b)],'port':_0x1ceb49[_0x1b3f75(0x110)],'username':_0x1ceb49[_0x1b3f75(0x164)],'password':_0x1ceb49[_0x1b3f75(0x12e)]})['then'](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x55534d=a82_0x91c7;yield _0x2f05a4['execCommand']('systemctl\x20restart\x20squid')[_0x55534d(0x114)](function(_0x487811){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x2cbdec=a82_0x91c7;if(_0x487811['stderr']!='')return _0x35cd0e[_0x2cbdec(0x12b)]({'errors':[{'location':_0x2cbdec(0x185),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20reiniciar\x20el\x20servidor','param':_0x2cbdec(0x17c)}]});else yield _0x2f05a4['execCommand'](_0x2cbdec(0x122))[_0x2cbdec(0x114)](function(_0xe13bf){const _0x369028=_0x2cbdec;if(_0xe13bf[_0x369028(0x11c)]!='')return _0x35cd0e['json']({'errors':[{'location':_0x369028(0x185),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20comprobar\x20el\x20estado\x20del\x20servidor','param':_0x369028(0x17c)}]});else{let _0x7225af=_0xe13bf['stdout'][_0x369028(0x15d)](_0x369028(0x14f))[0x1][_0x369028(0x15d)]('\x20')[0x0];return _0x35cd0e[_0x369028(0x12b)]({'status':_0x7225af,'detail':_0xe13bf['stdout']});}})[_0x2cbdec(0x136)](_0x2ff762=>{const _0x5eccce=_0x2cbdec;return _0x35cd0e[_0x5eccce(0x12b)]({'errors':[{'location':_0x5eccce(0x185),'msg':_0x5eccce(0x11e),'param':_0x5eccce(0x17c)}]});});});})[_0x55534d(0x136)](_0x1776dc=>{const _0x51008a=_0x55534d;return _0x35cd0e[_0x51008a(0x12b)]({'errors':[{'location':'restartServer','msg':_0x51008a(0x167),'param':_0x51008a(0x17c)}]});});});})[_0x1b3f75(0x136)](_0x2f4d6f=>{const _0x5ef2ca=_0x1b3f75;return _0x35cd0e[_0x5ef2ca(0x12b)]({'errors':[{'location':_0x5ef2ca(0x185),'msg':_0x5ef2ca(0x123),'param':_0x5ef2ca(0x17c)}]});});}else return _0x35cd0e[_0x1b3f75(0x12b)]({'errors':[{'location':_0x1b3f75(0x13a),'msg':'Lo\x20sentimos\x20este\x20servidor\x20no\x20tiene\x20conexión\x20SSH\x20registrada','param':_0x1b3f75(0x17c)}]});}else return _0x35cd0e[_0x1b3f75(0x12b)]({'errors':[{'location':'restartServer','msg':'Lo\x20sentimos\x20este\x20servidor\x20no\x20se\x20encuentra\x20registrado','param':_0x1b3f75(0x14b)}]});}))['catch'](_0x333431=>{const _0x6635e9=_0x2e6abd;return _0x35cd0e['json']({'errors':[{'location':_0x6635e9(0x185),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20servidor','param':'findserver'}]});});};exports[a82_0x2eb021(0x185)]=restartServer;const getConnectionsData=(_0x152358,_0x2ac70d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x33d97d=a82_0x2eb021,_0x3cab95=_0x152358[_0x33d97d(0x190)][_0x33d97d(0x15b)]('socketio');return yield exports[_0x33d97d(0x13f)](_0x3cab95),_0x2ac70d[_0x33d97d(0x12b)](serversData);});exports[a82_0x2eb021(0x127)]=getConnectionsData;const getConnections=_0x1c8242=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x59007b=a82_0x2eb021;let _0x2c0950=yield LicenseController[_0x59007b(0x19d)]();_0x1c8242['in'](_0x59007b(0x14e))[_0x59007b(0x17f)]('updateLicense',{'license':_0x2c0950});if(_0x2c0950[_0x59007b(0x184)]){let _0x4e3148=yield Server_1[_0x59007b(0x156)][_0x59007b(0x12c)]()[_0x59007b(0x171)](_0x59007b(0x16b))['then'](_0x36dd2f=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x36dd2f;}));if(_0x4e3148[_0x59007b(0x129)]>0x0){const _0x13b475=new Cache_1[(_0x59007b(0x15e))]();return _0x4e3148[_0x59007b(0x121)]((_0x5a6a07,_0x43eec3)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4eed0c=_0x59007b,_0x1a6398=yield execCommand(_0x4eed0c(0x192)+_0x5a6a07[_0x4eed0c(0x14b)]+_0x4eed0c(0x1a0)+_0x5a6a07[_0x4eed0c(0x1af)]+_0x4eed0c(0x103)+_0x5a6a07[_0x4eed0c(0x14a)]),_0x428546=yield execCommand(_0x4eed0c(0x192)+_0x5a6a07['host']+_0x4eed0c(0x1a0)+_0x5a6a07[_0x4eed0c(0x1af)]+_0x4eed0c(0x10c)+_0x5a6a07[_0x4eed0c(0x14a)]),_0x5b8f05=_0x13b475['extractConnections'](_0x1a6398,_0x428546);let _0x3269d7=_0x1a6398==_0x4eed0c(0x133)||_0x1a6398=='stop'?_0x1a6398:'active',_0x18932c=_0x5a6a07[_0x4eed0c(0x184)]!==undefined&&_0x5a6a07[_0x4eed0c(0x184)]=='stop'&&_0x3269d7==_0x4eed0c(0x19b);if(_0x5a6a07[_0x4eed0c(0x184)]==undefined||_0x5a6a07[_0x4eed0c(0x184)]!==_0x3269d7){yield Server_1['Server'][_0x4eed0c(0x100)]['updateOne']({'_id':_0x5a6a07['_id']},{'$set':{'status':_0x3269d7}});let _0x39f2f2=_0x3269d7=='shutdown'?_0x4eed0c(0x16f)+_0x5a6a07[_0x4eed0c(0x14b)]+_0x4eed0c(0x13d):_0x3269d7==_0x4eed0c(0x17d)?_0x4eed0c(0x13b)+_0x5a6a07[_0x4eed0c(0x14b)]+_0x4eed0c(0x10f):_0x18932c?'El\x20servicio\x20en\x20el\x20proxy\x20<b>'+_0x5a6a07[_0x4eed0c(0x14b)]+_0x4eed0c(0x178):_0x4eed0c(0x17e)+_0x5a6a07[_0x4eed0c(0x14b)]+_0x4eed0c(0x10f);handleNotify[_0x4eed0c(0x196)]({'subject':_0x4eed0c(0x17b)+_0x5a6a07[_0x4eed0c(0x14b)],'msg':_0x39f2f2});}let _0x50c7dc={'usersConnected':[0x0,0x0],'usersConnections':[0x0,0x0],'usersSize':[0x0,0x0],'usersSpeed':[0x0,0x0]},_0x8cfe9b=serversData[_0x4eed0c(0x1ab)](function(_0x4f9ec4){const _0x4aea7c=_0x4eed0c;return _0x4f9ec4[_0x4aea7c(0x1a2)]['host']==_0x5a6a07[_0x4aea7c(0x14b)];});_0x8cfe9b['length']>0x0&&(_0x50c7dc={'usersConnected':_0x8cfe9b[0x0]['usersConnected'],'usersConnections':_0x8cfe9b[0x0]['usersConnections'],'usersSize':_0x8cfe9b[0x0][_0x4eed0c(0x113)],'usersSpeed':_0x8cfe9b[0x0][_0x4eed0c(0x19e)]});if(_0x5b8f05[0x0]&&_0x5b8f05[0x0]['errors'])_0x50c7dc['usersConnections']['push'](0x0),_0x50c7dc[_0x4eed0c(0x1ad)][_0x4eed0c(0x198)](0x0),_0x50c7dc[_0x4eed0c(0x113)][_0x4eed0c(0x198)](0x0),_0x50c7dc[_0x4eed0c(0x19e)][_0x4eed0c(0x198)](0x0);else{let _0xace747=[],_0x2a3884=[],_0x390982=0x0,_0x4a8c67=0x0;_0x5b8f05['forEach']((_0x1e7576,_0x3f7baf)=>{const _0x8296f6=_0x4eed0c;let _0x317c67=_0x1e7576['username']=='-'?_0x1e7576[_0x8296f6(0x186)]:_0x1e7576[_0x8296f6(0x1a5)];_0xace747['indexOf'](_0x317c67)==-0x1?(_0xace747[_0x8296f6(0x198)](_0x317c67),_0x2a3884[_0x8296f6(0x198)]({'identifier':_0x317c67,'last_connection':new Date(),'is_lock':![],'server':_0x5a6a07,'countbytediff':0x0,'uris':[_0x1e7576[_0x8296f6(0x1a6)]]})):(_0x2a3884[_0xace747['indexOf'](_0x317c67)]['countbytediff']+=_0x1e7576[_0x8296f6(0x117)],_0x2a3884[_0xace747[_0x8296f6(0x132)](_0x317c67)][_0x8296f6(0x177)][_0x8296f6(0x198)](_0x1e7576[_0x8296f6(0x1a6)])),_0x390982+=_0x1e7576[_0x8296f6(0x18c)],_0x4a8c67+=_0x1e7576[_0x8296f6(0x142)];}),updateSources(_0x2a3884,_0x1c8242),_0x50c7dc[_0x4eed0c(0x1a4)]['push'](_0x5b8f05[_0x4eed0c(0x129)]),_0x50c7dc[_0x4eed0c(0x1ad)][_0x4eed0c(0x198)](_0xace747[_0x4eed0c(0x129)]),_0x50c7dc[_0x4eed0c(0x113)][_0x4eed0c(0x198)](_0x390982),_0x50c7dc['usersSpeed'][_0x4eed0c(0x198)](_0x4a8c67),_0x50c7dc['usersConnections'][_0x4eed0c(0x129)]>0x1e&&(_0x50c7dc[_0x4eed0c(0x1a4)][_0x4eed0c(0x146)](),_0x50c7dc[_0x4eed0c(0x1ad)][_0x4eed0c(0x146)](),_0x50c7dc['usersSize']['shift'](),_0x50c7dc[_0x4eed0c(0x19e)][_0x4eed0c(0x146)]());}_0x8cfe9b[_0x4eed0c(0x129)]>0x0&&(serversData=serversData['filter'](function(_0x21b593){const _0x144cb3=_0x4eed0c;return _0x21b593[_0x144cb3(0x1a2)][_0x144cb3(0x14b)]!==_0x5a6a07[_0x144cb3(0x14b)];})),serversData[_0x4eed0c(0x198)]({'server':_0x5a6a07,'connections':_0x5b8f05,'usersConnected':_0x50c7dc['usersConnected'],'usersConnections':_0x50c7dc['usersConnections'],'usersSize':_0x50c7dc[_0x4eed0c(0x113)],'usersSpeed':_0x50c7dc[_0x4eed0c(0x19e)]}),_0x5a6a07[_0x4eed0c(0x19b)]&&_0x1c8242['in'](_0x4eed0c(0x14e))[_0x4eed0c(0x17f)](_0x4eed0c(0x1ac),{'server':_0x5a6a07,'connections':_0x5b8f05,'usersConnected':_0x50c7dc[_0x4eed0c(0x1ad)],'usersConnections':_0x50c7dc[_0x4eed0c(0x1a4)],'usersSize':_0x50c7dc[_0x4eed0c(0x113)],'usersSpeed':_0x50c7dc[_0x4eed0c(0x19e)]});})),serversData;}else return[{'errors':[{'location':'getConnections','msg':_0x59007b(0x153),'param':_0x59007b(0x174)}]}];}});exports[a82_0x2eb021(0x13f)]=getConnections;function execCommand(_0x1015a1){return new Promise((_0x3afb45,_0x261e51)=>{exec(_0x1015a1,{'timeout':0x1388},(_0x5b8adb,_0x4dad0f,_0x544321)=>{const _0x4e435b=a82_0x91c7;if(_0x5b8adb){if(_0x5b8adb[_0x4e435b(0x135)])_0x3afb45(_0x4e435b(0x133));else _0x3afb45(_0x4e435b(0x17d));}else{if(_0x544321)_0x3afb45('stop');else _0x3afb45(_0x4dad0f);}});});}function updateSources(_0x435596,_0x4908fe){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x4b57c2=a82_0x91c7;let _0x738105=yield Quota_1[_0x4b57c2(0x19f)]['findOne']({'isdefault':!![]})[_0x4b57c2(0x171)](_0x4b57c2(0x16b))[_0x4b57c2(0x114)](_0x4e200e=>__awaiter(this,void 0x0,void 0x0,function*(){return _0x4e200e;}))[_0x4b57c2(0x136)](_0x7b669b=>{return null;});_0x435596[_0x4b57c2(0x121)]((_0x86132a,_0x4c9036)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x1b1076=_0x4b57c2;let _0x8a4b15=_0x86132a['server'][_0x1b1076(0x16b)][_0x1b1076(0x1ab)](function(_0x2c34dd){const _0x16c216=_0x1b1076;return _0x2c34dd['identifier']==_0x86132a[_0x16c216(0x168)];})[0x0];if(_0x8a4b15){yield _0x8a4b15[_0x1b1076(0x171)](_0x1b1076(0x1a2))[_0x1b1076(0x171)](_0x1b1076(0x138))[_0x1b1076(0x171)](_0x1b1076(0x139))[_0x1b1076(0x1aa)]();_0x8a4b15[_0x1b1076(0x139)]&&_0x8a4b15[_0x1b1076(0x139)][_0x1b1076(0x121)]((_0xa3ce16,_0x510a3c)=>{const _0x455c00=_0x1b1076;if(_0xa3ce16[_0x455c00(0x130)]==undefined){let _0x5078e7='';_0x86132a[_0x455c00(0x177)][_0x455c00(0x121)](_0x62ca6d=>__awaiter(this,void 0x0,void 0x0,function*(){const _0xf7c589=_0x455c00;_0x62ca6d['includes'](_0xa3ce16[_0xf7c589(0x1a7)])&&(_0x5078e7+='\x0a'+_0x62ca6d,yield ConnectionNotify_1['ConnectionNotify'][_0xf7c589(0x100)][_0xf7c589(0x161)]({'_id':_0xa3ce16[_0xf7c589(0x197)]},{'$set':{'notified':new Date()}}));})),_0x5078e7[_0x455c00(0x129)]>0x0&&handleNotify[_0x455c00(0x196)]({'subject':_0x455c00(0x154),'msg':_0x455c00(0x15a)+Useful_1[_0x455c00(0x15e)][_0x455c00(0x1a3)](_0x8a4b15[_0x455c00(0x168)])+_0x455c00(0x160)+_0xa3ce16[_0x455c00(0x1a7)]+_0x455c00(0x143)+_0x5078e7});}});let _0x154572=_0x8a4b15[_0x1b1076(0x138)]?_0x8a4b15[_0x1b1076(0x138)]:_0x738105,_0x59bed3=_0x8a4b15[_0x1b1076(0x191)]?_0x8a4b15[_0x1b1076(0x191)]+_0x86132a[_0x1b1076(0x172)]:_0x86132a[_0x1b1076(0x172)],_0x1c934e={'last_connection':_0x86132a[_0x1b1076(0x1a1)],'quota_consumed':_0x59bed3};!_0x8a4b15[_0x1b1076(0x126)]&&_0x154572!=null&&(_0x59bed3>=_0x154572[_0x1b1076(0x116)]&&(_0x1c934e={'last_connection':_0x86132a[_0x1b1076(0x1a1)],'quota_consumed':_0x59bed3,'is_lock':!![],'lock_date':new Date(),'lock_from':'auto'})),yield Source_1[_0x1b1076(0x165)][_0x1b1076(0x1b0)](_0x8a4b15[_0x1b1076(0x197)],_0x1c934e,{'new':!![]})[_0x1b1076(0x114)](_0x4f8474=>{const _0x45342b=_0x1b1076;if(_0x1c934e['is_lock']&&_0x8a4b15[_0x45342b(0x1a2)][_0x45342b(0x164)]){let _0x483b7c='';if(Useful_1[_0x45342b(0x15e)][_0x45342b(0x155)](_0x86132a))_0x483b7c=_0x8a4b15[_0x45342b(0x1a2)][_0x45342b(0x10d)]?_0x8a4b15[_0x45342b(0x1a2)][_0x45342b(0x10d)]:null;else _0x483b7c=_0x8a4b15['server'][_0x45342b(0x102)]?_0x8a4b15['server'][_0x45342b(0x102)]:null;if(_0x483b7c!=null){const _0x518dae=new NodeSSH();_0x518dae['connect']({'host':_0x8a4b15[_0x45342b(0x1a2)]['host'],'port':_0x8a4b15[_0x45342b(0x1a2)][_0x45342b(0x110)],'username':_0x8a4b15['server']['sshuser'],'password':_0x8a4b15['server'][_0x45342b(0x12e)]})[_0x45342b(0x114)](function(){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x50d359=a82_0x91c7;yield _0x518dae[_0x50d359(0x12f)](_0x50d359(0x149)+_0x483b7c)['then'](function(_0x4a5cae){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x5de335=a82_0x91c7;if(_0x4a5cae['stderr']==''){let _0xa45df=_0x4a5cae['stdout'][_0x5de335(0x15d)]('\x0a'),_0x442090=_0xa45df[_0x5de335(0x1ab)](function(_0x325402){const _0xff0674=_0x5de335;return _0x325402!=''&&_0x325402==_0x8a4b15[_0xff0674(0x168)];});_0x442090[_0x5de335(0x129)]==0x0&&(yield _0x518dae[_0x5de335(0x12f)]('echo\x20\x22'+_0x8a4b15[_0x5de335(0x168)]+_0x5de335(0x14d)+_0x483b7c)[_0x5de335(0x114)](function(_0x3413a6){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x593c7a=a82_0x91c7;_0x3413a6[_0x593c7a(0x11c)]==''&&(yield _0x518dae[_0x593c7a(0x12f)]('systemctl\x20reload\x20squid')[_0x593c7a(0x114)](function(_0xcd35a9){return __awaiter(this,void 0x0,void 0x0,function*(){const _0x44a5e2=a82_0x91c7;handleNotify[_0x44a5e2(0x196)]({'subject':'Nueva\x20cuota\x20excedida','msg':_0x44a5e2(0x15a)+Useful_1[_0x44a5e2(0x15e)][_0x44a5e2(0x1a3)](_0x8a4b15['identifier'])+_0x44a5e2(0x150)+Useful_1[_0x44a5e2(0x15e)][_0x44a5e2(0x18d)](_0x154572[_0x44a5e2(0x116)])+'\x20'+Useful_1[_0x44a5e2(0x15e)][_0x44a5e2(0x1ae)](_0x154572['type'])+_0x44a5e2(0x10f)}),_0x4908fe[_0x44a5e2(0x17f)](_0x44a5e2(0x128));return;});}));});}));}});});});})['catch'](_0x35ee00=>{const _0x5c1d65=_0x45342b;handleNotify[_0x5c1d65(0x196)]({'subject':_0x5c1d65(0x144)+_0x8a4b15[_0x5c1d65(0x1a2)]['host'],'msg':'Ha\x20ocurrido\x20un\x20error\x20en\x20la\x20conexión\x20ssh\x20\x20del\x20servidor\x20'+_0x8a4b15[_0x5c1d65(0x1a2)][_0x5c1d65(0x14b)]+'\x20al\x20intentar\x20bloquear\x20a\x20'+_0x8a4b15['identifier']+'\x20por\x20exceder\x20el\x20límite\x20de\x20cuota,\x20este\x20es\x20el\x20motivo\x20del\x20error:\x20'+_0x35ee00['message']});});}}})[_0x1b1076(0x136)](_0x55e84e=>{return;});}else{let _0x4f69dc=new Source_1[(_0x1b1076(0x13c))]({'identifier':_0x86132a[_0x1b1076(0x168)],'last_connection':_0x86132a['last_connection'],'is_lock':![]});_0x4f69dc[_0x1b1076(0x1a2)]=_0x86132a['server'][_0x1b1076(0x197)];const _0xdf00c4=new Source_1[(_0x1b1076(0x165))](_0x4f69dc);_0xdf00c4['save']((_0x29065d,_0x30e69d)=>__awaiter(this,void 0x0,void 0x0,function*(){const _0x291ba9=_0x1b1076;_0x86132a[_0x291ba9(0x1a2)][_0x291ba9(0x16b)][_0x291ba9(0x198)](_0x30e69d),yield Server_1['Server'][_0x291ba9(0x1b0)](_0x86132a['server'][_0x291ba9(0x197)],_0x86132a[_0x291ba9(0x1a2)],{'new':!![]});}));}}));});}