'use strict';const a4_0x430ce0=a4_0x3e94;(function(_0x4b8791,_0x36b11f){const _0x3e35b9=a4_0x3e94,_0x34f122=_0x4b8791();while(!![]){try{const _0x340942=parseInt(_0x3e35b9(0x1a4))/0x1+parseInt(_0x3e35b9(0x162))/0x2*(-parseInt(_0x3e35b9(0x1a1))/0x3)+parseInt(_0x3e35b9(0x18c))/0x4*(parseInt(_0x3e35b9(0x18e))/0x5)+-parseInt(_0x3e35b9(0x17e))/0x6*(parseInt(_0x3e35b9(0x192))/0x7)+parseInt(_0x3e35b9(0x1a3))/0x8+parseInt(_0x3e35b9(0x17d))/0x9+parseInt(_0x3e35b9(0x165))/0xa;if(_0x340942===_0x36b11f)break;else _0x34f122['push'](_0x34f122['shift']());}catch(_0xa8809c){_0x34f122['push'](_0x34f122['shift']());}}}(a4_0x3186,0xbdcd1));var __awaiter=this&&this['__awaiter']||function(_0x3e0304,_0x17a2b9,_0x39c4fc,_0x40d4ea){function _0x27b396(_0x3d74e4){return _0x3d74e4 instanceof _0x39c4fc?_0x3d74e4:new _0x39c4fc(function(_0xda594){_0xda594(_0x3d74e4);});}return new(_0x39c4fc||(_0x39c4fc=Promise))(function(_0xc92cbf,_0x4857b9){const _0x18e07e=a4_0x3e94;function _0x113613(_0x50692b){const _0x555e9a=a4_0x3e94;try{_0x177cf8(_0x40d4ea[_0x555e9a(0x163)](_0x50692b));}catch(_0x4eaeba){_0x4857b9(_0x4eaeba);}}function _0x2ce94e(_0x11e3c8){const _0x40041a=a4_0x3e94;try{_0x177cf8(_0x40d4ea[_0x40041a(0x19c)](_0x11e3c8));}catch(_0x5cae89){_0x4857b9(_0x5cae89);}}function _0x177cf8(_0x273fb0){const _0x45cbe3=a4_0x3e94;_0x273fb0[_0x45cbe3(0x18f)]?_0xc92cbf(_0x273fb0[_0x45cbe3(0x191)]):_0x27b396(_0x273fb0['value'])[_0x45cbe3(0x16e)](_0x113613,_0x2ce94e);}_0x177cf8((_0x40d4ea=_0x40d4ea[_0x18e07e(0x187)](_0x3e0304,_0x17a2b9||[]))[_0x18e07e(0x163)]());});};Object[a4_0x430ce0(0x193)](exports,a4_0x430ce0(0x1a0),{'value':!![]}),exports[a4_0x430ce0(0x180)]=exports[a4_0x430ce0(0x161)]=exports[a4_0x430ce0(0x17c)]=exports[a4_0x430ce0(0x18a)]=exports[a4_0x430ce0(0x17f)]=void 0x0;const Bot_1=require('../models/Bot'),Proxy_1=require(a4_0x430ce0(0x19e)),express_validator_1=require(a4_0x430ce0(0x19d)),telegraf_1=require('telegraf'),exec=require(a4_0x430ce0(0x194))[a4_0x430ce0(0x198)],ProxyAgent=require(a4_0x430ce0(0x176)),getBot=(_0x16678b,_0x5b5750)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x55241e=a4_0x430ce0;let _0x13b087=yield Bot_1['Bot'][_0x55241e(0x196)]()[_0x55241e(0x16e)](_0x5165d9=>{return _0x5165d9;})['catch'](_0x3d2455=>{const _0x16a4ea=_0x55241e;return{'errors':[{'location':_0x16a4ea(0x17f),'msg':_0x16a4ea(0x15f),'param':_0x16a4ea(0x170)}]};});return _0x5b5750['json'](_0x13b087);});function a4_0x3186(){const _0x123cf6=['filter','findByIdAndDelete','json','apply','create','uri','register','pm2\x20restart\x20SQD-bot','604vzLFGE','push','20590aGvZFw','done','token_empty','value','14YXZMjU','defineProperty','child_process','Listo\x20ya\x20<b>SQD</b>\x20puede\x20atender\x20sus\x20solicitudes,\x20puedes\x20comenzar\x20con\x20el\x20comando\x20/servidores','findOne','Lo\x20sentimos\x20este\x20bot\x20no\x20se\x20encuentra\x20registrado','exec','host','Bot','BotInterface','throw','express-validator','../models/Proxy','catch','__esModule','3cwsgwu','chats','1438072eKPFBE','1072984AlPKLG','delete','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','findone','deleteChat','2043054fTzKjj','next','findById','6884770rasBSl','telegram','chat','validationResult','bot_found','save','isEmpty','Telegraf','bottoken','then','update','bot','run','reject','body','check','errors','proxy-agent','notEmpty','getMe','withMessage','array','params','registerChat','4025880xQDaoh','3634218pkmeer','getBot','deleteBot','sendMessage','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20bot','Proxy'];a4_0x3186=function(){return _0x123cf6;};return a4_0x3186();}exports[a4_0x430ce0(0x17f)]=getBot;const register=(_0x4f1818,_0x23c934)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5ab6a4=a4_0x430ce0;yield express_validator_1[_0x5ab6a4(0x174)]('bottoken')[_0x5ab6a4(0x177)]()[_0x5ab6a4(0x179)](_0x5ab6a4(0x190))[_0x5ab6a4(0x171)](_0x4f1818);const _0x48e4ca=_0x53b7ee=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x17ebc3=_0x5ab6a4;return Bot_1['Bot'][_0x17ebc3(0x196)]()[_0x17ebc3(0x16e)](_0x31c828=>{const _0x8e3658=_0x17ebc3;if(_0x31c828)return Promise[_0x8e3658(0x172)](_0x8e3658(0x169));});});yield express_validator_1['check'](_0x5ab6a4(0x16d))['custom'](_0x48e4ca)[_0x5ab6a4(0x171)](_0x4f1818);const _0x243167=express_validator_1[_0x5ab6a4(0x168)](_0x4f1818);if(!_0x243167[_0x5ab6a4(0x16b)]())return _0x23c934[_0x5ab6a4(0x186)]({'errors':_0x243167[_0x5ab6a4(0x17a)]()});let _0x2fb270=yield Proxy_1[_0x5ab6a4(0x183)]['findOne']()[_0x5ab6a4(0x16e)](_0x49a86a=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x49a86a;}));const _0x2d09d0=_0x2fb270!==null?new ProxyAgent(_0x2fb270[_0x5ab6a4(0x189)]):null,_0x1d999e=new telegraf_1[(_0x5ab6a4(0x16c))](_0x4f1818[_0x5ab6a4(0x173)][_0x5ab6a4(0x16d)],{'telegram':{'agent':_0x2d09d0}});yield _0x1d999e[_0x5ab6a4(0x166)][_0x5ab6a4(0x178)]()[_0x5ab6a4(0x16e)](_0x12c999=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5bb117=_0x5ab6a4;let _0x4adbe0=new Bot_1[(_0x5bb117(0x19b))]({'token':_0x4f1818[_0x5bb117(0x173)][_0x5bb117(0x16d)]});yield Bot_1['Bot']['create'](_0x4adbe0,(_0x291f27,_0x4dac48)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3b83fd=_0x5bb117;if(_0x291f27)return _0x23c934['json']({'errors':[{'location':_0x3b83fd(0x18a),'msg':_0x3b83fd(0x182),'param':_0x3b83fd(0x188)}]});else{const _0x3320c8=yield execCommand('pm2\x20restart\x20SQD-bot');return _0x23c934['json'](_0x4dac48);}}));}))[_0x5ab6a4(0x19f)](_0x2c2c9c=>{const _0x36501e=_0x5ab6a4;return _0x23c934[_0x36501e(0x186)]({'errors':[{'location':_0x36501e(0x18a),'msg':'Lo\x20sentimos\x20el\x20token\x20es\x20incorrecto'}]});});});exports[a4_0x430ce0(0x18a)]=register;const registerChat=(_0x410b73,_0x54bf19)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x248dee=a4_0x430ce0;yield Bot_1[_0x248dee(0x19a)][_0x248dee(0x196)]()[_0x248dee(0x16e)](_0x4006af=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1e9ec8=_0x248dee;let _0x133f5e=![];_0x4006af[_0x1e9ec8(0x1a2)]['map'](_0x55e873=>{const _0x46d937=_0x1e9ec8;if(_0x55e873['id']==_0x410b73[_0x46d937(0x173)]['id'])_0x133f5e=!![];});if(!_0x133f5e){let _0x3b05c2=yield Proxy_1[_0x1e9ec8(0x183)]['findOne']()[_0x1e9ec8(0x16e)](_0x3ce78d=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x3ce78d;}));const _0x1616a6=_0x3b05c2!==null?new ProxyAgent(_0x3b05c2[_0x1e9ec8(0x189)]):null,_0x3e22cb=new telegraf_1[(_0x1e9ec8(0x16c))](_0x4006af['token'],{'telegram':{'agent':_0x1616a6}});_0x4006af[_0x1e9ec8(0x1a2)][_0x1e9ec8(0x18d)]({'id':_0x410b73[_0x1e9ec8(0x173)]['id'],'name':_0x410b73[_0x1e9ec8(0x173)]['name']}),yield _0x4006af[_0x1e9ec8(0x16a)]();const _0x1ed0ac=yield execCommand(_0x1e9ec8(0x18b));return _0x3e22cb[_0x1e9ec8(0x166)][_0x1e9ec8(0x181)](_0x410b73[_0x1e9ec8(0x173)]['id'],_0x1e9ec8(0x195),{'parse_mode':'HTML'}),_0x54bf19[_0x1e9ec8(0x186)](_0x4006af);}return _0x54bf19['json']({'errors':[{'location':_0x1e9ec8(0x17c),'msg':'Lo\x20sentimos\x20este\x20ID\x20ya\x20se\x20encuentra\x20registrado','param':_0x1e9ec8(0x167)}]});}))[_0x248dee(0x19f)](_0x42ac16=>{const _0x57244f=_0x248dee;return _0x54bf19['json']({'errors':[{'location':_0x57244f(0x17c),'msg':_0x57244f(0x15f),'param':_0x57244f(0x160)}]});});});exports[a4_0x430ce0(0x17c)]=registerChat;const deleteChat=(_0x222972,_0x2fa09a)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2b6f6b=a4_0x430ce0;yield Bot_1['Bot'][_0x2b6f6b(0x196)]()[_0x2b6f6b(0x16e)](_0x1e8bfe=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x69c76e=_0x2b6f6b;return _0x1e8bfe[_0x69c76e(0x1a2)]=_0x1e8bfe[_0x69c76e(0x1a2)][_0x69c76e(0x184)](function(_0x420d5f){const _0x26f578=_0x69c76e;return _0x420d5f['id']!=_0x222972[_0x26f578(0x173)]['id'];}),yield _0x1e8bfe['save'](),_0x2fa09a[_0x69c76e(0x186)](_0x1e8bfe);}))[_0x2b6f6b(0x19f)](_0x504c35=>{const _0x1e762f=_0x2b6f6b;return _0x2fa09a['json']({'errors':[{'location':'deleteChat','msg':_0x1e762f(0x15f),'param':'findone'}]});});});exports[a4_0x430ce0(0x161)]=deleteChat;const deleteBot=(_0x515bd2,_0x4fd758)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x57106e=a4_0x430ce0;yield Bot_1[_0x57106e(0x19a)][_0x57106e(0x164)](_0x515bd2['params']['id'])[_0x57106e(0x16e)](_0x271266=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x504880=_0x57106e;if(_0x271266){const _0x4d85eb=yield execCommand('pm2\x20stop\x20SQD-bot');Bot_1[_0x504880(0x19a)][_0x504880(0x185)](_0x515bd2[_0x504880(0x17b)]['id'])['then'](()=>{const _0x51fdd5=_0x504880;return _0x4fd758[_0x51fdd5(0x186)](_0x271266);})[_0x504880(0x19f)](_0xca957e=>{const _0x535611=_0x504880;return _0x4fd758[_0x535611(0x186)]({'errors':[{'location':_0x535611(0x16f),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20bot','param':'connection'}]});});}else return _0x4fd758[_0x504880(0x186)]({'errors':[{'location':_0x504880(0x15e),'msg':_0x504880(0x197),'param':_0x504880(0x199)}]});}))[_0x57106e(0x19f)](_0x1d9f48=>{const _0x72f76=_0x57106e;return _0x4fd758[_0x72f76(0x186)]({'errors':[{'location':_0x72f76(0x15e),'msg':_0x72f76(0x15f),'param':'findserver'}]});});});exports[a4_0x430ce0(0x180)]=deleteBot;function a4_0x3e94(_0x55daae,_0x5bbcf3){const _0x318642=a4_0x3186();return a4_0x3e94=function(_0x3e9422,_0x7b0e91){_0x3e9422=_0x3e9422-0x15e;let _0xb2d5c7=_0x318642[_0x3e9422];return _0xb2d5c7;},a4_0x3e94(_0x55daae,_0x5bbcf3);}function execCommand(_0x963cfc){return new Promise((_0x389174,_0x14fd15)=>{exec(_0x963cfc,(_0x242c92,_0x38be96,_0x58bb61)=>{const _0x103369=a4_0x3e94;if(_0x242c92||_0x58bb61)_0x389174(_0x103369(0x175));else _0x389174(_0x38be96);});});}