'use strict';const a4_0x234984=a4_0x1772;(function(_0x4df5e7,_0xdcc629){const _0x5b6a9a=a4_0x1772,_0x442ea7=_0x4df5e7();while(!![]){try{const _0xb5b445=-parseInt(_0x5b6a9a(0x91))/0x1+-parseInt(_0x5b6a9a(0x9a))/0x2+-parseInt(_0x5b6a9a(0xa2))/0x3+-parseInt(_0x5b6a9a(0xb8))/0x4*(parseInt(_0x5b6a9a(0x80))/0x5)+-parseInt(_0x5b6a9a(0x9d))/0x6+parseInt(_0x5b6a9a(0xc0))/0x7*(-parseInt(_0x5b6a9a(0xba))/0x8)+parseInt(_0x5b6a9a(0x7f))/0x9;if(_0xb5b445===_0xdcc629)break;else _0x442ea7['push'](_0x442ea7['shift']());}catch(_0x58be11){_0x442ea7['push'](_0x442ea7['shift']());}}}(a4_0x3f82,0x7a474));var __awaiter=this&&this[a4_0x234984(0x8c)]||function(_0x4fd07b,_0x57b413,_0x421956,_0x1aa3fe){function _0x35dcf8(_0x4e3153){return _0x4e3153 instanceof _0x421956?_0x4e3153:new _0x421956(function(_0x2e9dd7){_0x2e9dd7(_0x4e3153);});}return new(_0x421956||(_0x421956=Promise))(function(_0x4d8859,_0x3fd452){const _0x2e7fc5=a4_0x1772;function _0x281428(_0x217473){const _0x368864=a4_0x1772;try{_0x2ed300(_0x1aa3fe[_0x368864(0x99)](_0x217473));}catch(_0x5a7feb){_0x3fd452(_0x5a7feb);}}function _0x2ece00(_0x33231a){try{_0x2ed300(_0x1aa3fe['throw'](_0x33231a));}catch(_0x2d2155){_0x3fd452(_0x2d2155);}}function _0x2ed300(_0x4863bf){const _0x1b6b80=a4_0x1772;_0x4863bf[_0x1b6b80(0x89)]?_0x4d8859(_0x4863bf[_0x1b6b80(0x8b)]):_0x35dcf8(_0x4863bf[_0x1b6b80(0x8b)])[_0x1b6b80(0x81)](_0x281428,_0x2ece00);}_0x2ed300((_0x1aa3fe=_0x1aa3fe[_0x2e7fc5(0xa8)](_0x4fd07b,_0x57b413||[]))[_0x2e7fc5(0x99)]());});};Object['defineProperty'](exports,a4_0x234984(0xad),{'value':!![]}),exports['deleteBot']=exports[a4_0x234984(0xaf)]=exports[a4_0x234984(0x9f)]=exports[a4_0x234984(0xb0)]=exports[a4_0x234984(0x7c)]=void 0x0;const Bot_1=require(a4_0x234984(0x82)),Proxy_1=require(a4_0x234984(0x7d)),express_validator_1=require(a4_0x234984(0xa5)),telegraf_1=require(a4_0x234984(0x93)),exec=require(a4_0x234984(0xb1))[a4_0x234984(0xb6)],ProxyAgent=require(a4_0x234984(0x87)),getBot=(_0x51aebe,_0x491bd7)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2f6f92=a4_0x234984;let _0x322f76=yield Bot_1[_0x2f6f92(0x9c)][_0x2f6f92(0xc2)]()[_0x2f6f92(0x81)](_0x3f177e=>{return _0x3f177e;})[_0x2f6f92(0xb2)](_0x4e033c=>{const _0x59804c=_0x2f6f92;return{'errors':[{'location':_0x59804c(0x7c),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','param':_0x59804c(0xa4)}]};});return _0x491bd7[_0x2f6f92(0xbc)](_0x322f76);});exports[a4_0x234984(0x7c)]=getBot;const register=(_0x37b05b,_0x22b300)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x58b6d3=a4_0x234984;yield express_validator_1['check'](_0x58b6d3(0xbd))['notEmpty']()[_0x58b6d3(0xac)](_0x58b6d3(0x8d))['run'](_0x37b05b);const _0x5035fb=_0x56e352=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x53a595=_0x58b6d3;return Bot_1['Bot'][_0x53a595(0xc2)]()[_0x53a595(0x81)](_0x1d95c0=>{const _0x3c5518=_0x53a595;if(_0x1d95c0)return Promise[_0x3c5518(0x95)]('bot_found');});});yield express_validator_1[_0x58b6d3(0xbb)](_0x58b6d3(0xbd))[_0x58b6d3(0xb7)](_0x5035fb)[_0x58b6d3(0xa6)](_0x37b05b);const _0x50c43d=express_validator_1[_0x58b6d3(0xa1)](_0x37b05b);if(!_0x50c43d[_0x58b6d3(0x94)]())return _0x22b300[_0x58b6d3(0xbc)]({'errors':_0x50c43d['array']()});let _0x41e412=yield Proxy_1[_0x58b6d3(0x84)][_0x58b6d3(0xc2)]()[_0x58b6d3(0x81)](_0xdf2b69=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0xdf2b69;}));const _0x210c28=_0x41e412!==null?new ProxyAgent(_0x41e412[_0x58b6d3(0x83)]):null,_0x242108=new telegraf_1[(_0x58b6d3(0x7e))](_0x37b05b[_0x58b6d3(0x8f)][_0x58b6d3(0xbd)],{'telegram':{'agent':_0x210c28}});yield _0x242108[_0x58b6d3(0xa7)]['getMe']()[_0x58b6d3(0x81)](_0x27fc66=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x302307=_0x58b6d3;let _0x778894=new Bot_1[(_0x302307(0xbf))]({'token':_0x37b05b['body'][_0x302307(0xbd)]});yield Bot_1[_0x302307(0x9c)][_0x302307(0x9b)](_0x778894,(_0x5eef7e,_0x2ba714)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x208c9d=_0x302307;if(_0x5eef7e)return _0x22b300[_0x208c9d(0xbc)]({'errors':[{'location':'register','msg':_0x208c9d(0x96),'param':_0x208c9d(0x9b)}]});else{const _0x13ca64=yield execCommand(_0x208c9d(0x90));return _0x22b300[_0x208c9d(0xbc)](_0x2ba714);}}));}))[_0x58b6d3(0xb2)](_0xc7bde2=>{const _0x26afbb=_0x58b6d3;return _0x22b300[_0x26afbb(0xbc)]({'errors':[{'location':_0x26afbb(0xb0),'msg':_0x26afbb(0x8a)}]});});});function a4_0x1772(_0x34893b,_0x322ac9){const _0x3f82b1=a4_0x3f82();return a4_0x1772=function(_0x17725c,_0x48d3c0){_0x17725c=_0x17725c-0x7c;let _0x54f09d=_0x3f82b1[_0x17725c];return _0x54f09d;},a4_0x1772(_0x34893b,_0x322ac9);}exports['register']=register;const registerChat=(_0x52bfc4,_0x36999b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4fa572=a4_0x234984;yield Bot_1['Bot'][_0x4fa572(0xc2)]()[_0x4fa572(0x81)](_0x237c76=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1c8009=_0x4fa572;let _0x58b713=![];_0x237c76[_0x1c8009(0x8e)][_0x1c8009(0x86)](_0x4b1b19=>{const _0x52837d=_0x1c8009;if(_0x4b1b19['id']==_0x52bfc4[_0x52837d(0x8f)]['id'])_0x58b713=!![];});if(!_0x58b713){let _0x56126a=yield Proxy_1['Proxy'][_0x1c8009(0xc2)]()[_0x1c8009(0x81)](_0x4b8125=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x4b8125;}));const _0xbd9480=_0x56126a!==null?new ProxyAgent(_0x56126a[_0x1c8009(0x83)]):null,_0xa8c446=new telegraf_1[(_0x1c8009(0x7e))](_0x237c76[_0x1c8009(0xb5)],{'telegram':{'agent':_0xbd9480}});_0x237c76[_0x1c8009(0x8e)]['push']({'id':_0x52bfc4[_0x1c8009(0x8f)]['id'],'name':_0x52bfc4[_0x1c8009(0x8f)]['name']}),yield _0x237c76[_0x1c8009(0xa3)]();const _0x3ac5ce=yield execCommand('pm2\x20restart\x20SQD-bot');return _0xa8c446[_0x1c8009(0xa7)][_0x1c8009(0xc3)](_0x52bfc4['body']['id'],_0x1c8009(0xbe),{'parse_mode':'HTML'}),_0x36999b[_0x1c8009(0xbc)](_0x237c76);}return _0x36999b[_0x1c8009(0xbc)]({'errors':[{'location':_0x1c8009(0x9f),'msg':_0x1c8009(0x98),'param':_0x1c8009(0x88)}]});}))[_0x4fa572(0xb2)](_0x4d4375=>{const _0x360233=_0x4fa572;return _0x36999b[_0x360233(0xbc)]({'errors':[{'location':_0x360233(0x9f),'msg':_0x360233(0xa0),'param':'findone'}]});});});function a4_0x3f82(){const _0x197ca3=['544052EkKZby','findone','telegraf','isEmpty','reject','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20bot','delete','Lo\x20sentimos\x20este\x20ID\x20ya\x20se\x20encuentra\x20registrado','next','1107042iGRZKz','create','Bot','5647704sQHIXW','findByIdAndDelete','registerChat','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','validationResult','1941684wHUZoc','save','bot','express-validator','run','telegram','apply','deleteBot','Lo\x20sentimos\x20este\x20bot\x20no\x20se\x20encuentra\x20registrado','params','withMessage','__esModule','connection','deleteChat','register','child_process','catch','update','findserver','token','exec','custom','3268rNsVSZ','errors','1304DJtNgt','check','json','bottoken','Listo\x20ya\x20<b>SQD</b>\x20puede\x20atender\x20sus\x20solicitudes,\x20puedes\x20comenzar\x20con\x20el\x20comando\x20/servidores','BotInterface','21273IbAkmB','findById','findOne','sendMessage','host','getBot','../models/Proxy','Telegraf','35331840jOoVgT','1490LubOSj','then','../models/Bot','uri','Proxy','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20bot','map','proxy-agent','chat','done','Lo\x20sentimos\x20el\x20token\x20es\x20incorrecto','value','__awaiter','token_empty','chats','body','pm2\x20restart\x20SQD-bot'];a4_0x3f82=function(){return _0x197ca3;};return a4_0x3f82();}exports[a4_0x234984(0x9f)]=registerChat;const deleteChat=(_0x4e4268,_0x176d8d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2b1a7b=a4_0x234984;yield Bot_1[_0x2b1a7b(0x9c)][_0x2b1a7b(0xc2)]()[_0x2b1a7b(0x81)](_0x5e5f47=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x54461a=_0x2b1a7b;return _0x5e5f47['chats']=_0x5e5f47[_0x54461a(0x8e)]['filter'](function(_0x14474d){const _0x5d29a5=_0x54461a;return _0x14474d['id']!=_0x4e4268[_0x5d29a5(0x8f)]['id'];}),yield _0x5e5f47['save'](),_0x176d8d['json'](_0x5e5f47);}))['catch'](_0x3630ed=>{const _0x48cc83=_0x2b1a7b;return _0x176d8d['json']({'errors':[{'location':_0x48cc83(0xaf),'msg':_0x48cc83(0xa0),'param':_0x48cc83(0x92)}]});});});exports['deleteChat']=deleteChat;const deleteBot=(_0x130fa7,_0x13f19f)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3dc433=a4_0x234984;yield Bot_1[_0x3dc433(0x9c)][_0x3dc433(0xc1)](_0x130fa7[_0x3dc433(0xab)]['id'])['then'](_0x1a9394=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x16fdda=_0x3dc433;if(_0x1a9394){const _0x4d73a6=yield execCommand('pm2\x20stop\x20SQD-bot');Bot_1['Bot'][_0x16fdda(0x9e)](_0x130fa7[_0x16fdda(0xab)]['id'])[_0x16fdda(0x81)](()=>{const _0x4727e0=_0x16fdda;return _0x13f19f[_0x4727e0(0xbc)](_0x1a9394);})[_0x16fdda(0xb2)](_0x247d47=>{const _0x37f034=_0x16fdda;return _0x13f19f[_0x37f034(0xbc)]({'errors':[{'location':_0x37f034(0xb3),'msg':_0x37f034(0x85),'param':_0x37f034(0xae)}]});});}else return _0x13f19f[_0x16fdda(0xbc)]({'errors':[{'location':_0x16fdda(0x97),'msg':_0x16fdda(0xaa),'param':_0x16fdda(0xc4)}]});}))[_0x3dc433(0xb2)](_0x446fc9=>{const _0x525457=_0x3dc433;return _0x13f19f[_0x525457(0xbc)]({'errors':[{'location':_0x525457(0x97),'msg':_0x525457(0xa0),'param':_0x525457(0xb4)}]});});});exports[a4_0x234984(0xa9)]=deleteBot;function execCommand(_0x284657){return new Promise((_0x2926eb,_0x30b949)=>{exec(_0x284657,(_0x38132a,_0x4ab911,_0x341fc1)=>{const _0x1e2edb=a4_0x1772;if(_0x38132a||_0x341fc1)_0x2926eb(_0x1e2edb(0xb9));else _0x2926eb(_0x4ab911);});});}