'use strict';const a4_0x4cf2c8=a4_0x57bd;(function(_0x206a6d,_0x65cd36){const _0x4f0d86=a4_0x57bd,_0x36dcfa=_0x206a6d();while(!![]){try{const _0x522b41=-parseInt(_0x4f0d86(0x1c8))/0x1*(-parseInt(_0x4f0d86(0x19e))/0x2)+parseInt(_0x4f0d86(0x1a4))/0x3*(-parseInt(_0x4f0d86(0x1ad))/0x4)+parseInt(_0x4f0d86(0x194))/0x5+-parseInt(_0x4f0d86(0x191))/0x6*(-parseInt(_0x4f0d86(0x19f))/0x7)+parseInt(_0x4f0d86(0x186))/0x8+parseInt(_0x4f0d86(0x1b0))/0x9+parseInt(_0x4f0d86(0x1ba))/0xa*(-parseInt(_0x4f0d86(0x1a1))/0xb);if(_0x522b41===_0x65cd36)break;else _0x36dcfa['push'](_0x36dcfa['shift']());}catch(_0x5a0785){_0x36dcfa['push'](_0x36dcfa['shift']());}}}(a4_0x2f84,0xa6462));var __awaiter=this&&this[a4_0x4cf2c8(0x1a3)]||function(_0x228bcd,_0xc8090a,_0xc5e408,_0x42b61d){function _0x4f6129(_0x4fd70d){return _0x4fd70d instanceof _0xc5e408?_0x4fd70d:new _0xc5e408(function(_0x297e93){_0x297e93(_0x4fd70d);});}return new(_0xc5e408||(_0xc5e408=Promise))(function(_0x44fff6,_0x3f60ae){const _0x19d072=a4_0x57bd;function _0x3eb59c(_0x2e8f00){const _0xe43dc6=a4_0x57bd;try{_0x5a0d8e(_0x42b61d[_0xe43dc6(0x1bd)](_0x2e8f00));}catch(_0x4e73bb){_0x3f60ae(_0x4e73bb);}}function _0x1a86b5(_0x4b613f){const _0x3c0d04=a4_0x57bd;try{_0x5a0d8e(_0x42b61d[_0x3c0d04(0x19c)](_0x4b613f));}catch(_0xc001ef){_0x3f60ae(_0xc001ef);}}function _0x5a0d8e(_0x13d136){const _0x9c81f2=a4_0x57bd;_0x13d136['done']?_0x44fff6(_0x13d136[_0x9c81f2(0x1a6)]):_0x4f6129(_0x13d136[_0x9c81f2(0x1a6)])[_0x9c81f2(0x1a2)](_0x3eb59c,_0x1a86b5);}_0x5a0d8e((_0x42b61d=_0x42b61d[_0x19d072(0x18f)](_0x228bcd,_0xc8090a||[]))[_0x19d072(0x1bd)]());});};Object['defineProperty'](exports,a4_0x4cf2c8(0x18c),{'value':!![]}),exports['deleteBot']=exports[a4_0x4cf2c8(0x1c6)]=exports['registerChat']=exports[a4_0x4cf2c8(0x1bf)]=exports[a4_0x4cf2c8(0x190)]=void 0x0;const Bot_1=require(a4_0x4cf2c8(0x182)),Proxy_1=require(a4_0x4cf2c8(0x199)),express_validator_1=require('express-validator'),telegraf_1=require(a4_0x4cf2c8(0x193)),exec=require(a4_0x4cf2c8(0x1bc))[a4_0x4cf2c8(0x197)],ProxyAgent=require(a4_0x4cf2c8(0x1c4)),getBot=(_0x34ea2e,_0x3cf578)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x51a0a8=a4_0x4cf2c8;let _0x15394b=yield Bot_1[_0x51a0a8(0x189)][_0x51a0a8(0x195)]()[_0x51a0a8(0x1a2)](_0x215419=>{return _0x215419;})[_0x51a0a8(0x196)](_0x27fe37=>{const _0x44d116=_0x51a0a8;return{'errors':[{'location':_0x44d116(0x190),'msg':_0x44d116(0x1b1),'param':_0x44d116(0x184)}]};});return _0x3cf578['json'](_0x15394b);});exports[a4_0x4cf2c8(0x190)]=getBot;const register=(_0x42d455,_0x144006)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x20c148=a4_0x4cf2c8;yield express_validator_1[_0x20c148(0x1a5)](_0x20c148(0x1ca))[_0x20c148(0x1a8)]()[_0x20c148(0x18b)]('token_empty')[_0x20c148(0x1c2)](_0x42d455);const _0x5bf3cd=_0x2d10dd=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0xcf2a26=_0x20c148;return Bot_1[_0xcf2a26(0x189)][_0xcf2a26(0x195)]()[_0xcf2a26(0x1a2)](_0x257c16=>{const _0x29d94f=_0xcf2a26;if(_0x257c16)return Promise['reject'](_0x29d94f(0x1b7));});});yield express_validator_1[_0x20c148(0x1a5)](_0x20c148(0x1ca))[_0x20c148(0x185)](_0x5bf3cd)[_0x20c148(0x1c2)](_0x42d455);const _0x4e8721=express_validator_1[_0x20c148(0x19a)](_0x42d455);if(!_0x4e8721[_0x20c148(0x1b4)]())return _0x144006[_0x20c148(0x1c1)]({'errors':_0x4e8721[_0x20c148(0x1b9)]()});let _0x5e3aa4=yield Proxy_1[_0x20c148(0x18e)][_0x20c148(0x195)]()[_0x20c148(0x1a2)](_0x5ef205=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x5ef205;}));const _0x3b566f=_0x5e3aa4!==null?new ProxyAgent(_0x5e3aa4['uri']):null,_0x541317=new telegraf_1[(_0x20c148(0x1c0))](_0x42d455[_0x20c148(0x1c7)][_0x20c148(0x1ca)],{'telegram':{'agent':_0x3b566f}});yield _0x541317['telegram'][_0x20c148(0x1b8)]()['then'](_0x122528=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5c0dba=_0x20c148;let _0x4e5a76=new Bot_1[(_0x5c0dba(0x1aa))]({'token':_0x42d455[_0x5c0dba(0x1c7)][_0x5c0dba(0x1ca)]});yield Bot_1[_0x5c0dba(0x189)][_0x5c0dba(0x1ac)](_0x4e5a76,(_0x44ffae,_0x34c593)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5b5388=_0x5c0dba;if(_0x44ffae)return _0x144006[_0x5b5388(0x1c1)]({'errors':[{'location':_0x5b5388(0x1bf),'msg':_0x5b5388(0x1b2),'param':_0x5b5388(0x1ac)}]});else{const _0x351751=yield execCommand(_0x5b5388(0x1c5));return _0x144006[_0x5b5388(0x1c1)](_0x34c593);}}));}))[_0x20c148(0x196)](_0x43f329=>{const _0x13d369=_0x20c148;return _0x144006[_0x13d369(0x1c1)]({'errors':[{'location':'register','msg':'Lo\x20sentimos\x20el\x20token\x20es\x20incorrecto'}]});});});function a4_0x2f84(){const _0x49260e=['../models/Proxy','validationResult','uri','throw','HTML','46fNqSkV','21ppifsh','deleteBot','319PybGgA','then','__awaiter','3rIoxfz','check','value','pm2\x20stop\x20SQD-bot','notEmpty','findById','BotInterface','sendMessage','create','1799752EZBVou','map','findserver','8592255JWMEgE','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20bot','name','isEmpty','findone','chat','bot_found','getMe','array','1094810BrpEgc','filter','child_process','next','registerChat','register','Telegraf','json','run','params','proxy-agent','pm2\x20restart\x20SQD-bot','deleteChat','body','1288NEAfAe','delete','bottoken','Lo\x20sentimos\x20este\x20bot\x20no\x20se\x20encuentra\x20registrado','../models/Bot','telegram','bot','custom','7936216wZLwYX','update','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20bot','Bot','token','withMessage','__esModule','Lo\x20sentimos\x20este\x20ID\x20ya\x20se\x20encuentra\x20registrado','Proxy','apply','getBot','2209404rCZEXV','errors','telegraf','6124485ROsCaN','findOne','catch','exec','chats'];a4_0x2f84=function(){return _0x49260e;};return a4_0x2f84();}exports['register']=register;const registerChat=(_0x53c3d2,_0xa2e228)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x55cd81=a4_0x4cf2c8;yield Bot_1['Bot'][_0x55cd81(0x195)]()['then'](_0x51a98b=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x137da3=_0x55cd81;let _0x322428=![];_0x51a98b[_0x137da3(0x198)][_0x137da3(0x1ae)](_0x414a7d=>{if(_0x414a7d['id']==_0x53c3d2['body']['id'])_0x322428=!![];});if(!_0x322428){let _0x357619=yield Proxy_1[_0x137da3(0x18e)][_0x137da3(0x195)]()[_0x137da3(0x1a2)](_0x33e0d2=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x33e0d2;}));const _0x2ac728=_0x357619!==null?new ProxyAgent(_0x357619[_0x137da3(0x19b)]):null,_0x5e613d=new telegraf_1['Telegraf'](_0x51a98b[_0x137da3(0x18a)],{'telegram':{'agent':_0x2ac728}});_0x51a98b['chats']['push']({'id':_0x53c3d2['body']['id'],'name':_0x53c3d2[_0x137da3(0x1c7)][_0x137da3(0x1b3)]}),yield _0x51a98b['save']();const _0x22e64c=yield execCommand(_0x137da3(0x1c5));return _0x5e613d[_0x137da3(0x183)][_0x137da3(0x1ab)](_0x53c3d2[_0x137da3(0x1c7)]['id'],'Listo\x20ya\x20<b>SQD</b>\x20puede\x20atender\x20sus\x20solicitudes,\x20puedes\x20comenzar\x20con\x20el\x20comando\x20/servidores',{'parse_mode':_0x137da3(0x19d)}),_0xa2e228[_0x137da3(0x1c1)](_0x51a98b);}return _0xa2e228[_0x137da3(0x1c1)]({'errors':[{'location':_0x137da3(0x1be),'msg':_0x137da3(0x18d),'param':_0x137da3(0x1b6)}]});}))['catch'](_0xf854a1=>{const _0x404a7d=_0x55cd81;return _0xa2e228[_0x404a7d(0x1c1)]({'errors':[{'location':_0x404a7d(0x1be),'msg':_0x404a7d(0x1b1),'param':_0x404a7d(0x1b5)}]});});});exports['registerChat']=registerChat;const deleteChat=(_0x323500,_0x1fc6a7)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3e77ff=a4_0x4cf2c8;yield Bot_1[_0x3e77ff(0x189)][_0x3e77ff(0x195)]()[_0x3e77ff(0x1a2)](_0x1a0d74=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3c4e23=_0x3e77ff;return _0x1a0d74['chats']=_0x1a0d74['chats'][_0x3c4e23(0x1bb)](function(_0x198502){return _0x198502['id']!=_0x323500['body']['id'];}),yield _0x1a0d74['save'](),_0x1fc6a7[_0x3c4e23(0x1c1)](_0x1a0d74);}))[_0x3e77ff(0x196)](_0x443c00=>{const _0x56e454=_0x3e77ff;return _0x1fc6a7[_0x56e454(0x1c1)]({'errors':[{'location':_0x56e454(0x1c6),'msg':_0x56e454(0x1b1),'param':'findone'}]});});});exports['deleteChat']=deleteChat;const deleteBot=(_0x20ce7f,_0x448751)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1d68a2=a4_0x4cf2c8;yield Bot_1[_0x1d68a2(0x189)][_0x1d68a2(0x1a9)](_0x20ce7f[_0x1d68a2(0x1c3)]['id'])[_0x1d68a2(0x1a2)](_0x3b4a2d=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x55ac98=_0x1d68a2;if(_0x3b4a2d){const _0x3329a0=yield execCommand(_0x55ac98(0x1a7));Bot_1[_0x55ac98(0x189)]['findByIdAndDelete'](_0x20ce7f[_0x55ac98(0x1c3)]['id'])[_0x55ac98(0x1a2)](()=>{const _0x4a0f05=_0x55ac98;return _0x448751[_0x4a0f05(0x1c1)](_0x3b4a2d);})[_0x55ac98(0x196)](_0x3a73b3=>{const _0x4236e1=_0x55ac98;return _0x448751[_0x4236e1(0x1c1)]({'errors':[{'location':_0x4236e1(0x187),'msg':_0x4236e1(0x188),'param':'connection'}]});});}else return _0x448751[_0x55ac98(0x1c1)]({'errors':[{'location':_0x55ac98(0x1c9),'msg':_0x55ac98(0x1cb),'param':'host'}]});}))['catch'](_0x340313=>{const _0xe741f4=_0x1d68a2;return _0x448751[_0xe741f4(0x1c1)]({'errors':[{'location':'delete','msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','param':_0xe741f4(0x1af)}]});});});function a4_0x57bd(_0x5be931,_0x2abcf7){const _0x2f84a9=a4_0x2f84();return a4_0x57bd=function(_0x57bd48,_0x3ffd31){_0x57bd48=_0x57bd48-0x182;let _0x23c13a=_0x2f84a9[_0x57bd48];return _0x23c13a;},a4_0x57bd(_0x5be931,_0x2abcf7);}exports[a4_0x4cf2c8(0x1a0)]=deleteBot;function execCommand(_0xb70f07){return new Promise((_0x579a54,_0x4f52f3)=>{exec(_0xb70f07,(_0x3d341c,_0x54d5d4,_0x522baf)=>{const _0x574a9d=a4_0x57bd;if(_0x3d341c||_0x522baf)_0x579a54(_0x574a9d(0x192));else _0x579a54(_0x54d5d4);});});}