'use strict';const a4_0x35892b=a4_0x235a;(function(_0xc7dd3e,_0x58a193){const _0xb7ce38=a4_0x235a,_0x268f20=_0xc7dd3e();while(!![]){try{const _0x3c271c=parseInt(_0xb7ce38(0x17f))/0x1*(parseInt(_0xb7ce38(0x15c))/0x2)+-parseInt(_0xb7ce38(0x176))/0x3*(parseInt(_0xb7ce38(0x179))/0x4)+parseInt(_0xb7ce38(0x172))/0x5+-parseInt(_0xb7ce38(0x181))/0x6*(parseInt(_0xb7ce38(0x171))/0x7)+parseInt(_0xb7ce38(0x16f))/0x8+parseInt(_0xb7ce38(0x158))/0x9*(parseInt(_0xb7ce38(0x147))/0xa)+parseInt(_0xb7ce38(0x140))/0xb*(-parseInt(_0xb7ce38(0x168))/0xc);if(_0x3c271c===_0x58a193)break;else _0x268f20['push'](_0x268f20['shift']());}catch(_0x541f68){_0x268f20['push'](_0x268f20['shift']());}}}(a4_0x6063,0xa403d));function a4_0x235a(_0x4e721b,_0x4c5a20){const _0x60630c=a4_0x6063();return a4_0x235a=function(_0x235a58,_0x4e19c7){_0x235a58=_0x235a58-0x13b;let _0x2a3d84=_0x60630c[_0x235a58];return _0x2a3d84;},a4_0x235a(_0x4e721b,_0x4c5a20);}var __awaiter=this&&this['__awaiter']||function(_0xe23175,_0x41c293,_0x56d379,_0xac256f){function _0x12e564(_0x3bc62b){return _0x3bc62b instanceof _0x56d379?_0x3bc62b:new _0x56d379(function(_0x76a168){_0x76a168(_0x3bc62b);});}return new(_0x56d379||(_0x56d379=Promise))(function(_0x179a7e,_0x3c489c){const _0x384398=a4_0x235a;function _0x1b8c94(_0xcc432){const _0x457a16=a4_0x235a;try{_0x13a883(_0xac256f[_0x457a16(0x164)](_0xcc432));}catch(_0x34d3bb){_0x3c489c(_0x34d3bb);}}function _0x53a6f2(_0xcad639){const _0x16c111=a4_0x235a;try{_0x13a883(_0xac256f[_0x16c111(0x167)](_0xcad639));}catch(_0x5f58b3){_0x3c489c(_0x5f58b3);}}function _0x13a883(_0x320237){const _0x2384af=a4_0x235a;_0x320237[_0x2384af(0x15b)]?_0x179a7e(_0x320237[_0x2384af(0x13e)]):_0x12e564(_0x320237[_0x2384af(0x13e)])[_0x2384af(0x148)](_0x1b8c94,_0x53a6f2);}_0x13a883((_0xac256f=_0xac256f[_0x384398(0x151)](_0xe23175,_0x41c293||[]))[_0x384398(0x164)]());});};Object[a4_0x35892b(0x169)](exports,'__esModule',{'value':!![]}),exports[a4_0x35892b(0x152)]=exports[a4_0x35892b(0x165)]=exports[a4_0x35892b(0x153)]=exports[a4_0x35892b(0x175)]=exports[a4_0x35892b(0x160)]=void 0x0;const Bot_1=require(a4_0x35892b(0x17b)),Proxy_1=require(a4_0x35892b(0x141)),express_validator_1=require(a4_0x35892b(0x17e)),telegraf_1=require(a4_0x35892b(0x13d)),exec=require('child_process')['exec'],ProxyAgent=require(a4_0x35892b(0x13c)),getBot=(_0x447bde,_0x41d7a8)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x315cd6=a4_0x35892b;let _0x2462f3=yield Bot_1[_0x315cd6(0x16c)]['findOne']()[_0x315cd6(0x148)](_0x4af3be=>{return _0x4af3be;})['catch'](_0x253d6c=>{const _0x488305=_0x315cd6;return{'errors':[{'location':'getBot','msg':_0x488305(0x17c),'param':'bot'}]};});return _0x41d7a8[_0x315cd6(0x14f)](_0x2462f3);});exports[a4_0x35892b(0x160)]=getBot;function a4_0x6063(){const _0x4eb8a4=['9354DwXJFp','bot_found','pm2\x20restart\x20SQD-bot','findserver','getBot','run','errors','chat','next','deleteChat','catch','throw','1866828iNIanb','defineProperty','chats','BotInterface','Bot','bottoken','body','1764528fhhpAB','connection','21LlDiqR','4296980knDfSq','findone','array','register','11460GJFbVM','telegram','sendMessage','648jEIFEW','params','../models/Bot','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','uri','express-validator','109SvMrpc','token','1751022aOYUCY','reject','proxy-agent','telegraf','value','Proxy','44iQqGei','../models/Proxy','host','HTML','validationResult','save','delete','3995590vAAgna','then','update','findById','map','token_empty','Listo\x20ya\x20<b>SQD</b>\x20puede\x20atender\x20sus\x20solicitudes,\x20puedes\x20comenzar\x20con\x20el\x20comando\x20/servidores','Lo\x20sentimos\x20este\x20bot\x20no\x20se\x20encuentra\x20registrado','json','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20bot','apply','deleteBot','registerChat','isEmpty','filter','create','name','27blPhaI','getMe','Lo\x20sentimos\x20el\x20token\x20es\x20incorrecto','done'];a4_0x6063=function(){return _0x4eb8a4;};return a4_0x6063();}const register=(_0x25f1ca,_0x531cf2)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x14893f=a4_0x35892b;yield express_validator_1['check'](_0x14893f(0x16d))['notEmpty']()['withMessage'](_0x14893f(0x14c))[_0x14893f(0x161)](_0x25f1ca);const _0x325876=_0x18ae6b=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x32382a=_0x14893f;return Bot_1[_0x32382a(0x16c)]['findOne']()[_0x32382a(0x148)](_0x37880d=>{const _0x5c93f9=_0x32382a;if(_0x37880d)return Promise[_0x5c93f9(0x13b)](_0x5c93f9(0x15d));});});yield express_validator_1['check'](_0x14893f(0x16d))['custom'](_0x325876)['run'](_0x25f1ca);const _0x1dcb36=express_validator_1[_0x14893f(0x144)](_0x25f1ca);if(!_0x1dcb36[_0x14893f(0x154)]())return _0x531cf2['json']({'errors':_0x1dcb36[_0x14893f(0x174)]()});let _0x43b027=yield Proxy_1[_0x14893f(0x13f)]['findOne']()['then'](_0x3ea9aa=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x3ea9aa;}));const _0x19b746=_0x43b027!==null?new ProxyAgent(_0x43b027['uri']):null,_0x5d775f=new telegraf_1['Telegraf'](_0x25f1ca['body'][_0x14893f(0x16d)],{'telegram':{'agent':_0x19b746}});yield _0x5d775f[_0x14893f(0x177)][_0x14893f(0x159)]()[_0x14893f(0x148)](_0x2f13e0=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x7b162b=_0x14893f;let _0x24b0f6=new Bot_1[(_0x7b162b(0x16b))]({'token':_0x25f1ca[_0x7b162b(0x16e)][_0x7b162b(0x16d)]});yield Bot_1[_0x7b162b(0x16c)][_0x7b162b(0x156)](_0x24b0f6,(_0x1e9a28,_0x2fef44)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x198755=_0x7b162b;if(_0x1e9a28)return _0x531cf2['json']({'errors':[{'location':_0x198755(0x175),'msg':'Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20bot','param':_0x198755(0x156)}]});else{const _0x224f15=yield execCommand(_0x198755(0x15e));return _0x531cf2[_0x198755(0x14f)](_0x2fef44);}}));}))[_0x14893f(0x166)](_0x166db2=>{const _0x18ae4e=_0x14893f;return _0x531cf2['json']({'errors':[{'location':_0x18ae4e(0x175),'msg':_0x18ae4e(0x15a)}]});});});exports[a4_0x35892b(0x175)]=register;const registerChat=(_0x4dbfd0,_0x2bc7c8)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x4b042c=a4_0x35892b;yield Bot_1[_0x4b042c(0x16c)]['findOne']()[_0x4b042c(0x148)](_0x260929=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x185ebc=_0x4b042c;let _0xec4c8a=![];_0x260929[_0x185ebc(0x16a)][_0x185ebc(0x14b)](_0x4304dc=>{const _0x327fc8=_0x185ebc;if(_0x4304dc['id']==_0x4dbfd0[_0x327fc8(0x16e)]['id'])_0xec4c8a=!![];});if(!_0xec4c8a){let _0xb3e6d5=yield Proxy_1[_0x185ebc(0x13f)]['findOne']()[_0x185ebc(0x148)](_0x4211a7=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x4211a7;}));const _0x37aa7f=_0xb3e6d5!==null?new ProxyAgent(_0xb3e6d5[_0x185ebc(0x17d)]):null,_0x5e5bea=new telegraf_1['Telegraf'](_0x260929[_0x185ebc(0x180)],{'telegram':{'agent':_0x37aa7f}});_0x260929[_0x185ebc(0x16a)]['push']({'id':_0x4dbfd0['body']['id'],'name':_0x4dbfd0[_0x185ebc(0x16e)][_0x185ebc(0x157)]}),yield _0x260929[_0x185ebc(0x145)]();const _0x11403d=yield execCommand(_0x185ebc(0x15e));return _0x5e5bea[_0x185ebc(0x177)][_0x185ebc(0x178)](_0x4dbfd0['body']['id'],_0x185ebc(0x14d),{'parse_mode':_0x185ebc(0x143)}),_0x2bc7c8['json'](_0x260929);}return _0x2bc7c8[_0x185ebc(0x14f)]({'errors':[{'location':_0x185ebc(0x153),'msg':'Lo\x20sentimos\x20este\x20ID\x20ya\x20se\x20encuentra\x20registrado','param':_0x185ebc(0x163)}]});}))['catch'](_0x1f788a=>{const _0x15ed0b=_0x4b042c;return _0x2bc7c8[_0x15ed0b(0x14f)]({'errors':[{'location':_0x15ed0b(0x153),'msg':_0x15ed0b(0x17c),'param':_0x15ed0b(0x173)}]});});});exports[a4_0x35892b(0x153)]=registerChat;const deleteChat=(_0x122d77,_0x4b8721)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5af38c=a4_0x35892b;yield Bot_1[_0x5af38c(0x16c)]['findOne']()[_0x5af38c(0x148)](_0x3b1a8b=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x18f641=_0x5af38c;return _0x3b1a8b[_0x18f641(0x16a)]=_0x3b1a8b['chats'][_0x18f641(0x155)](function(_0x896cf2){const _0x5aa0b7=_0x18f641;return _0x896cf2['id']!=_0x122d77[_0x5aa0b7(0x16e)]['id'];}),yield _0x3b1a8b['save'](),_0x4b8721['json'](_0x3b1a8b);}))['catch'](_0x536220=>{const _0x400a8e=_0x5af38c;return _0x4b8721[_0x400a8e(0x14f)]({'errors':[{'location':_0x400a8e(0x165),'msg':_0x400a8e(0x17c),'param':_0x400a8e(0x173)}]});});});exports[a4_0x35892b(0x165)]=deleteChat;const deleteBot=(_0xc80ec7,_0x182eb4)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1d1c8c=a4_0x35892b;yield Bot_1[_0x1d1c8c(0x16c)][_0x1d1c8c(0x14a)](_0xc80ec7[_0x1d1c8c(0x17a)]['id'])[_0x1d1c8c(0x148)](_0x1d2e9b=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x381163=_0x1d1c8c;if(_0x1d2e9b){const _0x30fdff=yield execCommand('pm2\x20stop\x20SQD-bot');Bot_1['Bot']['findByIdAndDelete'](_0xc80ec7[_0x381163(0x17a)]['id'])[_0x381163(0x148)](()=>{const _0x589006=_0x381163;return _0x182eb4[_0x589006(0x14f)](_0x1d2e9b);})[_0x381163(0x166)](_0x140a05=>{const _0x8ac68a=_0x381163;return _0x182eb4['json']({'errors':[{'location':_0x8ac68a(0x149),'msg':_0x8ac68a(0x150),'param':_0x8ac68a(0x170)}]});});}else return _0x182eb4[_0x381163(0x14f)]({'errors':[{'location':_0x381163(0x146),'msg':_0x381163(0x14e),'param':_0x381163(0x142)}]});}))[_0x1d1c8c(0x166)](_0x206803=>{const _0x1fae16=_0x1d1c8c;return _0x182eb4[_0x1fae16(0x14f)]({'errors':[{'location':_0x1fae16(0x146),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','param':_0x1fae16(0x15f)}]});});});exports[a4_0x35892b(0x152)]=deleteBot;function execCommand(_0x1088e6){return new Promise((_0x2f16c2,_0x461850)=>{exec(_0x1088e6,(_0xcee807,_0x19318f,_0x147b6f)=>{const _0x2b2998=a4_0x235a;if(_0xcee807||_0x147b6f)_0x2f16c2(_0x2b2998(0x162));else _0x2f16c2(_0x19318f);});});}