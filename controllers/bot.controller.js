'use strict';const a4_0x418644=a4_0x2a1d;(function(_0x5c039b,_0x3e85c1){const _0x4abcfe=a4_0x2a1d,_0x44acf0=_0x5c039b();while(!![]){try{const _0x35bddf=-parseInt(_0x4abcfe(0x191))/0x1*(parseInt(_0x4abcfe(0x19c))/0x2)+parseInt(_0x4abcfe(0x199))/0x3*(-parseInt(_0x4abcfe(0x192))/0x4)+parseInt(_0x4abcfe(0x18d))/0x5*(-parseInt(_0x4abcfe(0x173))/0x6)+-parseInt(_0x4abcfe(0x1a0))/0x7+parseInt(_0x4abcfe(0x1b3))/0x8*(parseInt(_0x4abcfe(0x196))/0x9)+-parseInt(_0x4abcfe(0x189))/0xa+parseInt(_0x4abcfe(0x174))/0xb*(parseInt(_0x4abcfe(0x1b4))/0xc);if(_0x35bddf===_0x3e85c1)break;else _0x44acf0['push'](_0x44acf0['shift']());}catch(_0x25111e){_0x44acf0['push'](_0x44acf0['shift']());}}}(a4_0x4c12,0x270f2));var __awaiter=this&&this['__awaiter']||function(_0x6efe00,_0x351cdb,_0x5929e2,_0x5a9d93){function _0x31a527(_0x3504ad){return _0x3504ad instanceof _0x5929e2?_0x3504ad:new _0x5929e2(function(_0x1ede7d){_0x1ede7d(_0x3504ad);});}return new(_0x5929e2||(_0x5929e2=Promise))(function(_0x35ea93,_0x4de28c){const _0x4d6775=a4_0x2a1d;function _0x5b9b92(_0x2f124d){const _0x17eb97=a4_0x2a1d;try{_0x35ca7a(_0x5a9d93[_0x17eb97(0x1b0)](_0x2f124d));}catch(_0x52beed){_0x4de28c(_0x52beed);}}function _0xc37638(_0x3da43c){const _0x275cb9=a4_0x2a1d;try{_0x35ca7a(_0x5a9d93[_0x275cb9(0x181)](_0x3da43c));}catch(_0x1ed779){_0x4de28c(_0x1ed779);}}function _0x35ca7a(_0x4d2548){const _0x9f6bfd=a4_0x2a1d;_0x4d2548[_0x9f6bfd(0x187)]?_0x35ea93(_0x4d2548[_0x9f6bfd(0x1af)]):_0x31a527(_0x4d2548[_0x9f6bfd(0x1af)])[_0x9f6bfd(0x17a)](_0x5b9b92,_0xc37638);}_0x35ca7a((_0x5a9d93=_0x5a9d93[_0x4d6775(0x1b8)](_0x6efe00,_0x351cdb||[]))['next']());});};Object[a4_0x418644(0x18e)](exports,a4_0x418644(0x180),{'value':!![]}),exports[a4_0x418644(0x1bc)]=exports[a4_0x418644(0x17d)]=exports[a4_0x418644(0x17b)]=exports[a4_0x418644(0x1b5)]=exports[a4_0x418644(0x195)]=void 0x0;const Bot_1=require(a4_0x418644(0x19e)),Proxy_1=require(a4_0x418644(0x184)),express_validator_1=require('express-validator'),telegraf_1=require(a4_0x418644(0x1ad)),exec=require(a4_0x418644(0x19d))[a4_0x418644(0x1a7)],ProxyAgent=require(a4_0x418644(0x170)),getBot=(_0x1c13f5,_0x31237c)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x3e2ec2=a4_0x418644;let _0x119ddb=yield Bot_1['Bot'][_0x3e2ec2(0x176)]()[_0x3e2ec2(0x17a)](_0x268f51=>{return _0x268f51;})['catch'](_0x314114=>{const _0x3abffa=_0x3e2ec2;return{'errors':[{'location':_0x3abffa(0x195),'msg':_0x3abffa(0x18f),'param':'bot'}]};});return _0x31237c['json'](_0x119ddb);});exports[a4_0x418644(0x195)]=getBot;function a4_0x4c12(){const _0x2a06b3=['telegram','246618iblMVT','reject','update','202DejVtw','child_process','../models/Bot','Proxy','518896iHEgpE','json','host','findById','Listo\x20ya\x20<b>SQD</b>\x20puede\x20atender\x20sus\x20solicitudes,\x20puedes\x20comenzar\x20con\x20el\x20comando\x20/servidores','withMessage','check','exec','catch','findserver','name','Lo\x20sentimos\x20no\x20se\x20pudo\x20eliminar\x20el\x20bot','getMe','telegraf','pm2\x20stop\x20SQD-bot','value','next','body','token_empty','136cWoJbU','8169972rjNPkc','register','errors','Lo\x20sentimos\x20no\x20se\x20pudo\x20registrar\x20el\x20bot','apply','Lo\x20sentimos\x20el\x20token\x20es\x20incorrecto','connection','Lo\x20sentimos\x20este\x20ID\x20ya\x20se\x20encuentra\x20registrado','deleteBot','proxy-agent','BotInterface','delete','12CNxbvu','11TLADQQ','create','findOne','chats','isEmpty','bot_found','then','registerChat','pm2\x20restart\x20SQD-bot','deleteChat','notEmpty','Telegraf','__esModule','throw','filter','array','../models/Proxy','sendMessage','uri','done','params','2077160OXRNfn','Bot','findone','Lo\x20sentimos\x20este\x20bot\x20no\x20se\x20encuentra\x20registrado','154085NXDApI','defineProperty','Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','save','1654vlTdzN','4UwyqDo','findByIdAndDelete','bottoken','getBot','38061QBeJGV','token'];a4_0x4c12=function(){return _0x2a06b3;};return a4_0x4c12();}const register=(_0x100278,_0x2830f5)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5133f2=a4_0x418644;yield express_validator_1[_0x5133f2(0x1a6)](_0x5133f2(0x194))[_0x5133f2(0x17e)]()[_0x5133f2(0x1a5)](_0x5133f2(0x1b2))['run'](_0x100278);const _0x3a019f=_0x495cb8=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x51480e=_0x5133f2;return Bot_1['Bot'][_0x51480e(0x176)]()[_0x51480e(0x17a)](_0x5dc838=>{const _0x46252c=_0x51480e;if(_0x5dc838)return Promise[_0x46252c(0x19a)](_0x46252c(0x179));});});yield express_validator_1['check']('bottoken')['custom'](_0x3a019f)['run'](_0x100278);const _0x1063b8=express_validator_1['validationResult'](_0x100278);if(!_0x1063b8[_0x5133f2(0x178)]())return _0x2830f5[_0x5133f2(0x1a1)]({'errors':_0x1063b8[_0x5133f2(0x183)]()});let _0x3ead1d=yield Proxy_1[_0x5133f2(0x19f)][_0x5133f2(0x176)]()[_0x5133f2(0x17a)](_0x248dcb=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0x248dcb;}));const _0xf626f=_0x3ead1d!==null?new ProxyAgent(_0x3ead1d[_0x5133f2(0x186)]):null,_0x4fccf5=new telegraf_1[(_0x5133f2(0x17f))](_0x100278[_0x5133f2(0x1b1)][_0x5133f2(0x194)],{'telegram':{'agent':_0xf626f}});yield _0x4fccf5[_0x5133f2(0x198)][_0x5133f2(0x1ac)]()[_0x5133f2(0x17a)](_0x4544b9=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5779cf=_0x5133f2;let _0x4197f7=new Bot_1[(_0x5779cf(0x171))]({'token':_0x100278[_0x5779cf(0x1b1)][_0x5779cf(0x194)]});yield Bot_1[_0x5779cf(0x18a)][_0x5779cf(0x175)](_0x4197f7,(_0x347f77,_0x59b40b)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x536f04=_0x5779cf;if(_0x347f77)return _0x2830f5[_0x536f04(0x1a1)]({'errors':[{'location':_0x536f04(0x1b5),'msg':_0x536f04(0x1b7),'param':_0x536f04(0x175)}]});else{const _0x355c76=yield execCommand(_0x536f04(0x17c));return _0x2830f5[_0x536f04(0x1a1)](_0x59b40b);}}));}))[_0x5133f2(0x1a8)](_0x159945=>{const _0x3b7aa3=_0x5133f2;return _0x2830f5[_0x3b7aa3(0x1a1)]({'errors':[{'location':_0x3b7aa3(0x1b5),'msg':_0x3b7aa3(0x1b9)}]});});});exports['register']=register;const registerChat=(_0x529a95,_0x2f335d)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x1ecf4b=a4_0x418644;yield Bot_1['Bot']['findOne']()[_0x1ecf4b(0x17a)](_0x2281d8=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2b93d4=_0x1ecf4b;let _0x179001=![];_0x2281d8[_0x2b93d4(0x177)]['map'](_0x422257=>{const _0x2f9cd7=_0x2b93d4;if(_0x422257['id']==_0x529a95[_0x2f9cd7(0x1b1)]['id'])_0x179001=!![];});if(!_0x179001){let _0x122763=yield Proxy_1[_0x2b93d4(0x19f)]['findOne']()[_0x2b93d4(0x17a)](_0xff9180=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){return _0xff9180;}));const _0x155798=_0x122763!==null?new ProxyAgent(_0x122763[_0x2b93d4(0x186)]):null,_0x338b18=new telegraf_1[(_0x2b93d4(0x17f))](_0x2281d8[_0x2b93d4(0x197)],{'telegram':{'agent':_0x155798}});_0x2281d8['chats']['push']({'id':_0x529a95[_0x2b93d4(0x1b1)]['id'],'name':_0x529a95['body'][_0x2b93d4(0x1aa)]}),yield _0x2281d8[_0x2b93d4(0x190)]();const _0x12e967=yield execCommand(_0x2b93d4(0x17c));return _0x338b18['telegram'][_0x2b93d4(0x185)](_0x529a95[_0x2b93d4(0x1b1)]['id'],_0x2b93d4(0x1a4),{'parse_mode':'HTML'}),_0x2f335d['json'](_0x2281d8);}return _0x2f335d[_0x2b93d4(0x1a1)]({'errors':[{'location':'registerChat','msg':_0x2b93d4(0x1bb),'param':'chat'}]});}))['catch'](_0x1a1deb=>{const _0x1139bd=_0x1ecf4b;return _0x2f335d[_0x1139bd(0x1a1)]({'errors':[{'location':'registerChat','msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','param':_0x1139bd(0x18b)}]});});});exports[a4_0x418644(0x17b)]=registerChat;const deleteChat=(_0x4fe4f0,_0x274dde)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x5cfd07=a4_0x418644;yield Bot_1['Bot']['findOne']()[_0x5cfd07(0x17a)](_0x470dbb=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x63296d=_0x5cfd07;return _0x470dbb[_0x63296d(0x177)]=_0x470dbb['chats'][_0x63296d(0x182)](function(_0x481aae){return _0x481aae['id']!=_0x4fe4f0['body']['id'];}),yield _0x470dbb['save'](),_0x274dde[_0x63296d(0x1a1)](_0x470dbb);}))['catch'](_0x13390a=>{const _0x5bcc89=_0x5cfd07;return _0x274dde[_0x5bcc89(0x1a1)]({'errors':[{'location':_0x5bcc89(0x17d),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','param':_0x5bcc89(0x18b)}]});});});exports[a4_0x418644(0x17d)]=deleteChat;const deleteBot=(_0x294f40,_0x54aa4e)=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x2f5820=a4_0x418644;yield Bot_1['Bot'][_0x2f5820(0x1a3)](_0x294f40[_0x2f5820(0x188)]['id'])[_0x2f5820(0x17a)](_0x192c04=>__awaiter(void 0x0,void 0x0,void 0x0,function*(){const _0x14220b=_0x2f5820;if(_0x192c04){const _0x3f75d2=yield execCommand(_0x14220b(0x1ae));Bot_1['Bot'][_0x14220b(0x193)](_0x294f40[_0x14220b(0x188)]['id'])[_0x14220b(0x17a)](()=>{return _0x54aa4e['json'](_0x192c04);})['catch'](_0x1d251e=>{const _0x3692b5=_0x14220b;return _0x54aa4e['json']({'errors':[{'location':_0x3692b5(0x19b),'msg':_0x3692b5(0x1ab),'param':_0x3692b5(0x1ba)}]});});}else return _0x54aa4e[_0x14220b(0x1a1)]({'errors':[{'location':_0x14220b(0x172),'msg':_0x14220b(0x18c),'param':_0x14220b(0x1a2)}]});}))['catch'](_0x186e87=>{const _0x123577=_0x2f5820;return _0x54aa4e['json']({'errors':[{'location':_0x123577(0x172),'msg':'Lo\x20sentimos\x20no\x20se\x20pudieron\x20obtener\x20los\x20datos\x20del\x20bot','param':_0x123577(0x1a9)}]});});});exports[a4_0x418644(0x1bc)]=deleteBot;function a4_0x2a1d(_0x44016d,_0x5d3f12){const _0x4c12c9=a4_0x4c12();return a4_0x2a1d=function(_0x2a1ddd,_0x3baeb0){_0x2a1ddd=_0x2a1ddd-0x170;let _0x2f1d82=_0x4c12c9[_0x2a1ddd];return _0x2f1d82;},a4_0x2a1d(_0x44016d,_0x5d3f12);}function execCommand(_0x47ed54){return new Promise((_0x5d0b4c,_0x8e4307)=>{exec(_0x47ed54,(_0x31ecae,_0x47122f,_0x2e3a5d)=>{const _0x4e05cd=a4_0x2a1d;if(_0x31ecae||_0x2e3a5d)_0x5d0b4c(_0x4e05cd(0x1b6));else _0x5d0b4c(_0x47122f);});});}